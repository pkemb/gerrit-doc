<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Gerrit Code Review - Configuration</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Gerrit Code Review - Configuration</h1>
<div class="details">
<span id="revnumber">version v3.4.1</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_file_etcgerrit_config">File <code>etc/gerrit.config</code></a>
<ul class="sectlevel2">
<li><a href="#reloadConfig">Reload <code>etc/gerrit.config</code></a></li>
<li><a href="#accountPatchReviewDb">Section accountPatchReviewDb</a></li>
<li><a href="#accounts">Section accounts</a></li>
<li><a href="#addreviewer">Section addreviewer</a></li>
<li><a href="#auth">Section auth</a></li>
<li><a href="#cache">Section cache</a></li>
<li><a href="#capability">Section capability</a></li>
<li><a href="#change">Section change</a></li>
<li><a href="#changeCleanup">Section changeCleanup</a></li>
<li><a href="#commentlink">Section commentlink</a></li>
<li><a href="#container">Section container</a></li>
<li><a href="#core">Section core</a></li>
<li><a href="#download">Section download</a></li>
<li><a href="#gc">Section gc</a></li>
<li><a href="#gerrit">Section gerrit</a></li>
<li><a href="#gitweb">Section gitweb</a></li>
<li><a href="#groups">Section groups</a></li>
<li><a href="#has-operand-alias">Section has operand alias</a></li>
<li><a href="#http">Section http</a></li>
<li><a href="#httpd">Section httpd</a></li>
<li><a href="#index">Section index</a></li>
<li><a href="#elasticsearch">Section elasticsearch</a></li>
<li><a href="#event">Section event</a></li>
<li><a href="#experiments">Section experiments</a></li>
<li><a href="#ldap">Section ldap</a></li>
<li><a href="#lfs">Section lfs</a></li>
<li><a href="#log">Section log</a></li>
<li><a href="#mimetype">Section mimetype</a></li>
<li><a href="#note-db">Section noteDb</a></li>
<li><a href="#oauth">Section oauth</a></li>
<li><a href="#operator-alias">Section operator alias</a></li>
<li><a href="#pack">Section pack</a></li>
<li><a href="#plugins">Section plugins</a></li>
<li><a href="#receive">Section receive</a></li>
<li><a href="#repository">Section repository</a></li>
<li><a href="#retry">Section retry</a></li>
<li><a href="#rules">Section rules</a></li>
<li><a href="#execution">Section execution</a></li>
<li><a href="#receiveemail">Section receiveemail</a></li>
<li><a href="#sendemail">Section sendemail</a></li>
<li><a href="#site">Section site</a></li>
<li><a href="#ssh-alias">Section ssh-alias</a></li>
<li><a href="#ssh">Section ssh</a></li>
<li><a href="#sshd">Section sshd</a></li>
<li><a href="#suggest">Section suggest</a></li>
<li><a href="#tracing">Section tracing</a></li>
<li><a href="#trackingid">Section trackingid</a></li>
<li><a href="#transfer">Section transfer</a></li>
<li><a href="#upload">Section upload</a></li>
<li><a href="#accountDeactivation">Section accountDeactivation</a></li>
<li><a href="#submodule">Section submodule</a></li>
<li><a href="#user">Section user</a></li>
<li><a href="#schedule-configuration">Schedule Configuration</a></li>
</ul>
</li>
<li><a href="#All-Projects-project.config">File <code>etc/All-Projects/project.config</code></a></li>
<li><a href="#secure.config">File <code>etc/secure.config</code></a></li>
<li><a href="#_file_etcpeer_keys">File <code>etc/peer_keys</code></a>
<ul class="sectlevel2">
<li><a href="#_configurable_parameters">Configurable Parameters</a></li>
</ul>
</li>
<li><a href="#jgitConfig">File <code>etc/jgit.config</code></a>
<ul class="sectlevel2">
<li><a href="#jgit-gc">Section gc</a></li>
<li><a href="#jgit-protocol">Section protocol</a></li>
<li><a href="#jgit-receive">Section receive</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_file_etcgerrit_config">File <code>etc/gerrit.config</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional file <code>'$site_path'/etc/gerrit.config</code> is a Git-style
config file that controls many host specific settings for Gerrit.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The contents of the <code>etc/gerrit.config</code> file are cached at startup
by Gerrit. For most properties, if they are modified in this file, Gerrit
needs to be restarted before it will use the new values. Some properties
support being <a href="#reloadConfig"><code>reloaded</code></a> without restart.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sample <code>etc/gerrit.config</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[core]
  packedGitLimit = 200 m

[cache]
  directory = /var/cache/gerrit</pre>
</div>
</div>
<div class="sect2">
<h3 id="reloadConfig">Reload <code>etc/gerrit.config</code></h3>
<div class="paragraph">
<p>Some properties support being reloaded without restart when a <code>reload config</code>
command is issued through <a href="cmd-reload-config.html"><code>SSH</code></a> or the
<a href="rest-api-config.html#reload-config"><code>REST API</code></a>. If a property supports
this it is specified in the documentation for the property below.</p>
</div>
</div>
<div class="sect2">
<h3 id="accountPatchReviewDb">Section accountPatchReviewDb</h3>
<div class="paragraph">
<p>The AccountPatchReviewDb is a database used to store the user file reviewed
flags.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="accountPatchReviewDb.url"></a>accountPatchReviewDb.url</dt>
<dd>
<div class="paragraph">
<p>The url of accountPatchReviewDb. Supported types are <code>H2</code>, <code>POSTGRESQL</code>,
<code>MARIADB</code>, and <code>MYSQL</code>. Drop the driver jar in the lib folder of the site path
if the Jdbc driver of the corresponding Database is not yet in the class path.</p>
</div>
<div class="paragraph">
<p>Default is to create H2 database in the db folder of the site path.</p>
</div>
<div class="paragraph">
<p>Changing this parameter requires to migrate database using the
<a href="pgm-MigrateAccountPatchReviewDb.html">MigrateAccountPatchReviewDb</a> program.
Migration cannot be done while the server is running.</p>
</div>
<div class="paragraph">
<p>Also note that the db_name has to be a new db and not reusing an old ReviewDb
database from a former 2.x site, otherwise gerrit&#8217;s init will remove the table.</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>[accountPatchReviewDb]
  url = jdbc:postgresql://&lt;host&gt;:&lt;port&gt;/&lt;db_name&gt;?user=&lt;user&gt;&amp;password=&lt;password&gt;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="accountPatchReviewDb.poolLimit"></a>accountPatchReviewDb.poolLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum number of open database connections.  If the server needs
more than this number, request processing threads will wait up
to <a href="#accountPatchReviewDb.poolMaxWait">poolMaxWait</a> seconds for a
connection to be released before they abort with an exception.
This limit must be several units higher than the total number of
httpd and sshd threads as some request processing code paths may
need multiple connections.</p>
</div>
<div class="paragraph">
<p>Default is <a href="#sshd.threads">sshd.threads</a>
 + <a href="#httpd.maxThreads">httpd.maxThreads</a> + 2.</p>
</div>
</dd>
<dt class="hdlist1"><a id="accountPatchReviewDb.poolMinIdle"></a>database.poolMinIdle</dt>
<dd>
<div class="paragraph">
<p>Minimum number of connections to keep idle in the pool.
Default is 4.</p>
</div>
</dd>
<dt class="hdlist1"><a id="accountPatchReviewDb.poolMaxIdle"></a>accountPatchReviewDb.poolMaxIdle</dt>
<dd>
<div class="paragraph">
<p>Maximum number of connections to keep idle in the pool.  If there
are more idle connections, connections will be closed instead of
being returned back to the pool.
Default is min(<a href="#accountPatchReviewDb.poolLimit">accountPatchReviewDb.poolLimit</a>, 16).</p>
</div>
</dd>
<dt class="hdlist1"><a id="accountPatchReviewDb.poolMaxWait"></a>accountPatchReviewDb.poolMaxWait</dt>
<dd>
<div class="paragraph">
<p>Maximum amount of time a request processing thread will wait to
acquire a database connection from the pool.  If no connection is
released within this time period, the processing thread will abort
its current operations and return an error to the client.
Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ms, milliseconds</p>
</li>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a unit suffix is not specified, <code>milliseconds</code> is assumed.
Default is <code>30 seconds</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="accounts">Section accounts</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="accounts.visibility"></a>accounts.visibility</dt>
<dd>
<div class="paragraph">
<p>Controls visibility of other users' dashboard pages and
completion suggestions to web users.</p>
</div>
<div class="paragraph">
<p>If <code>ALL</code>, all users are visible to all other users, even
anonymous users.</p>
</div>
<div class="paragraph">
<p>If <code>SAME_GROUP</code>, only users who are also members of a group the
current user is a member of are visible.</p>
</div>
<div class="paragraph">
<p>If <code>VISIBLE_GROUP</code>, only users who are members of at least one group
that is visible to the current user are visible.</p>
</div>
<div class="paragraph">
<p>If <code>NONE</code>, no users other than the current user are visible.</p>
</div>
<div class="paragraph">
<p>Default is <code>ALL</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="accounts.defaultDisplayName"></a>accounts.defaultDisplayName</dt>
<dd>
<div class="paragraph">
<p>If a user account does not have a display name set, which is the normal
case, then this configuration value chooses the strategy how to choose
the display name. Note that this strategy is not applied by the backend.
If the AccountInfo has the display name unset, then the client has to
apply this strategy.</p>
</div>
<div class="paragraph">
<p>If <code>FULL_NAME</code>, then the (full) name of the user is chosen from
<a href="rest-api-accounts.html#account-info">AccountInfo</a>.</p>
</div>
<div class="paragraph">
<p>If <code>FIRST_NAME</code>, then the first word (i.e. everything until first
whitespace character) of the (full) name of the user is chosen from
<a href="rest-api-accounts.html#account-info">AccountInfo</a>.</p>
</div>
<div class="paragraph">
<p>If <code>USERNAME</code>, then the username of the user is chosen from
<a href="rest-api-accounts.html#account-info">AccountInfo</a>. If that is not
set, then the (full) name will be used.</p>
</div>
<div class="paragraph">
<p>Default is <code>FULL_NAME</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="addreviewer">Section addreviewer</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="addreviewer.maxWithoutConfirmation"></a>addreviewer.maxWithoutConfirmation</dt>
<dd>
<div class="paragraph">
<p>The maximum number of reviewers a user can add at once by adding a
group as reviewer without being asked to confirm the operation.</p>
</div>
<div class="paragraph">
<p>If set to 0, the user will never be asked to confirm adding a group
as reviewer.</p>
</div>
<div class="paragraph">
<p>Default is 10.</p>
</div>
<div class="paragraph">
<p>This setting only applies for adding reviewers in the Gerrit Web UI,
but is ignored when adding reviewers with the
<a href="cmd-set-reviewers.html">set-reviewers</a> command.</p>
</div>
<div class="paragraph">
<p>This value supports <a href="#reloadConfig">configuration reloads</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="addreviewer.maxAllowed"></a>addreviewer.maxAllowed</dt>
<dd>
<div class="paragraph">
<p>The maximum number of reviewers a user can add at once by adding a
group as reviewer.</p>
</div>
<div class="paragraph">
<p>If set to 0, there is no limit for the number of reviewers that can
be added at once by adding a group as reviewer.</p>
</div>
<div class="paragraph">
<p>Default is 20.</p>
</div>
<div class="paragraph">
<p>This value supports <a href="#reloadConfig">configuration reloads</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="addReviewer.baseWeight"></a>addReviewer.baseWeight</dt>
<dd>
<div class="paragraph">
<p>The weight that will be applied in the default reviewer ranking algorithm.
This can be increased or decreased to give more or less influence to plugins.
If set to zero, the base ranking will not have any effect. Reviewers will then
be ordered as ranked by the plugins (if there are any).</p>
</div>
<div class="paragraph">
<p>By default 1.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="auth">Section auth</h3>
<div class="paragraph">
<p>See also <a href="config-sso.html">SSO configuration</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="auth.type"></a>auth.type</dt>
<dd>
<div class="paragraph">
<p>Type of user authentication employed by Gerrit.  The supported
values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>OpenID</code></p>
<div class="paragraph">
<p>The default setting.  Gerrit uses any valid OpenID
provider chosen by the end-user.  For more information see
<a href="http://openid.net/" class="external" target="_blank" rel="noopener">openid.net</a>.</p>
</div>
</li>
<li>
<p><code>OpenID_SSO</code></p>
<div class="paragraph">
<p>Supports OpenID from a single provider.  There is no registration
link, and the "Sign In" link sends the user directly to the provider&#8217;s
SSO entry point.</p>
</div>
</li>
<li>
<p><code>HTTP</code></p>
<div class="paragraph">
<p>Gerrit relies upon data presented in the HTTP request.  This includes
HTTP basic authentication, or some types of commercial single-sign-on
solutions.  With this setting enabled the authentication must
take place in the web server or servlet container, and not from
within Gerrit.</p>
</div>
</li>
<li>
<p><code>HTTP_LDAP</code></p>
<div class="paragraph">
<p>Exactly like <code>HTTP</code> (above), but additionally Gerrit pre-populates
a user&#8217;s full name and email address based on information obtained
from the user&#8217;s account object in LDAP.  The user&#8217;s group membership
is also pulled from LDAP, making any LDAP groups that a user is a
member of available as groups in Gerrit. Hence the <code>_LDAP</code> suffix in
the name of this authentication type. Gerrit does NOT authenticate
the user via LDAP.</p>
</div>
</li>
<li>
<p><code>CLIENT_SSL_CERT_LDAP</code></p>
<div class="paragraph">
<p>This authentication type is actually kind of SSO. Gerrit will configure
Jetty&#8217;s SSL channel to request the client&#8217;s SSL certificate. For this
authentication to work a Gerrit administrator has to import the root
certificate of the trust chain used to issue the client&#8217;s certificate
into the &lt;review-site&gt;/etc/keystore.
After the authentication is done Gerrit will obtain basic user
registration (name and email) from LDAP, and some group memberships.
Hence the <code>_LDAP</code> suffix in the name of this authentication type.
Gerrit does NOT authenticate the user via LDAP.
This authentication type can only be used under hosted daemon mode, and
the httpd.listenUrl must use https:// as the protocol.
Optionally, certificate revocation list file can be used
at &lt;review-site&gt;/etc/crl.pem. For details, see httpd.sslCrl.</p>
</div>
</li>
<li>
<p><code>LDAP</code></p>
<div class="paragraph">
<p>Gerrit prompts the user to enter a username and a password, which
it then verifies by performing a simple bind against the configured
<a href="#ldap.server">ldap.server</a>.  In this configuration the web server
is not involved in the user authentication process.</p>
</div>
<div class="paragraph">
<p>The actual username used in the LDAP simple bind request is the
account&#8217;s full DN, which is discovered by first querying the
directory using either an anonymous request, or the configured
<a href="#ldap.username">ldap.username</a> identity. Gerrit can also use kerberos if
<a href="#ldap.authentication">ldap.authentication</a> is set to <code>GSSAPI</code>.</p>
</div>
<div class="paragraph">
<p>If <a href="#auth.gitBasicAuthPolicy"><code>auth.gitBasicAuthPolicy</code></a> is set to <code>HTTP</code>,
the randomly generated HTTP password is used for authentication. On the other hand,
if <a href="#auth.gitBasicAuthPolicy"><code>auth.gitBasicAuthPolicy</code></a> is set to <code>HTTP_LDAP</code>,
the password in the request is first checked against the HTTP password and, if
it does not match, it is then validated against the LDAP password.
Service users that only exist in the Gerrit database are authenticated by their
HTTP passwords.</p>
</div>
</li>
<li>
<p><code>LDAP_BIND</code></p>
<div class="paragraph">
<p>Gerrit prompts the user to enter a username and a password, which
it then verifies by performing a simple bind against the configured
<a href="#ldap.server">ldap.server</a>.  In this configuration the web server
is not involved in the user authentication process.</p>
</div>
<div class="paragraph">
<p>Unlike <code>LDAP</code> above, the username used to perform the LDAP simple bind
request is the exact string supplied in the dialog by the user.
The configured <a href="#ldap.username">ldap.username</a> identity is not used to obtain
account information.</p>
</div>
</li>
<li>
<p><code>OAUTH</code></p>
<div class="paragraph">
<p>OAuth is a protocol that lets external apps request authorization to private
details in a user&#8217;s account without getting their password. This is
preferred over Basic Authentication because tokens can be limited to specific
types of data, and can be revoked by users at any time.</p>
</div>
<div class="paragraph">
<p>Site owners have to register their application before getting started. Note
that provider specific plugins must be used with this authentication scheme.</p>
</div>
<div class="paragraph">
<p>Git clients may send OAuth 2 access tokens instead of passwords in the Basic
authentication header. Note that provider specific plugins must be installed to
facilitate this authentication scheme. If multiple OAuth 2 provider plugins are
installed one of them must be selected as default with the
<code>auth.gitOAuthProvider</code> option.</p>
</div>
</li>
<li>
<p><code>DEVELOPMENT_BECOME_ANY_ACCOUNT</code></p>
<div class="paragraph">
<p><strong>DO NOT USE</strong>.  Only for use in a development environment.</p>
</div>
<div class="paragraph">
<p>When this is the configured authentication method a hyperlink titled
<code>Become</code> appears in the top right corner of the page, taking the
user to a form where they can enter the username of any existing
user account, and immediately login as that account, without any
authentication taking place.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, OpenID.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.allowedOpenID"></a>auth.allowedOpenID</dt>
<dd>
<div class="paragraph">
<p>List of permitted OpenID providers.  A user may only authenticate
with an OpenID that matches this list.  Only used if <code>auth.type</code>
is set to <code>OpenID</code> (the default).</p>
</div>
<div class="paragraph">
<p>Patterns may be either a
<a href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" class="external" target="_blank" rel="noopener">standard
Java regular expression (java.util.regex)</a> (start with <code>^</code> and
end with <code>$</code>) or be a simple prefix (any other string).</p>
</div>
<div class="paragraph">
<p>By default, the list contains two values, <code>http://</code> and <code>https://</code>,
allowing users to authenticate with any OpenID provider.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.trustedOpenID"></a>auth.trustedOpenID</dt>
<dd>
<div class="paragraph">
<p>List of trusted OpenID providers.  Only used if <code>auth.type</code> is
set to <code>OpenID</code> (the default).</p>
</div>
<div class="paragraph">
<p>In order for a user to take advantage of permissions beyond those
granted to the <code>Anonymous Users</code> and <code>Registered Users</code> groups,
the user account must only have OpenIDs which match at least one
pattern from this list.</p>
</div>
<div class="paragraph">
<p>Patterns may be either a
<a href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" class="external" target="_blank" rel="noopener">standard
Java regular expression (java.util.regex)</a> (start with <code>^</code> and
end with <code>$</code>) or be a simple prefix (any other string).</p>
</div>
<div class="paragraph">
<p>By default, the list contains two values, <code>http://</code> and <code>https://</code>,
allowing Gerrit to trust any OpenID it receives.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.openIdDomain"></a>auth.openIdDomain</dt>
<dd>
<div class="paragraph">
<p>List of allowed OpenID email address domains. Only used if
<code>auth.type</code> is set to <code>OPENID</code> or <code>OPENID_SSO</code>.</p>
</div>
<div class="paragraph">
<p>Domain is case insensitive and must be in the same form as it
appears in the email address, for example, "example.com".</p>
</div>
<div class="paragraph">
<p>By default, any domain is accepted.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.maxOpenIdSessionAge"></a>auth.maxOpenIdSessionAge</dt>
<dd>
<div class="paragraph">
<p>Time in seconds before an OpenID provider must force the user
to authenticate themselves again before authentication to this
Gerrit server.  Currently this is only a polite request, and users
coming from providers that don&#8217;t support the PAPE extension will
be accepted anyway.  In the future it may be enforced, rejecting
users coming from providers that don&#8217;t honor the max session age.</p>
</div>
<div class="paragraph">
<p>If set to 0, the provider will always force the user to authenticate
(e.g. supply their password).  Values should use common unit suffixes
to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
<li>
<p>d, day, days</p>
</li>
<li>
<p>w, week, weeks (<code>1 week</code> is treated as <code>7 days</code>)</p>
</li>
<li>
<p>mon, month, months (<code>1 month</code> is treated as <code>30 days</code>)</p>
</li>
<li>
<p>y, year, years (<code>1 year</code> is treated as <code>365 days</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default is -1, permitting infinite time between authentications.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.registerEmailPrivateKey"></a>auth.registerEmailPrivateKey</dt>
<dd>
<div class="paragraph">
<p>Private key to use when generating an email verification token.</p>
</div>
<div class="paragraph">
<p>If not set, a random key is generated when running the
<a href="pgm-init.html">site initialization</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.maxRegisterEmailTokenAge"></a>auth.maxRegisterEmailTokenAge</dt>
<dd>
<div class="paragraph">
<p>Time in seconds before an email verification token sent to a user in
order to validate their email address expires.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
<li>
<p>d, day, days</p>
</li>
<li>
<p>w, week, weeks (<code>1 week</code> is treated as <code>7 days</code>)</p>
</li>
<li>
<p>mon, month, months (<code>1 month</code> is treated as <code>30 days</code>)</p>
</li>
<li>
<p>y, year, years (<code>1 year</code> is treated as <code>365 days</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default is 12 hours.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.openIdSsoUrl"></a>auth.openIdSsoUrl</dt>
<dd>
<div class="paragraph">
<p>The SSO entry point URL.  Only used if <code>auth.type</code> is set to
<code>OpenID_SSO</code>.</p>
</div>
<div class="paragraph">
<p>The "Sign In" link will send users directly to this URL.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.httpHeader"></a>auth.httpHeader</dt>
<dd>
<div class="paragraph">
<p>HTTP header to trust the username from, or unset to select HTTP basic
authentication.  Only used if <code>auth.type</code> is set to <code>HTTP</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.httpDisplaynameHeader"></a>auth.httpDisplaynameHeader</dt>
<dd>
<div class="paragraph">
<p>HTTP header to retrieve the user&#8217;s display name from.  Only used if <code>auth.type</code>
is set to <code>HTTP</code>.</p>
</div>
<div class="paragraph">
<p>If set, Gerrit trusts and enforces the user&#8217;s full name using the HTTP header
and disables the ability to manually modify the user&#8217;s full name
from the contact information page.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.httpEmailHeader"></a>auth.httpEmailHeader</dt>
<dd>
<div class="paragraph">
<p>HTTP header to retrieve the user&#8217;s e-mail from.  Only used if <code>auth.type</code>
is set to <code>HTTP</code>.</p>
</div>
<div class="paragraph">
<p>If set, Gerrit trusts and enforces the user&#8217;s e-mail using the HTTP header
and disables the ability to manually modify or register other e-mails
from the contact information page.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.httpExternalIdHeader"></a>auth.httpExternalIdHeader</dt>
<dd>
<div class="paragraph">
<p>HTTP header to retrieve the user&#8217;s external identification token.
Only used if <code>auth.type</code> is set to <code>HTTP</code>.</p>
</div>
<div class="paragraph">
<p>If set, Gerrit adds the value contained in the HTTP header to the
user&#8217;s identity. Typical use is with a federated identity token from
an external system (e.g. GitHub OAuth 2.0 authentication) where
the user&#8217;s auth token exchanged during authentication handshake
needs to be used for authenticated communication to the external
system later on.</p>
</div>
<div class="paragraph">
<p>Example: <code>auth.httpExternalIdHeader: X-GitHub-OTP</code></p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.loginUrl"></a>auth.loginUrl</dt>
<dd>
<div class="paragraph">
<p>URL to redirect a browser to after the end-user has clicked on the
login link in the upper right corner. Only used if <code>auth.type</code> is set
to <code>HTTP</code> or <code>HTTP_LDAP</code>.
Organizations using an enterprise single-sign-on solution may want to
redirect the browser to the SSO product&#8217;s sign-in page for completing the
login process and validate their credentials.</p>
</div>
<div class="paragraph">
<p>If set, Gerrit allows anonymous access until the end-user performs the login
and provides a trusted identity through the HTTP header.
If not set, Gerrit requires the HTTP header with a trusted identity
and returns the error page 'LoginRedirect.html' if such a header is not
present.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.loginText"></a>auth.loginText</dt>
<dd>
<div class="paragraph">
<p>Text displayed in the loginUrl link. Only used if <code>auth.loginUrl</code> is set.</p>
</div>
<div class="paragraph">
<p>If not set, the "Sign In" text is used.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.registerPageUrl"></a>auth.registerPageUrl</dt>
<dd>
<div class="paragraph">
<p>URL of the registration page to use when a new user logs in to Gerrit for
the first time. Used only when <code>auth.type</code> is set to <code>HTTP</code>.</p>
</div>
<div class="paragraph">
<p>If not set, the standard Gerrit registration page <code>/#/register/</code> is displayed.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.logoutUrl"></a>auth.logoutUrl</dt>
<dd>
<div class="paragraph">
<p>URL to redirect a browser to after the end-user has clicked on the
"Sign Out" link in the upper right corner.  Organizations using an
enterprise single-sign-on solution may want to redirect the browser
to the SSO product&#8217;s sign-out page.</p>
</div>
<div class="paragraph">
<p>If not set, the redirect returns to the list of all open changes.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.registerUrl"></a>auth.registerUrl</dt>
<dd>
<div class="paragraph">
<p>Target for the "Register" link in the upper right corner.  Used only
when <code>auth.type</code> is <code>LDAP</code>, <code>LDAP_BIND</code> or <code>CUSTOM_EXTENSION</code>.</p>
</div>
<div class="paragraph">
<p>If not set, no "Register" link is displayed.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.registerText"></a>auth.registerText</dt>
<dd>
<div class="paragraph">
<p>Text for the "Register" link in the upper right corner.  Used only
when <code>auth.type</code> is <code>LDAP</code>, <code>LDAP_BIND</code> or <code>CUSTOM_EXTENSION</code>.</p>
</div>
<div class="paragraph">
<p>If not set, defaults to "Register".</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.editFullNameUrl"></a>auth.editFullNameUrl</dt>
<dd>
<div class="paragraph">
<p>Target for the "Edit" button when the user is allowed to edit their
full name.  Used only when <code>auth.type</code> is <code>LDAP</code>, <code>LDAP_BIND</code> or
<code>CUSTOM_EXTENSION</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.httpPasswordUrl"></a>auth.httpPasswordUrl</dt>
<dd>
<div class="paragraph">
<p>Target for the "Obtain Password" link.  Used only when <code>auth.type</code> is
<code>CUSTOM_EXTENSION</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.switchAccountUrl"></a>auth.switchAccountUrl</dt>
<dd>
<div class="paragraph">
<p>URL to switch user identities and login as a different account than
the currently active account.  This is disabled by default except when
<code>auth.type</code> is <code>OPENID</code> and <code>DEVELOPMENT_BECOME_ANY_ACCOUNT</code>.  If set
the "Switch Account" link is displayed next to "Sign Out".</p>
</div>
<div class="paragraph">
<p>When <code>auth.type</code> does not normally enable this URL administrators may
set this to <code>login/</code>, allowing users to begin a new web session. This value
is used as an href in the Gerrit web app, so absolute URLs like
<code><a href="https://someotherhost/login" class="bare">https://someotherhost/login</a></code> work as well.</p>
</div>
<div class="paragraph">
<p>If a ${path} parameter is included, then the Gerrit web app will substitute the
currently viewed path in the link. Be aware that this path will include
a leading slash, so a value like this might be appropriate: <code>/login${path}</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.cookiePath"></a>auth.cookiePath</dt>
<dd>
<div class="paragraph">
<p>Sets "path" attribute of the authentication cookie.</p>
</div>
<div class="paragraph">
<p>If not set, HTTP request&#8217;s path is used.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.cookieDomain"></a>auth.cookieDomain</dt>
<dd>
<div class="paragraph">
<p>Sets "domain" attribute of the authentication cookie.</p>
</div>
<div class="paragraph">
<p>If not set, HTTP request&#8217;s domain is used.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.cookieSecure"></a>auth.cookieSecure</dt>
<dd>
<div class="paragraph">
<p>Sets "secure" flag of the authentication cookie.  If true, cookies
will be transmitted only over HTTPS protocol.</p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.emailFormat"></a>auth.emailFormat</dt>
<dd>
<div class="paragraph">
<p>Optional format string to construct user email addresses out of
user login names.  Only used if <code>auth.type</code> is <code>HTTP</code>, <code>HTTP_LDAP</code>
or <code>LDAP</code>.</p>
</div>
<div class="paragraph">
<p>This value can be set to a format string, where <code>{0}</code> is replaced
with the login name.  E.g. "{0}+<a href="mailto:gerrit@example.com">gerrit@example.com</a>" with a user
login name of "foo" will produce "<a href="mailto:foo+gerrit@example.com">foo+gerrit@example.com</a>" during
the first time user "foo" registers.</p>
</div>
<div class="paragraph">
<p>If the site is using <code>HTTP_LDAP</code> or <code>LDAP</code>, using this option is
discouraged.  Setting <code>ldap.accountEmailAddress</code> and importing the
email address from the LDAP directory is generally preferred.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.contributorAgreements"></a>auth.contributorAgreements</dt>
<dd>
<div class="paragraph">
<p>Controls whether or not the contributor agreement features are
enabled for the Gerrit site.  If enabled a user must complete a
contributor agreement before they can upload changes.</p>
</div>
<div class="paragraph">
<p>If enabled, the admin must also add one or more
<a href="config-cla.html">contributor-agreement sections</a>
in project.config and create agreement files under
<code>'$site_path'/static</code>, so users can actually complete one or
more agreements.</p>
</div>
<div class="paragraph">
<p>By default this is false (no agreements are used).</p>
</div>
<div class="paragraph">
<p>To enable the actual usage of contributor agreement the project
specific config option in the <code>project.config</code> must be set:
<a href="config-project-config.html">receive.requireContributorAgreement</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.trustContainerAuth"></a>auth.trustContainerAuth</dt>
<dd>
<div class="paragraph">
<p>If true then it is the responsibility of the container hosting
Gerrit to authenticate users. In this case Gerrit will blindly trust
the container.</p>
</div>
<div class="paragraph">
<p>This parameter only affects git over http traffic. If set to false
then Gerrit will do the authentication (using Basic authentication).</p>
</div>
<div class="paragraph">
<p>By default this is set to false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.gitBasicAuthPolicy"></a>auth.gitBasicAuthPolicy</dt>
<dd>
<div class="paragraph">
<p>When <code>auth.type</code> is <code>LDAP</code>, <code>LDAP_BIND</code> or <code>OAUTH</code>, it allows using either the generated
HTTP password, the LDAP or OAUTH password, or a combination of HTTP and LDAP
authentication, to authenticate Git over HTTP and REST API requests.
The supported values are:</p>
</div>
<div class="paragraph">
<p>*<code>HTTP</code></p>
</div>
<div class="paragraph">
<p>Only the HTTP password is accepted when doing Git over HTTP and REST API requests.</p>
</div>
<div class="paragraph">
<p>*<code>LDAP</code></p>
</div>
<div class="paragraph">
<p>Only the <code>LDAP</code> password is allowed when doing Git over HTTP and REST API
requests.</p>
</div>
<div class="paragraph">
<p>*<code>OAUTH</code></p>
</div>
<div class="paragraph">
<p>Only the <code>OAUTH</code> authentication is allowed when doing Git over HTTP and REST API
requests.</p>
</div>
<div class="paragraph">
<p>*<code>HTTP_LDAP</code></p>
</div>
<div class="paragraph">
<p>The password in the request is first checked against the HTTP password and, if
it does not match, it is then validated against the <code>LDAP</code> password.</p>
</div>
<div class="paragraph">
<p>By default this is set to <code>LDAP</code> when <a href="#auth.type"><code>auth.type</code></a> is <code>LDAP</code>
and <code>OAUTH</code> when <a href="#auth.type"><code>auth.type</code></a> is <code>OAUTH</code>.
Otherwise, the default value is <code>HTTP</code>.</p>
</div>
<div class="paragraph">
<p>When gitBasicAuthPolicy is set to <code>LDAP</code> or <code>HTTP_LDAP</code> and the user
is authenticating with the LDAP username/password, the Git client config
needs to have <code>http.cookieFile</code> set to a local file, otherwise every
single call would trigger a full LDAP authentication and groups resolution
which could introduce a noticeable latency on the overall execution
and produce unwanted load to the LDAP server.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.gitOAuthProvider"></a>auth.gitOAuthProvider</dt>
<dd>
<div class="paragraph">
<p>Selects the OAuth 2 provider to authenticate git over HTTP traffic with.</p>
</div>
<div class="paragraph">
<p>In general there is no way to determine from an access token alone, which
OAuth 2 provider to address to verify that token, and the BasicAuth
scheme does not support amending such details. If multiple OAuth provider
plugins in a system offer support for git over HTTP authentication site
administrators must configure, which one to use as default provider.
In case the provider cannot be determined from a request the access token
will be sent to the default provider for verification.</p>
</div>
<div class="paragraph">
<p>The value of this parameter must be the identifier of an OAuth 2 provider
in the form <code>plugin-name:provider-name</code>. Consult the respective plugin
documentation for details.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.userNameToLowerCase"></a>auth.userNameToLowerCase</dt>
<dd>
<div class="paragraph">
<p>If set the username that is received to authenticate a git operation
is converted to lower case for looking up the user account in Gerrit.</p>
</div>
<div class="paragraph">
<p>By setting this parameter a case insensitive authentication for the
git operations can be achieved, if it is ensured that the usernames in
Gerrit (scheme <code>username</code>) are stored in lower case (e.g. if the
parameter <a href="#ldap.accountSshUserName">ldap.accountSshUserName</a> is
set to <code>${sAMAccountName.toLowerCase}</code>). It is important that for all
existing accounts this username is already in lower case. It is not
possible to convert the usernames of the existing accounts to lower
case because this would break the access to existing per-user
branches and Gerrit provides no tool to do such a conversion. Accounts
created using the REST API or the <code>create-account</code> SSH command will
be created with all lowercase characters, when this option is set.</p>
</div>
<div class="paragraph">
<p>Setting this parameter to <code>true</code> will prevent all users from login that
have a non-lower-case username.</p>
</div>
<div class="paragraph">
<p>This parameter only affects git over http and git over SSH traffic.</p>
</div>
<div class="paragraph">
<p>By default this is set to false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.enableRunAs"></a>auth.enableRunAs</dt>
<dd>
<div class="paragraph">
<p>If true HTTP REST APIs will accept the <code>X-Gerrit-RunAs</code> HTTP request
header from any users granted the <a href="access-control.html#capability_runAs">Run As</a>
capability. The header and capability permit the authenticated user
to impersonate another account.</p>
</div>
<div class="paragraph">
<p>If false the feature is disabled and cannot be re-enabled without
editing gerrit.config and restarting the server.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.allowRegisterNewEmail"></a>auth.allowRegisterNewEmail</dt>
<dd>
<div class="paragraph">
<p>Whether users are allowed to register new email addresses.</p>
</div>
<div class="paragraph">
<p>In addition for the HTTP authentication type
<a href="#auth.httpemailheader">auth.httpemailheader</a> must <strong>not</strong> be set to
enable registration of new email addresses.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.autoUpdateAccountActiveStatus"></a>auth.autoUpdateAccountActiveStatus</dt>
<dd>
<div class="paragraph">
<p>Whether to allow automatic synchronization of an account&#8217;s inactive flag upon login.
If set to true, upon login, if the authentication back-end reports the account as active,
the account&#8217;s inactive flag in the internal Gerrit database will be updated to be active.
If the authentication back-end reports the account as inactive, the account&#8217;s flag will be
updated to be inactive and the login attempt will be blocked. Users enabling this feature
should ensure that their authentication back-end is supported. Currently, only
strict 'LDAP' authentication is supported.</p>
</div>
<div class="paragraph">
<p>In addition, if this parameter is not set, or false, the corresponding scheduled
task to deactivate inactive Gerrit accounts will also be disabled. If this
parameter is set to true, users should also consider configuring the
<a href="#accountDeactivation">accountDeactivation</a> section appropriately.</p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="auth.skipFullRefEvaluationIfAllRefsAreVisible"></a>auth.skipFullRefEvaluationIfAllRefsAreVisible</dt>
<dd>
<div class="paragraph">
<p>Whether to skip the full ref visibility checks as a performance shortcut when a
user has READ permission for all refs.</p>
</div>
<div class="paragraph">
<p>The full ref filtering would filter out refs for pending edits, private changes
and auto merge commits.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cache">Section cache</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="cache.directory"></a>cache.directory</dt>
<dd>
<div class="paragraph">
<p>Path to a local directory where Gerrit can write cached entities for
future lookup.  This local disk cache is used to retain potentially
expensive to compute information across restarts.  If the location
does not exist, Gerrit will try to create it.</p>
</div>
<div class="paragraph">
<p>Technically, cached entities are persisted as a set of H2 databases
inside this directory.</p>
</div>
<div class="paragraph">
<p>If not absolute, the path is resolved relative to <code>$site_path</code>.</p>
</div>
<div class="paragraph">
<p>Default is unset, no disk cache.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.enableDiskStatMetrics"></a>cache.enableDiskStatMetrics</dt>
<dd>
<div class="paragraph">
<p>Whether to enable the computation of disk statistics of persistent caches.
This computation is expensive and requires a long time on larger installations.</p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.h2CacheSize"></a>cache.h2CacheSize</dt>
<dd>
<div class="paragraph">
<p>The size of the in-memory cache for each opened H2 cache database, in bytes.</p>
</div>
<div class="paragraph">
<p>Some caches of Gerrit are persistent and are backed by an H2 database.
H2 uses memory to cache its database content. The parameter <code>h2CacheSize</code>
allows to limit the memory used by H2 and thus prevent out-of-memory
caused by the H2 database using too much memory.</p>
</div>
<div class="paragraph">
<p>Technically the H2 cache size is configured using the CACHE_SIZE parameter in
the H2 JDBC connection URL, as described
<a href="http://www.h2database.com/html/features.html#cache_settings" class="external" target="_blank" rel="noopener">here</a></p>
</div>
<div class="paragraph">
<p>Default is unset, using up to half of the available memory.</p>
</div>
<div class="paragraph">
<p>H2 will persist this value in the database, so to unset explicitly specify 0.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.h2AutoServer"></a>cache.h2AutoServer</dt>
<dd>
<div class="paragraph">
<p>If set to true, enable H2 autoserver mode for the H2-backed persistent cache
databases.</p>
</div>
<div class="paragraph">
<p>See <a href="http://www.h2database.com/html/features.html#auto_mixed_mode" class="external" target="_blank" rel="noopener">here</a>
for detail.</p>
</div>
<div class="paragraph">
<p>Default is false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.openFiles"></a>cache.openFiles</dt>
<dd>
<div class="paragraph">
<p>The number of file descriptors to add to the limit set by the Gerrit daemon.</p>
</div>
<div class="paragraph">
<p>Persistent caches are stored on the file system and as such participate in the
file descriptors utilization. The number of file descriptors can vary depending
on the cache configuration and the specific backend used.</p>
</div>
<div class="paragraph">
<p>The additional file descriptors required by the cache should be accounted for
via this setting, so that the Gerrit daemon can adjust the ulimit accordingly.</p>
</div>
<div class="paragraph">
<p>If you increase this to a larger setting you may need to also adjust
the ulimit on file descriptors for the host JVM, as Gerrit needs
additional file descriptors available for network sockets and other
repository data manipulation.</p>
</div>
<div class="paragraph">
<p>Default is 0.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.name.maxAge"></a>cache.&lt;name&gt;.maxAge</dt>
<dd>
<div class="paragraph">
<p>Maximum age to keep an entry in the cache. Entries are removed from
the cache and refreshed from source data every maxAge interval.
Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
<li>
<p>d, day, days</p>
</li>
<li>
<p>w, week, weeks (<code>1 week</code> is treated as <code>7 days</code>)</p>
</li>
<li>
<p>mon, month, months (<code>1 month</code> is treated as <code>30 days</code>)</p>
</li>
<li>
<p>y, year, years (<code>1 year</code> is treated as <code>365 days</code>)</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If a unit suffix is not specified, <code>seconds</code> is assumed.  If 0 is
supplied, the maximum age is infinite and items are never purged
except when the cache is full.</p>
</div>
<div class="paragraph">
<p>Default is <code>0</code>, meaning store forever with no expire, except:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"adv_bases"</code>: default is <code>10 minutes</code></p>
</li>
<li>
<p><code>"ldap_groups"</code>: default is <code>1 hour</code></p>
</li>
<li>
<p><code>"web_sessions"</code>: default is <code>12 hours</code></p>
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="cache.name.memoryLimit"></a>cache.&lt;name&gt;.memoryLimit</dt>
<dd>
<div class="paragraph">
<p>The total cost of entries to retain in memory. The cost computation
varies by the cache. For most caches where the in-memory size of each
entry is relatively the same, memoryLimit is currently defined to be
the number of entries held by the cache (each entry costs 1).</p>
</div>
<div class="paragraph">
<p>For caches where the size of an entry can vary significantly between
individual entries (notably <code>"diff"</code>, <code>"diff_intraline"</code>), memoryLimit
is an approximation of the total number of bytes stored by the cache.
Larger entries that represent bigger patch sets or longer source files
will consume a bigger portion of the memoryLimit. For these caches the
memoryLimit should be set to roughly the amount of RAM (in bytes) the
administrator can dedicate to the cache.</p>
</div>
<div class="paragraph">
<p>Default is 1024 for most caches, except:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"adv_bases"</code>: default is <code>4096</code></p>
</li>
<li>
<p><code>"diff"</code>: default is <code>10m</code> (10 MiB of memory)</p>
</li>
<li>
<p><code>"diff_intraline"</code>: default is <code>10m</code> (10 MiB of memory)</p>
</li>
<li>
<p><code>"diff_summary"</code>: default is <code>10m</code> (10 MiB of memory)</p>
</li>
<li>
<p><code>"external_ids_map"</code>: default is <code>2</code> and should not be changed</p>
</li>
<li>
<p><code>"groups"</code>: default is unlimited</p>
</li>
<li>
<p><code>"groups_byname"</code>: default is unlimited</p>
</li>
<li>
<p><code>"groups_byuuid"</code>: default is unlimited</p>
</li>
<li>
<p><code>"groups_byuuid_persisted"</code>: default is <code>1g</code> (1 GiB of disk space)</p>
</li>
<li>
<p><code>"plugin_resources"</code>: default is 2m (2 MiB of memory)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If set to 0 the cache is disabled. Entries are removed immediately
after being stored by the cache. This is primarily useful for testing.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.name.expireFromMemoryAfterAccess"></a>cache.&lt;name&gt;.expireFromMemoryAfterAccess</dt>
<dd>
<div class="paragraph">
<p>Time after last access to automatically expire entries from an in-memory
cache. If 0 or not specified, entries are never expired in this manner.
Values may use unit suffixes as in <a href="#cache.name.maxAge">maxAge</a>.</p>
</div>
<div class="paragraph">
<p>This option only applies to in-memory caches; persistent cache values are
not expired in this manner, and are only pruned via
<a href="#cache.name.diskLimit">diskLimit</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.name.diskLimit"></a>cache.&lt;name&gt;.diskLimit</dt>
<dd>
<div class="paragraph">
<p>Total size in bytes of the keys and values stored on disk. Caches that
have grown bigger than this size are scanned daily at 1 AM local
server time to trim the cache. Entries are removed in least recently
accessed order until the cache fits within this limit.  Caches may
grow larger than this during the day, as the size check is only
performed once every 24 hours.</p>
</div>
<div class="paragraph">
<p>Default is 128 MiB per cache, except:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"change_notes"</code>: disk storage is disabled by default</p>
</li>
<li>
<p><code>"diff_summary"</code>: default is <code>1g</code> (1 GiB of disk space)</p>
</li>
<li>
<p><code>"external_ids_map"</code>: disk storage is disabled by default</p>
</li>
<li>
<p><code>"persisted_projects"</code>: default is <code>1g</code> (1 GiB of disk space)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If 0 or negative, disk storage for the cache is disabled.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.name.expireAfterWrite"></a>cache.&lt;name&gt;.expireAfterWrite</dt>
<dd>
<div class="paragraph">
<p>Duration after which a cached value will be evicted and not
read anymore.</p>
</div>
<div class="paragraph">
<p>Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ms, milliseconds</p>
</li>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
<div class="paragraph">
<p>Disabled by default.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a id="cache.name.refreshAfterWrite"></a>cache.&lt;name&gt;.refreshAfterWrite</dt>
<dd>
<div class="paragraph">
<p>Duration after which we asynchronously refresh the cached value.</p>
</div>
<div class="paragraph">
<p>Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ms, milliseconds</p>
</li>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
<div class="paragraph">
<p>This applies only to these caches that support refreshing:</p>
</div>
</li>
<li>
<p><code>"projects"</code>: Caching project information in-memory. Defaults to 15 minutes.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a id="cache.refreshThreadPoolSize"></a>cache.refreshThreadPoolSize</dt>
<dd>
<div class="paragraph">
<p>Number of threads that are available to refresh cached values that became
out of date. This applies only to these caches that support refreshing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"projects"</code>: Caching project information in-memory</p>
<div class="paragraph">
<p>Refreshes will only be scheduled on this executor if the values are
out of sync.
The check if they are is cheap and always happens on the thread that
inquires for a cached value.</p>
</div>
<div class="paragraph">
<p>Defaults to 2.</p>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_standard_caches"><a id="cache_names"></a>Standard Caches</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">cache <code>"accounts"</code></dt>
<dd>
<div class="paragraph">
<p>Cache entries contain important details of an active user, including
their display name, preferences, and known email addresses. Entry
information is obtained from NoteDb data in the <code>All-Users</code> repo.</p>
</div>
<div class="paragraph">
<p>If direct updates are made to <code>All-Users</code>, this cache should be flushed.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"adv_bases"</code></dt>
<dd>
<div class="paragraph">
<p>Used only for push over smart HTTP when branch level access controls
are enabled.  The cache entry contains all commits that are available
for the client to use as potential delta bases.  Push over smart HTTP
requires two HTTP requests, and this cache tries to carry state from
the first request into the second to ensure it can complete.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"default_preferences"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the server&#8217;s default general, edit and diff preferences.</p>
</div>
<div class="paragraph">
<p>Default value is 1 to hold only the most current version in-memory.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"changes"</code></dt>
<dd>
<div class="paragraph">
<p>The size of <code>memoryLimit</code> determines the number of projects for which
all changes will be cached. If the cache is set to 1024, this means all
changes for up to 1024 projects can be held in the cache.</p>
</div>
<div class="paragraph">
<p>Default value is 0 (disabled). It is disabled by default due to the fact
that change updates are not communicated between Gerrit servers. Hence
this cache should be disabled in a cluster setup using multiple primary
or multiple replica nodes.</p>
</div>
<div class="paragraph">
<p>The cache should be flushed whenever the database changes table is modified
outside of Gerrit.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"diff"</code></dt>
<dd>
<div class="paragraph">
<p>Each item caches the differences between two commits, at both the
directory and file levels.  Gerrit uses this cache to accelerate
the display of affected file names, as well as file contents.</p>
</div>
<div class="paragraph">
<p>Entries in this cache are relatively large, so memoryLimit is an
estimate in bytes of memory used. Administrators should try to target
cache.diff.memoryLimit to fit all changes users will view in a 1 or 2
day span.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"diff_intraline"</code></dt>
<dd>
<div class="paragraph">
<p>Each item caches the intraline difference of one file, when compared
between two commits. Gerrit uses this cache to accelerate display of
intraline differences when viewing a file.</p>
</div>
<div class="paragraph">
<p>Entries in this cache are relatively large, so memoryLimit is an
estimate in bytes of memory used. Administrators should try to target
cache.diff.memoryLimit to fit all files users will view in a 1 or 2
day span.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"diff_summary"</code></dt>
<dd>
<div class="paragraph">
<p>Each item caches list of file paths which are different between two
commits. Gerrit uses this cache to accelerate computing of the list
of paths of changed files.</p>
</div>
<div class="paragraph">
<p>Ideally, disk limit of this cache is large enough to cover all changes.
This should significantly speed up change reindexing, especially
full offline reindexing.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"external_ids_map"</code></dt>
<dd>
<div class="paragraph">
<p>A singleton cache whose sole entry is a map of the parsed representation
of <a href="config-accounts.html#external-ids">all current external IDs</a>. The
cache may temporarily contain 2 entries, but the second one is promptly
expired.</p>
</div>
<div class="paragraph">
<p>It is not recommended to change the in-memory attributes of this cache
away from the defaults. The cache may be persisted by setting
<code>diskLimit</code>, which is only recommended if cold start performance is
problematic.</p>
</div>
<div class="paragraph">
<p><code>external_ids_map</code> supports computing the new cache value based on a
previously cached state. This applies modifications based on the Git
diff and is almost always faster.
<code>cache.external_ids_map.enablePartialReloads</code> turns this behavior on
or off. The default is <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"git_tags"</code></dt>
<dd>
<div class="paragraph">
<p>If branch or reference level READ access controls are used, this
cache tracks which tags are reachable from the branch tips of a
repository.  Gerrit uses this information to determine the set
of tags that a client may access, derived from which tags are
part of the history of a visible branch.</p>
</div>
<div class="paragraph">
<p>The cache is persisted to disk across server restarts as it can
be expensive to compute (60 or more seconds for a large history
like the Linux kernel repository).</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"comment_context"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the context lines of comments, which are the lines of the source file
highlighted by the user when the comment was written.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the basic group information of internal groups by group ID,
including the group owner, name, and description.</p>
</div>
<div class="paragraph">
<p>For this cache it is important to configure a size that is larger than
the number of internal Gerrit groups, otherwise general Gerrit
performance may be poor. This is why by default this cache is
unlimited.</p>
</div>
<div class="paragraph">
<p>External group membership obtained from LDAP is cached under
<code>"ldap_groups"</code>.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups_byname"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the basic group information of internal groups by group name,
including the group owner, name, and description.</p>
</div>
<div class="paragraph">
<p>For this cache it is important to configure a size that is larger than
the number of internal Gerrit groups, otherwise general Gerrit
performance may be poor. This is why by default this cache is
unlimited.</p>
</div>
<div class="paragraph">
<p>External group membership obtained from LDAP is cached under
<code>"ldap_groups"</code>.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups_byuuid"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the basic group information of internal groups by group UUID,
including the group owner, name, and description.</p>
</div>
<div class="paragraph">
<p>For this cache it is important to configure a size that is larger than
the number of internal Gerrit groups, otherwise general Gerrit
performance may be poor. This is why by default this cache is
unlimited.</p>
</div>
<div class="paragraph">
<p>External group membership obtained from LDAP is cached under
<code>"ldap_groups"</code>.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups_byuuid_persisted"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the basic group information of internal groups by group UUID,
including the group owner, name, and description.</p>
</div>
<div class="paragraph">
<p>This is the persisted version of <code>groups_byuuid</code> cache. The intention of this
cache is to have an in-memory size of 0.</p>
</div>
<div class="paragraph">
<p>External group membership obtained from LDAP is cached under
<code>"ldap_groups"</code>.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups_bymember"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the groups which contain a specific member (account). If direct
updates are made to the <code>account_group_members</code> table, this cache should
be flushed.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups_bysubgroups"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the parent groups of a subgroup.  If direct updates are made
to the <code>account_group_includes</code> table, this cache should be flushed.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups_external"</code></dt>
<dd>
<div class="paragraph">
<p>Caches all the external groups available to Gerrit. The cache holds a
single entry which maps to the latest available of all external groups'
UUIDs. This cache uses "groups_external_persisted" to load its value.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"groups_external_persisted"</code></dt>
<dd>
<div class="paragraph">
<p>Caches all external groups available to Gerrit at some point in history.
The cache key is representation of a specific groups state in NoteDb and
the value is the list of all external groups.
The cache is persisted to enhance performance.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"ldap_groups"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the LDAP groups that a user belongs to, if LDAP has been
configured on this server.  This cache should be configured with a
low maxAge setting, to ensure LDAP modifications are picked up in
a timely fashion.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"ldap_groups_byinclude"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the hierarchical structure of LDAP groups.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"ldap_usernames"</code></dt>
<dd>
<div class="paragraph">
<p>Caches a mapping of LDAP username to Gerrit account identity.  The
cache automatically updates when a user first creates their account
within Gerrit, so the cache expire time is largely irrelevant.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"permission_sort"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the order in which access control sections must be applied to a
reference.  Sorting the sections can be expensive when regular
expressions are used, so this cache remembers the ordering for
each branch.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"plugin_resources"</code></dt>
<dd>
<div class="paragraph">
<p>Caches formatted plugin resources, such as plugin documentation that
has been converted from Markdown to HTML. The memoryLimit refers to
the bytes of memory dedicated to storing the documentation.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"persisted_projects"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the project description records, from the <code>refs/meta/config</code>
branch of each project. This is the persisted variant of the
<code>projects</code> cache. The intention is for this cache to have an in-memory
size of 0.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"projects"</code></dt>
<dd>
<div class="paragraph">
<p>Caches the project description records, from the <code>refs/meta/config</code>
branch of each project. If a project record is updated or deleted, this
cache should be flushed.  Newly inserted projects do not require
a cache flush, as they will be read upon first reference.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"prolog_rules"</code></dt>
<dd>
<div class="paragraph">
<p>Caches parsed <code>rules.pl</code> contents for each project. This cache uses the same
size as the <code>projects</code> cache, and cannot be configured independently.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"pure_revert"</code></dt>
<dd>
<div class="paragraph">
<p>Result of checking if one change or commit is a pure/clean revert of
another.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"sshkeys"</code></dt>
<dd>
<div class="paragraph">
<p>Caches unpacked versions of user SSH keys, so the internal SSH daemon
can match against them during authentication.  The unit of storage
is per-user, so 1024 items translates to 1024 unique user accounts.
As each individual user account may configure multiple SSH keys,
the total number of keys may be larger than the item count.</p>
</div>
</dd>
<dt class="hdlist1">cache <code>"web_sessions"</code></dt>
<dd>
<div class="paragraph">
<p>Tracks the live user sessions coming in over HTTP.  Flushing this
cache would cause all users to be signed out immediately, forcing
them to sign-in again.  To avoid breaking active users, this cache
is not flushed automatically by <code>gerrit flush-caches --all</code>, but
instead must be explicitly requested.</p>
</div>
<div class="paragraph">
<p>If no disk cache is configured (or <code>cache.web_sessions.diskLimit</code>
is set to 0) a server restart will force all users to sign-out,
and need to sign-in again after the restart, as the cache was
unable to persist the session information.  Enabling a disk cache
is strongly recommended.</p>
</div>
<div class="paragraph">
<p>Session storage is relatively inexpensive. The average entry in
this cache is approximately 346 bytes.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>See also <a href="cmd-flush-caches.html">gerrit flush-caches</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cache_options"><a id="cache_options"></a>Cache Options</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="cache.diff.timeout"></a>cache.diff.timeout</dt>
<dd>
<div class="paragraph">
<p>Maximum number of milliseconds to wait for diff data before giving up and
falling back on a simpler diff algorithm that will not be able to break down
modified regions into smaller ones. This is a work around for an infinite loop
bug in the default difference algorithm implementation.</p>
</div>
<div class="paragraph">
<p>Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ms, milliseconds</p>
</li>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If a unit suffix is not specified, <code>milliseconds</code> is assumed.</p>
</div>
<div class="paragraph">
<p>Default is 5 seconds.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="cache.diff_intraline.timeout"></a>cache.diff_intraline.timeout</dt>
<dd>
<div class="paragraph">
<p>Maximum number of milliseconds to wait for intraline difference data
before giving up and disabling it for a particular file pair.  This is
a work around for an infinite loop bug in the intraline difference
implementation.</p>
</div>
<div class="paragraph">
<p>If computation takes longer than the timeout, the worker thread is
terminated, an error message is shown, and no intraline difference is
displayed for the file pair.</p>
</div>
<div class="paragraph">
<p>Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ms, milliseconds</p>
</li>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If a unit suffix is not specified, <code>milliseconds</code> is assumed.</p>
</div>
<div class="paragraph">
<p>Default is 5 seconds.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="cache.diff_intraline.enabled"></a>cache.diff_intraline.enabled</dt>
<dd>
<div class="paragraph">
<p>Boolean to enable or disable the computation of intraline differences
when populating a diff cache entry.  This flag is provided primarily
as a backdoor to disable the intraline difference feature if
necessary.  To maintain backwards compatibility with prior versions,
this setting will fallback to <code>cache.diff.intraline</code> if not set in the
configuration.</p>
</div>
<div class="paragraph">
<p>Default is true, enabled.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.projects.loadOnStartup"></a>cache.projects.loadOnStartup</dt>
<dd>
<div class="paragraph">
<p>If the project cache should be loaded during server startup.</p>
</div>
<div class="paragraph">
<p>The cache is loaded concurrently. Admins should ensure that the cache
size set under <a href="#cache.name.memoryLimit">cache.projects.memoryLimit</a>
is not smaller than the number of repos.</p>
</div>
<div class="paragraph">
<p>Default is false, disabled.</p>
</div>
</dd>
<dt class="hdlist1"><a id="cache.projects.loadThreads"></a>cache.projects.loadThreads</dt>
<dd>
<div class="paragraph">
<p>Only relevant if <a href="#cache.projects.loadOnStartup">cache.projects.loadOnStartup</a>
is true.</p>
</div>
<div class="paragraph">
<p>The number of threads to allocate for loading the cache at startup. These
threads will die out after the cache is loaded.</p>
</div>
<div class="paragraph">
<p>Default is the number of CPUs.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="capability">Section capability</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="capability.administrateServer"></a>capability.administrateServer</dt>
<dd>
<div class="paragraph">
<p>Names of groups of users that are allowed to exercise the
<code>administrateServer</code> capability, in addition to those listed in
All-Projects. Configuring this option can be a useful fail-safe
to recover a server in the event an administrator removed all
groups from the <code>administrateServer</code> capability, or to ensure that
specific groups always have administration capabilities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[capability]
  administrateServer = group Fail Safe Admins</pre>
</div>
</div>
<div class="paragraph">
<p>The configuration file uses group names, not UUIDs.  If a group is
renamed the gerrit.config file must be updated to reflect the new
name. If a group cannot be found for the configured name a warning
is logged and the server will continue normal startup.</p>
</div>
<div class="paragraph">
<p>If not specified (default), only the groups listed by All-Projects
may use the <code>administrateServer</code> capability.</p>
</div>
</dd>
<dt class="hdlist1"><a id="capability.makeFirstUserAdmin"></a>capability.makeFirstUserAdmin</dt>
<dd>
<div class="paragraph">
<p>Whether the first user that logs in to the Gerrit server should
automatically be added to the administrator group and hence get the
<code>administrateServer</code> capability assigned. This is useful to bootstrap
the authentication database.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="change">Section change</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="change.allowBlame"></a>change.allowBlame</dt>
<dd>
<div class="paragraph">
<p>Allow blame on side by side diff. If set to false, blame cannot be used.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.cacheAutomerge"></a>change.cacheAutomerge</dt>
<dd>
<div class="paragraph">
<p>When reviewing merge commits, the left-hand side shows the output of the
result of JGit&#8217;s automatic merge algorithm. This option controls whether
this output is cached in the change repository, or if only the diff is
cached in the persistent <code>diff</code> cache.</p>
</div>
<div class="paragraph">
<p>If true, automerge results are stored in the repository under
<code>refs/cache-automerge/*</code>; the results of diffing the change against its
automerge base are stored in the diff cache. If false, no extra data is
stored in the repository, only the diff cache. This can result in slight
performance improvements by reducing the number of refs in the repo.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.commentSizeLimit"></a>change.commentSizeLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum allowed size in characters of a regular (non-robot) comment. Comments
which exceed this size will be rejected. Size computation is approximate and may
be off by roughly 1%. Common unit suffixes of 'k', 'm', or 'g' are supported.
The value must be positive.</p>
</div>
<div class="paragraph">
<p>The default limit is 16kiB.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.cumulativeCommentSizeLimit"></a>change.cumulativeCommentSizeLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum allowed size in characters of all comments (including robot comments)
and change messages. Size computation is approximate and may be off by roughly
1%. Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
<div class="paragraph">
<p>The default limit is 3MiB.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.disablePrivateChanges"></a>change.disablePrivateChanges</dt>
<dd>
<div class="paragraph">
<p>If set to true, users are not allowed to create private changes.</p>
</div>
<div class="paragraph">
<p>The default is false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.enableAttentionSet"></a>change.enableAttentionSet</dt>
<dd>
<div class="paragraph">
<p>If set to true, then all UI features for using and interacting with the
attention set are enabled.</p>
</div>
<div class="paragraph">
<p>The default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.enableAssignee"></a>change.enableAssignee</dt>
<dd>
<div class="paragraph">
<p>If set to true, then all UI features for using and interacting with the
assignee are enabled.</p>
</div>
<div class="paragraph">
<p>The default is false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.maxComments"></a>change.maxComments</dt>
<dd>
<div class="paragraph">
<p>Maximum number of comments (regular plus robot) allowed per change. Additional
comments are rejected.</p>
</div>
<div class="paragraph">
<p>By default 5,000.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.maxFiles"></a>change.maxFiles</dt>
<dd>
<div class="paragraph">
<p>Maximum number of files allowed per change. Larger changes are rejected and must
be split up.</p>
</div>
<div class="paragraph">
<p>By default 100,000.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.maxPatchSets"></a>change.maxPatchSets</dt>
<dd>
<div class="paragraph">
<p>Maximum number of patch sets allowed per change. If this is insufficient,
recreate the change with a new Change-Id, then abandon the old change.</p>
</div>
<div class="paragraph">
<p>By default 1,500.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.maxUpdates"></a>change.maxUpdates</dt>
<dd>
<div class="paragraph">
<p>Maximum number of updates to a change. Counts only updates to the main NoteDb
meta ref; draft comments, robot comments, stars, etc. do not count towards the
total.</p>
</div>
<div class="paragraph">
<p>Many NoteDb operations require walking the entire change meta ref and loading
its contents into memory, so changes with arbitrarily many updates may cause
high CPU usage, memory pressure, persistent cache bloat, and other problems.</p>
</div>
<div class="paragraph">
<p>The following operations are allowed even when a change is at the limit:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Abandon</p>
</li>
<li>
<p>Submit</p>
</li>
<li>
<p>Submit by push with <code>%submit</code></p>
</li>
<li>
<p>Auto-close by pushing directly to the branch</p>
</li>
<li>
<p>Fix with <a href="rest-api-changes.html#fix-input"><code>expect_merged_as</code></a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>By default 1000.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="change.mergeabilityComputationBehavior"></a>change.mergeabilityComputationBehavior</dt>
<dd>
<div class="paragraph">
<p>This setting determines when Gerrit computes if a change is mergeable or not.
This computation is expensive, especially when the repository is large or when
there are many open changes.</p>
</div>
<div class="paragraph">
<p>This config can have the following states:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>API_REF_UPDATED_AND_CHANGE_REINDEX</code>: Gerrit indexes <code>mergeability</code> enabling
the <code>is:mergeable</code> predicate in change search and allowing fast retrieval of
this bit in query responses. Gerrit will always serve <code>mergeable</code> in
<a href="rest-api-changes.html#change-info">ChangeInfo</a> objects.
Gerrit will reindex all open changes when the target ref advances (expensive).</p>
</li>
<li>
<p><code>REF_UPDATED_AND_CHANGE_REINDEX</code>: Gerrit indexes <code>mergeability</code> enabling the
<code>is:mergeable</code> predicate in change search and allowing fast retrieval of this
bit in query responses. Gerrit will never serve <code>mergeable</code> in
<a href="rest-api-changes.html#change-info">ChangeInfo</a>
objects. This state can be a final state for instances that only want to
optimize the read path, but not the write path for speed or serve as an
intermediary step for instances that want to optimize both and need to migrate
callers of their API.
Gerrit will reindex all open changes when the target ref advances (expensive).</p>
</li>
<li>
<p><code>NEVER</code>: Gerrit does not index <code>mergeable</code>, so <code>is:mergeable</code> is disabled as
query operator. Gerrit does not serve <code>mergeable</code> in
<a href="rest-api-changes.html#change-info">ChangeInfo</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Default is <code>NEVER</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="change.move"></a>change.move</dt>
<dd>
<div class="paragraph">
<p>Whether the <a href="rest-api-changes.html#move-change">Move Change</a> REST
endpoint is enabled.</p>
</div>
<div class="paragraph">
<p>The move change functionality has some corner cases with undesired side
effects. Hence administrators may decide to disable this functionality.
In particular, if a change that has dependencies on other changes is
moved to a new branch, and the moved change gets submitted to the new
branch, the changes on which the change depends are silently merged
into the new branch, although these changes have not been moved to that
branch (see details in
<a href="https://bugs.chromium.org/p/gerrit/issues/detail?id=9877">issue
9877</a>).</p>
</div>
<div class="paragraph">
<p>By default true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.replyLabel"></a>change.replyLabel</dt>
<dd>
<div class="paragraph">
<p>Label name for the reply button. In the user interface an ellipsis (…)
is appended.</p>
</div>
<div class="paragraph">
<p>Default is "Reply". In the user interface it becomes "Reply…".</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.replyTooltip"></a>change.replyTooltip</dt>
<dd>
<div class="paragraph">
<p>Tooltip for the reply button. In the user interface a note about the
keyboard shortcut is appended.</p>
</div>
<div class="paragraph">
<p>Default is "Reply and score". In the user interface it becomes "Reply
and score (Shortcut: a)".</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.robotCommentSizeLimit"></a>change.robotCommentSizeLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum allowed size in characters of a robot comment. Robot comments which
exceed this size will be rejected on addition. Size computation is approximate
and may be off by roughly 1%. Common unit suffixes of 'k', 'm', or 'g' are
supported. Zero or negative values allow robot comments of unlimited size.</p>
</div>
<div class="paragraph">
<p>The default limit is 1MiB.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.sendNewPatchsetEmails"></a>change.sendNewPatchsetEmails</dt>
<dd>
<div class="paragraph">
<p>When false, emails will not be sent to owners, reviewers, and cc for
creating a new patchset unless they are project watchers or have starred
the change.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.showAssigneeInChangesTable"></a>change.showAssigneeInChangesTable</dt>
<dd>
<div class="paragraph">
<p>Show assignee field in changes table. If set to false, assignees will
not be visible in changes table.</p>
</div>
<div class="paragraph">
<p>Default is false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.strictLabels"></a>change.strictLabels</dt>
<dd>
<div class="paragraph">
<p>Reject invalid label votes: invalid labels or invalid values. This
configuration option is provided for backwards compatibility and may
be removed in future gerrit versions.</p>
</div>
<div class="paragraph">
<p>Default is false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.submitLabel"></a>change.submitLabel</dt>
<dd>
<div class="paragraph">
<p>Label name for the submit button.</p>
</div>
<div class="paragraph">
<p>Default is "Submit".</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.submitLabelWithParents"></a>change.submitLabelWithParents</dt>
<dd>
<div class="paragraph">
<p>Label name for the submit button if the change has parents which will
be submitted together with this change.</p>
</div>
<div class="paragraph">
<p>Default is "Submit including parents".</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.submitTooltip"></a>change.submitTooltip</dt>
<dd>
<div class="paragraph">
<p>Tooltip for the submit button.  Variables available for replacement
include <code>${patchSet}</code> for the current patch set number (1, 2, 3),
<code>${branch}</code> for the branch name ("master") and <code>${commit}</code> for the
abbreviated commit SHA-1 (<code>c9c0edb</code>).</p>
</div>
<div class="paragraph">
<p>Default is "Submit patch set ${patchSet} into ${branch}".</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.submitTooltipAncestors"></a>change.submitTooltipAncestors</dt>
<dd>
<div class="paragraph">
<p>Tooltip for the submit button if there are ancestors which would
also be submitted by submitting the change. Additionally to the variables
as in <a href="#change.submitTooltip">change.submitTooltip</a>, there is the
variable <code>${submitSize}</code> indicating the number of changes which are
submitted.</p>
</div>
<div class="paragraph">
<p>Default is "Submit all ${topicSize} changes of the same topic (${submitSize}
changes including ancestors and other changes related by topic)".</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.submitTopicLabel"></a>change.submitTopicLabel</dt>
<dd>
<div class="paragraph">
<p>If <code>change.submitWholeTopic</code> is set and a change has a topic,
the label name for the submit button is given here instead of
the configuration <code>change.submitLabel</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to "Submit whole topic"</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.submitTopicTooltip"></a>change.submitTopicTooltip</dt>
<dd>
<div class="paragraph">
<p>If <code>change.submitWholeTopic</code> is configured to true and a change has a
topic, this configuration determines the tooltip for the submit button
instead of <code>change.submitTooltip</code>. The variable <code>${topicSize}</code> is available
for the number of changes in the same topic to be submitted. The number of
all changes to be submitted is in the variable <code>${submitSize}</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to "Submit all ${topicSize} changes of the same topic
(${submitSize} changes including ancestors and other
changes related by topic)".</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.submitWholeTopic"></a>change.submitWholeTopic</dt>
<dd>
<div class="paragraph">
<p>Determines if the submit button submits the whole topic instead of
just the current change.</p>
</div>
<div class="paragraph">
<p>Default is false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="change.updateDelay"></a>change.updateDelay</dt>
<dd>
<div class="paragraph">
<p>How often in seconds the web interface should poll for updates to the
currently open change.  The poller relies on the client&#8217;s browser
cache to use If-Modified-Since and respect <code>304 Not Modified</code> HTTP
responses.  This allows for fast polls, often under 8 milliseconds.</p>
</div>
<div class="paragraph">
<p>With a configured 30 second delay a server with 4900 active users will
typically need to dedicate 1 CPU to the update check.  4900 users
divided by an average delay of 30 seconds is 163 requests arriving per
second.  If requests are served at \~6 ms response time, 1 CPU is
necessary to keep up with the update request traffic.  On a smaller
user base of 500 active users, the default 30 second delay is only 17
requests per second and requires ~10% CPU.</p>
</div>
<div class="paragraph">
<p>If 0 the update polling is disabled.</p>
</div>
<div class="paragraph">
<p>Default is 5 minutes.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="changeCleanup">Section changeCleanup</h3>
<div class="paragraph">
<p>This section allows to configure change cleanups and schedules them to
run periodically.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="changeCleanup.abandonAfter"></a>changeCleanup.abandonAfter</dt>
<dd>
<div class="paragraph">
<p>Period of inactivity after which open changes should be abandoned
automatically.</p>
</div>
<div class="paragraph">
<p>By default <code>0</code>, never abandon open changes.</p>
</div>
<div class="paragraph">
<p>[WARNING] Auto-Abandoning changes may confuse/annoy users. When
enabling this, make sure to choose a reasonably large grace period and
inform users in advance.</p>
</div>
<div class="paragraph">
<p>The following suffixes are supported to define the time unit:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>d, day, days</code></p>
</li>
<li>
<p><code>w, week, weeks</code> (<code>1 week</code> is treated as <code>7 days</code>)</p>
</li>
<li>
<p><code>mon, month, months</code> (<code>1 month</code> is treated as <code>30 days</code>)</p>
</li>
<li>
<p><code>y, year, years</code> (<code>1 year</code> is treated as <code>365 days</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a id="changeCleanup.abandonIfMergeable"></a>changeCleanup.abandonIfMergeable</dt>
<dd>
<div class="paragraph">
<p>Whether changes which are mergeable should be auto-abandoned. When set
to <code>false</code>, <code>-is:mergeable</code> is appended to the query used to find
the changes to auto-abandon.</p>
</div>
<div class="paragraph">
<p>By default <code>true</code>, meaning mergeable changes are auto-abandoned.</p>
</div>
<div class="paragraph">
<p>If
<a href="#change.mergeabilityComputationBehavior"><code>change.mergeabilityComputationBehavior</code></a>
is set to <code>NEVER</code>, setting this option to <code>false</code> has no effect and it behaves
as though it were set to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="changeCleanup.cleanupAccountPatchReview"></a>changeCleanup.cleanupAccountPatchReview</dt>
<dd>
<div class="paragraph">
<p>Whether accountPatchReview data should be also removed when change
gets auto-abandoned.</p>
</div>
<div class="paragraph">
<p>By default <code>false</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="changeCleanup.abandonMessage"></a>changeCleanup.abandonMessage</dt>
<dd>
<div class="paragraph">
<p>Change message that should be posted when a change is abandoned.</p>
</div>
<div class="paragraph">
<p>'${URL}' can be used as a placeholder for the Gerrit web URL.</p>
</div>
<div class="paragraph">
<p>By default "Auto-Abandoned due to inactivity, see
${URL}Documentation/user-change-cleanup.html#auto-abandon\n\n
If this change is still wanted it should be restored.".</p>
</div>
</dd>
<dt class="hdlist1"><a id="changeCleanup.startTime"></a>changeCleanup.startTime</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-startTime">start time</a> for running
change cleanups.</p>
</div>
</dd>
<dt class="hdlist1"><a id="changeCleanup.interval"></a>changeCleanup.interval</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-interval">interval</a> for running
change cleanups.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a href="#schedule-configuration-examples">Schedule examples</a> can be found
in the <a href="#schedule-configuration">Schedule Configuration</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="commentlink">Section commentlink</h3>
<div class="paragraph">
<p>Comment links are find/replace strings applied to change descriptions,
patch comments, in-line code comments and approval category value descriptions
to turn set strings into hyperlinks.  One common use is for linking to
bug-tracking systems.</p>
</div>
<div class="paragraph">
<p>In the following example configuration the 'changeid' comment link
will match typical Gerrit Change-Id values and create a hyperlink
to changes which reference it.  The second configuration 'bugzilla'
will hyperlink terms such as 'bug 42' to an external bug tracker,
supplying the argument record number '42' for display.  The third
configuration 'tracker' uses raw HTML to more precisely control
how the replacement is displayed to the user.</p>
</div>
<div class="paragraph">
<p>commentlinks supports <a href="#reloadConfig">configuration reloads</a>. Though a
<a href="cmd-flush-caches.html">flush-caches</a> of "projects" is needed for the
commentlinks to be immediately available in the UI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[commentlink "changeid"]
  match = (I[0-9a-f]{8,40})
  link = "#/q/$1"

[commentlink "bugzilla"]
  match = "(bug\\s+#?)(\\d+)"
  link = http://bugs.example.com/show_bug.cgi?id=$2

[commentlink "tracker"]
  match = ([Bb]ug:\\s+)(\\d+)
  html = $1&lt;a href=\"http://trak.example.com/$2\"&gt;$2&lt;/a&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Comment links can also be specified in <code>project.config</code> and sections in
children override those in parents. The only restriction is that to
avoid injecting arbitrary user-supplied HTML in the page, comment links
defined in <code>project.config</code> may only supply <code>link</code>, not <code>html</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="commentlink.name.match"></a>commentlink.&lt;name&gt;.match</dt>
<dd>
<div class="paragraph">
<p>A JavaScript regular expression to match positions to be replaced
with a hyperlink.  Subexpressions of the matched string can be
stored using groups and accessed with <code>$'n'</code> syntax, where 'n'
is the group number, starting from 1.</p>
</div>
<div class="paragraph">
<p>The configuration file parser eats one level of backslashes, so the
character class <code>\s</code> requires <code>\\s</code> in the configuration file.  The
parser also terminates the line at the first <code>#</code>, so a match
expression containing # must be wrapped in double quotes.</p>
</div>
<div class="paragraph">
<p>To match case insensitive strings, a character class with both the
upper and lower case character for each position must be used.  For
example, to match the string <code>bug</code> in a case insensitive way the match
pattern <code>[bB][uU][gG]</code> needs to be used.</p>
</div>
<div class="paragraph">
<p>The commentlink.name.match regular expressions are applied to the raw,
unformatted and unescaped text form. Regex matching against HTML is not
supported. Comment link patterns that are written in this style should
be updated to match text formats.</p>
</div>
<div class="paragraph">
<p>A common pattern to match is <code>bug\\s+(\\d+)</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="commentlink.name.link"></a>commentlink.&lt;name&gt;.link</dt>
<dd>
<div class="paragraph">
<p>The URL to direct the user to whenever the regular expression is
matched.  Groups in the match expression may be accessed as <code>$'n'</code>.</p>
</div>
<div class="paragraph">
<p>The link property is used only when the html property is not present.</p>
</div>
</dd>
<dt class="hdlist1"><a id="commentlink.name.html"></a>commentlink.&lt;name&gt;.html</dt>
<dd>
<div class="paragraph">
<p>HTML to replace the entire matched string with.  If present,
this property overrides the link property above.  Groups in the
match expression may be accessed as <code>$'n'</code>.</p>
</div>
<div class="paragraph">
<p>The configuration file eats double quotes, so escaping them as
<code>\"</code> is necessary to protect them from the parser.</p>
</div>
</dd>
<dt class="hdlist1"><a id="commentlink.name.enabled"></a>commentlink.&lt;name&gt;.enabled</dt>
<dd>
<div class="paragraph">
<p>Whether the comment link is enabled. A child project may override a
section in a parent or the site-wide config that is disabled by
specifying <code>enabled = true</code>.</p>
</div>
<div class="paragraph">
<p>Disabling sections in <code>gerrit.config</code> can be used by site administrators
to create a library of comment links with <code>html</code> set that are not
user-supplied and thus can be verified to be XSS-free, but are only
enabled for a subset of projects.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
<div class="paragraph">
<p>Note that the names and contents of disabled sections are visible even
to anonymous users via the
<a href="rest-api-projects.html#get-config">REST API</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="container">Section container</h3>
<div class="paragraph">
<p>These settings are applied only if Gerrit is started as the container
process through Gerrit&#8217;s 'gerrit.sh' rc.d compatible wrapper script.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="container.heapLimit"></a>container.heapLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum heap size of the Java process running Gerrit, in bytes.
This property is translated into the '-Xmx' flag for the JVM.</p>
</div>
<div class="paragraph">
<p>Default is platform and JVM specific.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.javaHome"></a>container.javaHome</dt>
<dd>
<div class="paragraph">
<p>Path of the JRE/JDK installation to run Gerrit with.  If not set, the
Gerrit startup script will attempt to search your system and guess
a suitable JRE.  Overrides the environment variable 'JAVA_HOME'.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.javaOptions"></a>container.javaOptions</dt>
<dd>
<div class="paragraph">
<p>Additional options to pass along to the Java runtime. May be specified
multiple times to configure multiple values. If multiple values are
configured, they are passed in order on the command line, separated by
spaces.  These options are appended onto 'JAVA_OPTIONS'.</p>
</div>
<div class="paragraph">
<p>For example, it is possible to overwrite Gerrit&#8217;s default log4j
configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  javaOptions = -Dlog4j.configuration=file:///home/gerrit/site/etc/log4j.properties</pre>
</div>
</div>
<div class="paragraph">
<p>Gerrit built-in loggers are then ignored: error logger (<code>error_log</code> file),
<a href="#httpd.requestLog">httpd.requestLog</a> and
<a href="#sshd.requestLog">sshd.requestLog</a>. The
<a href="#log.jsonLogging">log.jsonLogging</a> and
<a href="#log.textLogging">log.textLogging</a> options are also ignored.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.daemonOpt"></a>container.daemonOpt</dt>
<dd>
<div class="paragraph">
<p>Additional options to pass to the daemon (e.g. '--enable-httpd'). If
multiple values are configured, they are passed in that order to the command
line, separated by spaces.</p>
</div>
<div class="paragraph">
<p>Execute <code>java -jar gerrit.war daemon --help</code> to see all possible
options.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.replica"></a>container.replica</dt>
<dd>
<div class="paragraph">
<p>Used on Gerrit replica installations. If set to true the Gerrit JVM is
called with the '--replica' switch, enabling replica mode. If no value is
set (or any other value), Gerrit defaults to primary mode enabling write
operations.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.slave"></a>container.slave</dt>
<dd>
<div class="paragraph">
<p>Backward compatibility for <a href="#container.replica"><code>container.replica</code></a>
config setting.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.startupTimeout"></a>container.startupTimeout</dt>
<dd>
<div class="paragraph">
<p>The maximum time (in seconds) to wait for a gerrit.sh start command
to run a new Gerrit daemon successfully.  If not set, defaults to
90 seconds.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.user"></a>container.user</dt>
<dd>
<div class="paragraph">
<p>Login name (or UID) of the operating system user the Gerrit JVM
will execute as.  If not set, defaults to the user who launched
the 'gerrit.sh' wrapper script.</p>
</div>
</dd>
<dt class="hdlist1"><a id="container.war"></a>container.war</dt>
<dd>
<div class="paragraph">
<p>Path of the JAR file to start daemon execution with.  This should
be the path of the local 'gerrit.war' archive.  Overrides the
environment variable 'GERRIT_WAR'.</p>
</div>
<div class="paragraph">
<p>If not set, defaults to '$site_path/bin/gerrit.war', or to
'$HOME/gerrit.war'.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="core">Section core</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <a href="#jgitConfig">etc/jgit.config</a> file supports configuration of all JGit
options.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="core.packedGitWindowSize"></a>core.packedGitWindowSize</dt>
<dd>
<div class="paragraph">
<p>Number of bytes of a pack file to load into memory in a single
read operation.  This is the "page size" of the JGit buffer cache,
used for all pack access operations.  All disk IO occurs as single
window reads.  Setting this too large may cause the process to load
more data than is required; setting this too small may increase
the frequency of <code>read()</code> system calls.</p>
</div>
<div class="paragraph">
<p>Default on JGit is 8 KiB on all platforms.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.packedGitLimit"></a>core.packedGitLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum number of bytes to load and cache in memory from pack files.
If JGit needs to access more than this many bytes it will unload less
frequently used windows to reclaim memory space within the process.
As this buffer must be shared with the rest of the JVM heap, it
should be a fraction of the total memory available.</p>
</div>
<div class="paragraph">
<p>Default on JGit is 10 MiB on all platforms.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.packedGitUseStrongRefs"></a>core.packedGitUseStrongRefs</dt>
<dd>
<div class="paragraph">
<p>Set to <code>true</code> in order to use strong references to reference packfile
pages cached in the WindowCache. Otherwise SoftReferences are used.
If this option is set to <code>false</code>, the Java garbage collector will
flush the WindowCache to free memory if the used heap comes close to
the maximum heap size. This has the advantage that it can quickly
reclaim memory which was used by the WindowCache but comes at the
price that the previously cached pack file content needs to be again
copied from the file system cache to the Gerrit process.
Setting this option to <code>true</code> prevents flushing the WindowCache
which provides more predictable performance.</p>
</div>
<div class="paragraph">
<p>Default is <code>false</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.deltaBaseCaseLimit"></a>core.deltaBaseCacheLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum number of bytes to reserve for caching base objects
that multiple deltafied objects reference.  By storing the entire
decompressed base object in a cache Git is able to avoid unpacking
and decompressing frequently used base objects multiple times.</p>
</div>
<div class="paragraph">
<p>Default on JGit is 10 MiB on all platforms.  You probably do not
need to adjust this value.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.packedGitOpenFiles"></a>core.packedGitOpenFiles</dt>
<dd>
<div class="paragraph">
<p>Maximum number of pack files to have open at once.  A pack file
must be opened in order for any of its data to be available in
a cached window.</p>
</div>
<div class="paragraph">
<p>If you increase this to a larger setting you may need to also adjust
the ulimit on file descriptors for the host JVM, as Gerrit needs
additional file descriptors available for network sockets and other
repository data manipulation.</p>
</div>
<div class="paragraph">
<p>Default on JGit is 128 file descriptors on all platforms.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.streamFileThreshold"></a>core.streamFileThreshold</dt>
<dd>
<div class="paragraph">
<p>Largest object size, in bytes, that JGit will allocate as a
contiguous byte array.  Any file revision larger than this threshold
will have to be streamed, typically requiring the use of temporary
files under '$GIT_DIR/objects' to implement pseudo-random access
during delta decompression.</p>
</div>
<div class="paragraph">
<p>Servers with very high traffic should set this to be larger than
the size of their common big files.  For example a server managing
the Android platform typically has to deal with ~10-12 MiB XML
files, so <code>15 m</code> would be a reasonable setting in that environment.
Setting this too high may cause the JVM to run out of heap space
when handling very big binary files, such as device firmware or
CD-ROM ISO images.</p>
</div>
<div class="paragraph">
<p>Defaults to 25% of the available JVM heap, limited to 2g.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.packedGitMmap"></a>core.packedGitMmap</dt>
<dd>
<div class="paragraph">
<p>When true, JGit will use <code>mmap()</code> rather than <code>malloc()+read()</code>
to load data from pack files.  The use of mmap can be problematic
on some JVMs as the garbage collector must deduce that a memory
mapped segment is no longer in use before a call to <code>munmap()</code>
can be made by the JVM native code.</p>
</div>
<div class="paragraph">
<p>In server applications (such as Gerrit) that need to access many
pack files, setting this to true risks artificially running out
of virtual address space, as the garbage collector cannot reclaim
unused mapped spaces fast enough.</p>
</div>
<div class="paragraph">
<p>Default on JGit is false. Although potentially slower, it yields
much more predictable behavior.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.asyncLoggingBufferSize"></a>core.asyncLoggingBufferSize</dt>
<dd>
<div class="paragraph">
<p>Size of the buffer to store logging events for asynchronous logging.
Putting a larger value can protect threads from stalling when the
AsyncAppender threads are not fast enough to consume the logging events
from the buffer. It also protects from losing log entries in this case.</p>
</div>
<div class="paragraph">
<p>Default is 64 entries.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.useRecursiveMerge"></a>core.useRecursiveMerge</dt>
<dd>
<div class="paragraph">
<p>Use JGit&#8217;s recursive merger for three-way merges. This only affects
projects that allow content merges.</p>
</div>
<div class="paragraph">
<p>As explained in this
<a href="http://codicesoftware.blogspot.com/2011/09/merge-recursive-strategy.html" class="external" target="_blank" rel="noopener">
blog</a>, the recursive merge produces better results if the two commits
that are merged have more than one common predecessor.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.repositoryCacheCleanupDelay"></a>core.repositoryCacheCleanupDelay</dt>
<dd>
<div class="paragraph">
<p>Delay between each periodic cleanup of expired repositories.</p>
</div>
<div class="paragraph">
<p>Values can be specified using standard time unit abbreviations (<code>ms</code>, <code>sec</code>,
<code>min</code>, etc.).</p>
</div>
<div class="paragraph">
<p>Set it to 0 in order to switch off cache expiration. If cache expiration is
switched off, the JVM can still evict cache entries when it is running low
on available heap memory.</p>
</div>
<div class="paragraph">
<p>Set it to -1 to automatically derive cleanup delay from
<code>core.repositoryCacheExpireAfter</code> (lowest value between 1/10 of
<code>core.repositoryCacheExpireAfter</code> and 10 minutes).</p>
</div>
<div class="paragraph">
<p>Default is -1.</p>
</div>
</dd>
<dt class="hdlist1"><a id="core.repositoryCacheExpireAfter"></a>core.repositoryCacheExpireAfter</dt>
<dd>
<div class="paragraph">
<p>Time an unused repository should expire and be evicted from the repository
cache.</p>
</div>
<div class="paragraph">
<p>Values can be specified using standard time unit abbreviations (<code>ms</code>, <code>sec</code>,
<code>min</code>, etc.).</p>
</div>
<div class="paragraph">
<p>Default is 1 hour.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="download">Section download</h3>
<div class="listingblock">
<div class="content">
<pre>[download]
  command = checkout
  command = cherry_pick
  command = pull
  command = format_patch
  scheme = ssh
  scheme = http
  scheme = anon_http
  scheme = anon_git
  scheme = repo_download</pre>
</div>
</div>
<div class="paragraph">
<p>The download section configures the allowed download methods.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="download.command"></a>download.command</dt>
<dd>
<div class="paragraph">
<p>Commands that should be offered to download changes.</p>
</div>
<div class="paragraph">
<p>Multiple commands are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>checkout</code></p>
<div class="paragraph">
<p>Command to fetch and checkout the patch set.</p>
</div>
</li>
<li>
<p><code>cherry_pick</code></p>
<div class="paragraph">
<p>Command to fetch the patch set and to cherry-pick it onto the current
commit.</p>
</div>
</li>
<li>
<p><code>pull</code></p>
<div class="paragraph">
<p>Command to pull the patch set.</p>
</div>
</li>
<li>
<p><code>format_patch</code></p>
<div class="paragraph">
<p>Command to fetch the patch set and to feed it into the <code>format-patch</code>
command.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>download.command</code> is not specified, all download commands are
offered.</p>
</div>
</dd>
<dt class="hdlist1"><a id="download.scheme"></a>download.scheme</dt>
<dd>
<div class="paragraph">
<p>Schemes that should be used to download changes.</p>
</div>
<div class="paragraph">
<p>Multiple schemes are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>http</code></p>
<div class="paragraph">
<p>Authenticated HTTP download is allowed.</p>
</div>
</li>
<li>
<p><code>ssh</code></p>
<div class="paragraph">
<p>Authenticated SSH download is allowed.</p>
</div>
</li>
<li>
<p><code>anon_http</code></p>
<div class="paragraph">
<p>Anonymous HTTP download is allowed.</p>
</div>
</li>
<li>
<p><code>anon_git</code></p>
<div class="paragraph">
<p>Anonymous Git download is allowed.  This is not default, it is also
necessary to set <a href="#gerrit.canonicalGitUrl">gerrit.canonicalGitUrl</a>
variable.</p>
</div>
</li>
<li>
<p><code>repo_download</code></p>
<div class="paragraph">
<p>Gerrit advertises patch set downloads with the <code>repo download</code>
command, assuming that all projects managed by this instance are
generally worked on with the repo multi-repository tool.  This is
not default, as not all instances will deploy repo.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>download.scheme</code> is not specified, SSH, HTTP and Anonymous HTTP
downloads are allowed.</p>
</div>
</dd>
<dt class="hdlist1"><a id="download.checkForHiddenChangeRefs"></a>download.checkForHiddenChangeRefs</dt>
<dd>
<div class="paragraph">
<p>Whether the download commands should be adapted when the change refs
are hidden.</p>
</div>
<div class="paragraph">
<p>Git has a configuration option to hide refs from the initial
advertisement (<code>uploadpack.hideRefs</code>). This option can be used to hide
the change refs from the client. As consequence fetching changes by
change ref does not work anymore. However by setting
<code>uploadpack.allowTipSha1InWant</code> to <code>true</code> fetching changes by commit ID
is possible. If <code>download.checkForHiddenChangeRefs</code> is set to <code>true</code>
the git download commands use the commit ID instead of the change ref
when a project is configured like this.</p>
</div>
<div class="paragraph">
<p>Example git configuration on a project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[uploadpack]
  hideRefs = refs/changes/
  hideRefs = refs/cache-automerge/
  allowTipSha1InWant = true</pre>
</div>
</div>
<div class="paragraph">
<p>By default <code>false</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="download.archive"></a>download.archive</dt>
<dd>
<div class="paragraph">
<p>Specifies which archive formats, if any, should be offered on the change
screen and supported for <code>git-upload-archive</code> operation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[download]
  archive = tar
  archive = tbz2
  archive = tgz
  archive = txz
  archive = zip</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If <code>download.archive</code> is not specified defaults to all archive
commands. Set to <code>off</code> or empty string to disable.</p>
</div>
<div class="paragraph">
<p>Zip is not supported because it may be interpreted by a Java plugin as a
valid JAR file, whose code would have access to cookies on the domain.
For this reason <code>zip</code> format is always excluded from formats offered
through the <code>Download</code> drop down or accessible in the REST API.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="download.maxBundleSize"></a>download.maxBundleSize</dt>
<dd>
<div class="paragraph">
<p>Specifies the maximum size of a bundle in bytes that can be downloaded.
As bundles are kept in memory this setting is to protect the server
from a single request consuming too much heap when generating
a bundle and thereby impacting other users.</p>
</div>
<div class="paragraph">
<p>Defaults to 100MB.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="gc">Section gc</h3>
<div class="paragraph">
<p>This section allows to configure the git garbage collection and schedules it
to run periodically. It will be triggered and executed sequentially for all
projects.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="gc.aggressive"></a>gc.aggressive</dt>
<dd>
<div class="paragraph">
<p>Determines if scheduled garbage collections and garbage collections triggered
through Web-UI should run in aggressive mode or not. Aggressive garbage
collections are more expensive but may lead to significantly smaller
repositories.</p>
</div>
<div class="paragraph">
<p>Valid values are "true" and "false," default is "false".</p>
</div>
</dd>
<dt class="hdlist1"><a id="gc.startTime"></a>gc.startTime</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-startTime">start time</a> for running the
git garbage collection.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gc.interval"></a>gc.interval</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-interval">interval</a> for running the
git garbage collection.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a href="#schedule-configuration-examples">Schedule examples</a> can be found
in the <a href="#schedule-configuration">Schedule Configuration</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="gerrit">Section gerrit</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="gerrit.basePath"></a>gerrit.basePath</dt>
<dd>
<div class="paragraph">
<p>Local filesystem directory holding all Git repositories that
Gerrit knows about and can process changes for.  A project
entity in Gerrit maps to a local Git repository by creating
the path string <code>"${basePath}/${project_name}.git"</code>.</p>
</div>
<div class="paragraph">
<p>If relative, the path is resolved relative to <code>'$site_path'</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.allProjects"></a>gerrit.allProjects</dt>
<dd>
<div class="paragraph">
<p>Name of the permissions-only project defining global server
access controls and settings. These are inherited into every
other project managed by the running server. The name is
relative to <code>gerrit.basePath</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>All-Projects</code> if not set.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.defaultBranch"></a>gerrit.defaultBranch</dt>
<dd>
<div class="paragraph">
<p>Name of the <a href="project-configuration.html#default-branch">default branch</a>
to use on the project creation, if no other branches were specified in the input.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>refs/heads/master</code> if not set.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.allUsers"></a>gerrit.allUsers</dt>
<dd>
<div class="paragraph">
<p>Name of the project in which meta data of all users is stored.
The name is relative to <code>gerrit.basePath</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>All-Users</code> if not set.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.canonicalWebUrl"></a>gerrit.canonicalWebUrl</dt>
<dd>
<div class="paragraph">
<p>The default URL for Gerrit to be accessed through.</p>
</div>
<div class="paragraph">
<p>Typically this would be set to something like "http://review.example.com/"
or "http://example.com:8080/gerrit/" so Gerrit can output links that point
back to itself.</p>
</div>
<div class="paragraph">
<p>Setting this is highly recommended, as its necessary for the upload
code invoked by "git push" or "repo upload" to output hyperlinks
to the newly uploaded changes.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.canonicalGitUrl"></a>gerrit.canonicalGitUrl</dt>
<dd>
<div class="paragraph">
<p>Optional base URL for repositories available over the anonymous git
protocol.  For example, set this to <code>git://mirror.example.com/base/</code>
to have Gerrit display patch set download URLs in the UI.  Gerrit
automatically appends the project name onto the end of the URL.</p>
</div>
<div class="paragraph">
<p>By default unset, as the git daemon must be configured externally
by the system administrator, and might not even be running on the
same host as Gerrit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.docUrl"></a>gerrit.docUrl</dt>
<dd>
<div class="paragraph">
<p>Optional base URL for documentation, under which one can find
"index.html", "rest-api.html", etc. Used as the base for the fixed set
of links in the "Documentation" tab. A slash is implicitly appended.
(For finer control over the top menu, consider writing a
<a href="dev-plugins.html#top-menu-extensions">plugin</a>.)</p>
</div>
<div class="paragraph">
<p>If unset or empty, the documentation tab will only be shown if
<code>/Documentation/index.html</code> can be reached by the browser at app load
time.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.editGpgKeys"></a>gerrit.editGpgKeys</dt>
<dd>
<div class="paragraph">
<p>If enabled and server-side signed push validation is also
<a href="#receive.enableSignedPush">enabled</a>, enable the
<a href="rest-api-accounts.html#list-gpg-keys">REST API endpoints</a> and web UI
for editing GPG keys. If disabled, GPG keys can only be added by
administrators with direct git access to All-Users.</p>
</div>
<div class="paragraph">
<p>Defaults to true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.installCommitMsgHookCommand"></a>gerrit.installCommitMsgHookCommand</dt>
<dd>
<div class="paragraph">
<p>Optional command to install the <code>commit-msg</code> hook. Typically of the
form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>fetch-cmd some://url/to/commit-msg .git/hooks/commit-msg ; chmod +x .git/hooks/commit-msg</pre>
</div>
</div>
<div class="paragraph">
<p>By default unset; falls back to using scp from the canonical SSH host,
or curl from the canonical HTTP URL for the server.  Only necessary if a
proxy or other server/network configuration prevents clients from
fetching from the default location.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.gitHttpUrl"></a>gerrit.gitHttpUrl</dt>
<dd>
<div class="paragraph">
<p>Optional base URL for repositories available over the HTTP
protocol.  For example, set this to <code><a href="http://mirror.example.com/base/" class="bare">http://mirror.example.com/base/</a></code>
to have Gerrit display URLs from this server, rather than itself.</p>
</div>
<div class="paragraph">
<p>By default unset, as the HTTP daemon must be configured externally
by the system administrator, and might not even be running on the
same host as Gerrit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.installBatchModule"></a>gerrit.installBatchModule</dt>
<dd>
<div class="paragraph">
<p>Repeatable list of class name of additional Guice modules to load as
override to the batchInjector&#8217;s modules during the init phases.
Classes are resolved using the primary Gerrit class loader, hence the
class needs to be either declared in Gerrit or an additional JAR
located under the <code>/lib</code> directory.</p>
</div>
<div class="paragraph">
<p>By default unset.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.installDbModule"></a>gerrit.installDbModule</dt>
<dd>
<div class="paragraph">
<p>Repeatable list of class name of additional Guice modules to load at
Gerrit startup as part of the dbInjector.
Classes are resolved using the primary Gerrit class loader, hence the
class needs to be either declared in Gerrit or an additional JAR
located under the <code>/lib</code> directory.</p>
</div>
<div class="paragraph">
<p>By default unset.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.installModule"></a>gerrit.installModule</dt>
<dd>
<div class="paragraph">
<p>Repeatable list of class name of additional Guice modules to load at
Gerrit startup as part of the sysInjector.
Classes are resolved using the primary Gerrit class loader, hence the
class needs to be either declared in Gerrit or an additional JAR
located under the <code>/lib</code> directory.</p>
</div>
<div class="paragraph">
<p>By default unset.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>[gerrit]
  installModule = com.googlesource.gerrit.libmodule.MyModule
  installModule = com.example.abc.OurSpecialSauceModule
  installDbModule = com.example.def.OurCustomProvider
  installBatchModule = com.example.ghi.CustomBatchInitModule</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="gerrit.listProjectsFromIndex"></a>gerrit.listProjectsFromIndex</dt>
<dd>
<div class="paragraph">
<p>Enable rendering of project list from the secondary index instead
of purely relying on the in-memory cache.</p>
</div>
<div class="paragraph">
<p>By default false.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The in-memory cache (set to false) rendering provides an <strong>unlimited list</strong> as a result
of the list project API, causing the full list of projects to be
returned as a result of the <a href="rest-api-projects.html">/projects/</a> REST API
or the <a href="cmd-ls-projects.html">gerrit ls-projects</a> SSH command.
When the rendering from the secondary index (set to true),
the <strong>list is limited</strong> by the global capability
<a href="access-control.html#capability_queryLimit">queryLimit</a>
which is defaulted to 500 entries.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.primaryWeblinkName"></a>gerrit.primaryWeblinkName</dt>
<dd>
<div class="paragraph">
<p>Name of the <a href="dev-plugins.html#links-to-external-tools">Weblink</a> that should
be chosen in cases where only one Weblink can be used in the UI, for example in
inline links.</p>
</div>
<div class="paragraph">
<p>By default unset, meaning that the UI is responsible for trying to identify
a weblink to be used in these cases, most likely weblinks that links to code
browsers with known integrations with Gerrit (like Gitiles and Gitweb).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>[gerrit]
  primaryWeblinkName = gitiles</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="gerrit.reportBugUrl"></a>gerrit.reportBugUrl</dt>
<dd>
<div class="paragraph">
<p>URL to direct users to when they need to report a bug.</p>
</div>
<div class="paragraph">
<p>By default unset, meaning no bug report URL will be displayed. Administrators
should set this to the URL of their issue tracker, if necessary.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.enablePeerIPInReflogRecord"></a>gerrit.enablePeerIPInReflogRecord</dt>
<dd>
<p>Record actual peer IP address in ref log entry for identified user.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Defaults to false.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="gerrit.secureStoreClass"></a>gerrit.secureStoreClass</dt>
<dd>
<div class="paragraph">
<p>Use the secure store implementation from a specified class.</p>
</div>
<div class="paragraph">
<p>If specified, must be the fully qualified class name of a class that implements
the <code>com.google.gerrit.server.securestore.SecureStore</code> interface, and the jar
file containing the class must be placed in the <code>$site_path/lib</code> folder.</p>
</div>
<div class="paragraph">
<p>If not specified, the default no-op implementation is used.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.canLoadInIFrame"></a>gerrit.canLoadInIFrame</dt>
<dd>
<div class="paragraph">
<p>For security reasons Gerrit will always jump out of iframe.
Setting this option to true will prevent this behavior.</p>
</div>
<div class="paragraph">
<p>By default false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.xframeOption"></a>gerrit.xframeOption</dt>
<dd>
<div class="paragraph">
<p>Add <a href="https://tools.ietf.org/html/rfc7034"><code>X-Frame-Options</code></a> header to all HTTP
responses. The <code>X-Frame-Options</code> HTTP response header can be used to indicate
whether or not a browser should be allowed to render a page in a
<code>&lt;frame&gt;</code>, <code>&lt;iframe&gt;</code>, <code>&lt;embed&gt;</code> or <code>&lt;object&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Available values:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ALLOW - The page can be displayed in a frame.</p>
</li>
<li>
<p>SAMEORIGIN - The page can only be displayed in a frame on the same origin as the page itself.</p>
<div class="paragraph">
<p>If link:#gerrit.canLoadInIFrame is set to false this option is ignored and the
<code>X-Frame-Options</code> header is always set to <code>DENY</code>.
Setting this option to <code>ALLOW</code> will cause the <code>X-Frame-Options</code> header to be omitted
the the page can be displayed in a frame.</p>
</div>
<div class="paragraph">
<p>By default SAMEORIGIN.</p>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.cdnPath"></a>gerrit.cdnPath</dt>
<dd>
<div class="paragraph">
<p>Path prefix for Gerrit&#8217;s static resources if using a CDN.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.faviconPath"></a>gerrit.faviconPath</dt>
<dd>
<div class="paragraph">
<p>Path for Gerrit&#8217;s favicon after <a href="#gerrit.canonicalWebUrl">default URL</a>,
including icon name and extension (.ico should be used).</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.instanceId"></a>gerrit.instanceId</dt>
<dd>
<div class="paragraph">
<p>Optional identifier for this Gerrit instance.
Used to identify a specific instance within a group of Gerrit instances with the
same <code>serverId</code> (i.e.: a Gerrit cluster).
Unlike <code>instanceName</code> this value is not available in the email templates.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.instanceName"></a>gerrit.instanceName</dt>
<dd>
<div class="paragraph">
<p>Short identifier for this Gerrit instance.
A good name should be short but precise enough so that users can identify the instance among others.</p>
</div>
<div class="paragraph">
<p>Defaults to the full hostname of the Gerrit server.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.experimentalRollingUpgrade"></a>gerrit.experimentalRollingUpgrade</dt>
<dd>
<div class="paragraph">
<p>Enable Gerrit rolling upgrade to the next version.
For example if Gerrit v3.2 is version N (All-Projects:refs/meta/version=183)
then its next version N+1 is v3.3 (All-Projects:refs/meta/version=184).
Allow Gerrit to start even if the underlying schema version has been bumped to
the next Gerrit version.</p>
</div>
<div class="paragraph">
<p>Set to true if Gerrit is installed in
[high-availability configuration](<a href="https://gerrit.googlesource.com/plugins/high-availability/+/refs/heads/master/README.md" class="bare">https://gerrit.googlesource.com/plugins/high-availability/+/refs/heads/master/README.md</a>)
during the rolling upgrade to the next version.</p>
</div>
<div class="paragraph">
<p>By default false.</p>
</div>
<div class="paragraph">
<p>The rolling upgrade process, at high level, assumes that Gerrit is installed
on two or more nodes sharing the repositories over NFS. The upgrade is composed
of the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set gerrit.experimentalRollingUpgrade to true on all Gerrit masters</p>
</li>
<li>
<p>Set the first master unhealthy</p>
</li>
<li>
<p>Shutdown the first master and [upgrade](install.html#init) to the next version</p>
</li>
<li>
<p>Startup the first master, wait for the online reindex to complete (where applicable)</p>
</li>
<li>
<p>Verify the the first master upgrade is successful and online reindex is complete</p>
</li>
<li>
<p>Set the first master healthy</p>
</li>
<li>
<p>Repeat steps 2. to 6. for all the other Gerrit nodes</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Rolling upgrade may or may not be possible depending on the changes introduced
by the target version of the upgrade. Refer to the release notes and check whether
the rolling upgrade is possible or not and the associated constraints.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1"><a id="gerrit.serverId"></a>gerrit.serverId</dt>
<dd>
<div class="paragraph">
<p>Used by NoteDb to, amongst other things, identify author identities from
per-server specific account IDs.</p>
</div>
<div class="paragraph">
<p>If this value is not set on startup it is automatically set to a random UUID.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If this value doesn&#8217;t match the serverId used when creating an already existing
NoteDb, Gerrit will not be able to use that instance of NoteDb. The serverId
used to create the NoteDb will show in the resulting exception message in case
the value differs.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="gitweb">Section gitweb</h3>
<div class="paragraph">
<p>Gerrit can forward requests to either an internally managed gitweb
(which allows Gerrit to enforce some access controls), or to an
externally managed gitweb (where the web server manages access).
See also <a href="config-gitweb.html">Gitweb Integration</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="gitweb.cgi"></a>gitweb.cgi</dt>
<dd>
<div class="paragraph">
<p>Path to the locally installed <code>gitweb.cgi</code> executable.  This CGI will
be called by Gerrit Code Review when the URL <code>/gitweb</code> is accessed.
Project level access controls are enforced prior to calling the CGI.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>/usr/lib/cgi-bin/gitweb.cgi</code> if <code>gitweb.url</code> is not set.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.url"></a>gitweb.url</dt>
<dd>
<div class="paragraph">
<p>Optional URL of an affiliated gitweb service.  Defines the
web location where a <code>gitweb.cgi</code> is installed to browse
<code>gerrit.basePath</code> and the repositories it contains.</p>
</div>
<div class="paragraph">
<p>Gerrit appends any necessary query arguments onto the end of this URL.
For example, <code>?p=$project.git;h=$commit</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.type"></a>gitweb.type</dt>
<dd>
<div class="paragraph">
<p>Optional type of affiliated gitweb service. This allows using
alternatives to gitweb, such as cgit.</p>
</div>
<div class="paragraph">
<p>Valid values are <code>gitweb</code>, <code>cgit</code>, <code>disabled</code> or <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>If not set, or set to <code>disabled</code>, there is no gitweb hyperlinking
support.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.revision"></a>gitweb.revision</dt>
<dd>
<div class="paragraph">
<p>Optional pattern to use for constructing the gitweb URL when pointing
at a specific commit when <code>gitweb.type</code> is set to <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>Valid replacements are <code>${project}</code> for the project name in Gerrit
and <code>${commit}</code> for the SHA-1 hash for the commit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.project"></a>gitweb.project</dt>
<dd>
<div class="paragraph">
<p>Optional pattern to use for constructing the gitweb URL when pointing
at a specific project when <code>gitweb.type</code> is set to <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>Valid replacements are <code>${project}</code> for the project name in Gerrit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.branch"></a>gitweb.branch</dt>
<dd>
<div class="paragraph">
<p>Optional pattern to use for constructing the gitweb URL when pointing
at a specific branch when <code>gitweb.type</code> is set to <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>Valid replacements are <code>${project}</code> for the project name in Gerrit
and <code>${branch}</code> for the name of the branch.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.tag"></a>gitweb.tag</dt>
<dd>
<div class="paragraph">
<p>Optional pattern to use for constructing the gitweb URL when pointing
at a specific tag when <code>gitweb.type</code> is set to <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>Valid replacements are <code>${project}</code> for the project name in Gerrit
and <code>${tag}</code> for the name of the tag.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.roottree"></a>gitweb.roottree</dt>
<dd>
<div class="paragraph">
<p>Optional pattern to use for constructing the gitweb URL when pointing
at the contents of the root tree in a specific commit when <code>gitweb.type</code>
is set to <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>Valid replacements are <code>${project}</code> for the project name in Gerrit
and <code>${commit}</code> for the SHA-1 hash for the commit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.file"></a>gitweb.file</dt>
<dd>
<div class="paragraph">
<p>Optional pattern to use for constructing the gitweb URL when pointing
at the contents of a file in a specific commit when <code>gitweb.type</code> is
set to <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>Valid replacements are <code>${project}</code> for the project name in Gerrit,
<code>${file}</code> for the file name and <code>${commit}</code> for the SHA-1 hash for
the commit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.filehistory"></a>gitweb.filehistory</dt>
<dd>
<div class="paragraph">
<p>Optional pattern to use for constructing the gitweb URL when pointing
at the history of a file in a specific branch when when <code>gitweb.type</code>
is set to <code>custom</code>.</p>
</div>
<div class="paragraph">
<p>Valid replacements are <code>${project}</code> for the project name in Gerrit,
<code>${file}</code> for the file name and <code>${branch}</code> for the name of the
branch.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.linkname"></a>gitweb.linkname</dt>
<dd>
<div class="paragraph">
<p>Optional setting for modifying the link name presented to the user
in the Gerrit web-UI.</p>
</div>
<div class="paragraph">
<p>The default linkname for custom type is <code>gitweb</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.pathSeparator"></a>gitweb.pathSeparator</dt>
<dd>
<div class="paragraph">
<p>Optional character to substitute the standard path separator (slash) in
project names and branch names.</p>
</div>
<div class="paragraph">
<p>By default, Gerrit will use hexadecimal encoding for slashes in project and
branch names. Some web servers, such as Tomcat, reject this hexadecimal
encoding in the URL.</p>
</div>
<div class="paragraph">
<p>Some alternative gitweb services, such as <a href="http://gitblit.com" class="external" target="_blank" rel="noopener">Gitblit</a>,
allow using an alternative path separator character. In Gitblit, this can be
configured through the property <a href="http://gitblit.com/properties.html" class="external" target="_blank" rel="noopener">web.forwardSlashCharacter</a>.
In Gerrit, the alternative path separator can be configured correspondingly
using the property <code>gitweb.pathSeparator</code>.</p>
</div>
<div class="paragraph">
<p>Valid values are the characters <code>*</code>, <code>(</code> and <code>)</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gitweb.urlEncode"></a>gitweb.urlEncode</dt>
<dd>
<div class="paragraph">
<p>Whether or not Gerrit should encode the generated viewer URL.</p>
</div>
<div class="paragraph">
<p>Gerrit composes the viewer URL using information about the project, branch, file
or commit of the target object to be displayed. Typically viewers such as CGit
and gitweb do need those parts to be encoded, including the <code>/</code> in project&#8217;s name,
for being correctly parsed.
However other viewers could instead require an unencoded URL (e.g. GitHub web
based viewer).</p>
</div>
<div class="paragraph">
<p>Valid values are <code>true</code> and <code>false</code>. The default is <code>true</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="groups">Section groups</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="groups.includeExternalUsersInRegisteredUsersGroup"></a>groups.includeExternalUsersInRegisteredUsersGroup</dt>
<dd>
<div class="paragraph">
<p>Controls whether external users (these are users we have sufficient
knowledge about but who don&#8217;t yet have a Gerrit account) are considered
to be members of the <code>REGISTERED_USERS</code> group.</p>
</div>
<div class="paragraph">
<p>This setting only makes sense if you run custom code (e.g. from a plugin
or a custom authentication backend). By default, Gerrit core always requires
users to register and doesn&#8217;t use external users.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="groups.newGroupsVisibleToAll"></a>groups.newGroupsVisibleToAll</dt>
<dd>
<div class="paragraph">
<p>Controls whether newly created groups should be by default visible to
all registered users.</p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="groups.uuid.name"></a>groups.&lt;uuid&gt;.name</dt>
<dd>
<div class="paragraph">
<p>Display name for group with the given UUID.</p>
</div>
<div class="paragraph">
<p>This option is only supported for system groups (scheme 'global').</p>
</div>
<div class="paragraph">
<p>E.g. this parameter can be used to configure another name for the
<code>Anonymous Users</code> group:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[groups "global:Anonymous-Users"]
  name = All Users</pre>
</div>
</div>
<div class="paragraph">
<p>When setting this parameter it should be verified that there is no
existing group with the same name (case-insensitive). Configuring an
ambiguous name makes Gerrit fail on startup. Once set Gerrit ensures
that it is not possible to create a group with this name. Gerrit also
keeps the default name reserved so that it cannot be used for new
groups either. This means there is no danger of ambiguous group names
when this parameter is removed and the system group uses the default
name again.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="has-operand-alias">Section has operand alias</h3>
<div class="paragraph">
<p>'has' operand aliasing allows global aliases to be defined for query
'has' operands. Currently only change queries are supported. The alias
name is the git config key name, and the 'has' operand being aliased
is the git config value.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[has-operand-alias "change"]
  oldtopic = topic</pre>
</div>
</div>
<div class="paragraph">
<p>This section is particularly useful to alias 'has' operands (which may
be long and clunky as they include a plugin name in them) to shorter
operands without the plugin name. Admins should take care to choose
shorter operands that are unique and unlikely to conflict in the future.</p>
</div>
<div class="paragraph">
<p>Aliases are resolved dynamically at invocation time to the currently
loaded version of plugins. If a referenced plugin is not loaded, or
does not define the command, "unsupported operand" is returned to the
user.</p>
</div>
<div class="paragraph">
<p>Aliases will override existing 'has' operands. In case of multiple
aliases with same name, the last one defined will be used.</p>
</div>
<div class="paragraph">
<p>When the target of an alias does not exist, the 'has' operand with the
name of the alias will be used (if present). This enables an admin to
configure the system to override a core 'has' operand with an operand
provided by a plugin when present and otherwise fall back to the 'has'
operand provided by core.</p>
</div>
</div>
<div class="sect2">
<h3 id="http">Section http</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="http.proxy"></a>http.proxy</dt>
<dd>
<div class="paragraph">
<p>URL of the proxy server when making outgoing HTTP
connections for OpenID login transactions.  Syntax
should be <code><a href="http://&#8217;hostname'" class="bare">http://&#8217;hostname'</a></code>:&#8217;port'.</p>
</div>
</dd>
<dt class="hdlist1"><a id="http.proxyUsername"></a>http.proxyUsername</dt>
<dd>
<div class="paragraph">
<p>Optional username to authenticate to the HTTP proxy with.
This property is honored only if the username does not
appear in the http.proxy property above.</p>
</div>
</dd>
<dt class="hdlist1"><a id="http.proxyPassword"></a>http.proxyPassword</dt>
<dd>
<div class="paragraph">
<p>Optional password to authenticate to the HTTP proxy with.
This property is honored only if the password does not
appear in the http.proxy property above.</p>
</div>
</dd>
<dt class="hdlist1"><a id="http.addUserAsRequestAttribute"></a>http.addUserAsRequestAttribute</dt>
<dd>
<div class="paragraph">
<p>If true, 'User' attribute will be added to the request attributes so it
can be accessed outside the request scope (will be set to username or id
if username not configured).</p>
</div>
<div class="paragraph">
<p>This attribute can be used by the servlet container to log user in the
http access log.</p>
</div>
<div class="paragraph">
<p>When running the embedded servlet container, this attribute is used to
print user in the httpd_log.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>%{User}r</code></p>
<div class="paragraph">
<p>Pattern to print user in Tomcat AccessLog.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default value is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="http.addUserAsResponseHeader"></a>http.addUserAsResponseHeader</dt>
<dd>
<div class="paragraph">
<p>If true, the header 'User' will be added to the list of response headers so it
can be accessed from a reverse proxy for logging purposes.</p>
</div>
<div class="paragraph">
<p>Default value is false.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="httpd">Section httpd</h3>
<div class="paragraph">
<p>The httpd section configures the embedded servlet container.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="httpd.listenUrl"></a>httpd.listenUrl</dt>
<dd>
<div class="paragraph">
<p>Configuration for the listening sockets of the internal HTTP daemon.
Each entry of <code>listenUrl</code> combines the following options for a
listening socket: protocol, network address, port and context path.</p>
</div>
<div class="paragraph">
<p><em>Protocol</em> can be either <code>http://</code>, <code>https://</code>, <code>proxy-http://</code> or
<code>proxy-https://</code>. The latter two are special forms of <code>http://</code> with
awareness of a reverse proxy (see below). <em>Network address</em> selects
the interface and/or scope of the listening socket. For notes
examples, see below. <em>Port</em> is the TCP port number and is optional
(default value depends on the protocol). <em>Context path</em> is the
optional "base URI" for the Gerrit Code Review as application to
serve on.</p>
</div>
<div class="paragraph">
<p><strong>Protocol</strong> schemes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>http://</code></p>
<div class="paragraph">
<p>Plain-text HTTP protocol.  If port is not supplied, defaults to 80,
the standard HTTP port.</p>
</div>
</li>
<li>
<p><code>https://</code></p>
<div class="paragraph">
<p>SSL encrypted HTTP protocol.  If port is not supplied, defaults to
443, the standard HTTPS port.</p>
</div>
<div class="paragraph">
<p>For configuration of the certificate and private key, see
<a href="#httpd.sslKeyStore">httpd.sslKeyStore</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
SSL/TLS configuration capabilities of Gerrit internal HTTP daemon
are very limited. Externally facing production sites are strongly
encouraged to use a reverse proxy configuration to handle SSL/TLS
and use a <code>proxy-https://</code> scheme here (below) for security and
performance reasons.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>proxy-http://</code></p>
<div class="paragraph">
<p>Plain-text HTTP relayed from a reverse proxy.  If port is not
supplied, defaults to 8080.</p>
</div>
<div class="paragraph">
<p>Like <code>http://</code>, but additional header parsing features are
enabled to honor <code>X-Forwarded-For</code>, <code>X-Forwarded-Host</code> and
<code>X-Forwarded-Server</code>.  These headers are typically set by Apache&#8217;s
<a href="https://httpd.apache.org/docs/2.4/mod/mod_proxy.html#x-headers" class="external" target="_blank" rel="noopener">mod_proxy</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For secruity reasons, make sure to only allow connections from a
trusted reverse proxy in your network, as clients could otherwise
easily spoof these headers and thus spoof their originating IP
address effectively. If the reverse proxy is running on the same
machine as Gerrit daemon, the use of a <em>loopback</em> network address
to bind to (see below) is strongly recommended to mitigate this.</p>
</div>
<div class="paragraph">
<p>If not using Apache&#8217;s mod_proxy, validate that your reverse proxy
sets these headers on all requests. If not, either configure it to
sanitize them from the origin, or use the <code>http://</code> scheme instead.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>proxy-https://</code></p>
<div class="paragraph">
<p>Plain-text HTTP relayed from a reverse proxy that has already
handled the SSL encryption/decryption.  If port is not supplied,
defaults to 8080.</p>
</div>
<div class="paragraph">
<p>Behaves exactly like <code>proxy-http://</code>, but also sets the scheme to
assume <code>https://</code> is the proper URL back to the server.</p>
</div>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>Network address</strong> forms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Loopback (localhost): <code>127.0.0.1</code> (IPv4) or <code>[::1]</code> (IPv6).</p>
</li>
<li>
<p>All (unspecified): <code>0.0.0.0</code> (IPv4), <code>[::]</code> (IPv6) or <code>*</code>
(IPv4 and IPv6)</p>
</li>
<li>
<p>Interface IP address, e.g. <code>1.2.3.4</code> (IPv4) or
<code>[2001:db8::a00:20ff:fea7:ccea]</code> (IPv6)</p>
</li>
<li>
<p>Hostname, resolved at startup time to an address.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Context path</strong> is the local part of the URL to be used to access
Gerrit on ('base URL'). E.g. <code>/gerrit/</code> to serve Gerrit on that URI
as base. If set, consider to align this with the
<a href="#gerrit.canonicalWebUrl">gerrit.canonicalWebUrl</a> setting. Correct
settings may depend on the reverse proxy configuration as well. By
default, this is <code>/</code> so that Gerrit serves requests on the root.</p>
</div>
<div class="paragraph">
<p>If multiple values are supplied, the daemon will listen on all
of them.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[httpd]
    listenUrl = proxy-https://127.0.0.1:9999/gerrit/
[gerrit]
    # Reverse proxy is configured to serve with SSL/TLS on
    # example.com and to relay requests on /gerrit/ onto
    # http://127.0.0.1:9999/gerrit/
    canonicalWebUrl = https://example.com/gerrit/</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[httpd]
    # Listen on specific external interface with plaintext
    # HTTP on IPv6.
    listenUrl = http://[2001:db8::a00:20ff:fea7:ccea]

    # Also listen on specific internal interface for use with
    # reverse proxy run on another host.
    listenUrl = proxy-https://192.168.100.123</pre>
</div>
</div>
<div class="paragraph">
<p>See also the page on <a href="config-reverseproxy.html">reverse proxy</a>
configuration.</p>
</div>
<div class="paragraph">
<p>By default, <code>http://*:8080</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.reuseAddress"></a>httpd.reuseAddress</dt>
<dd>
<div class="paragraph">
<p>If true, permits the daemon to bind to the port even if the port
is already in use.  If false, the daemon ensures the port is not
in use before starting.  Busy sites may need to set this to true
to permit fast restarts.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.gracefulStopTimeout"></a>httpd.gracefulStopTimeout</dt>
<dd>
<div class="paragraph">
<p>Set a graceful stop time. If set, the daemon ensures that all incoming
calls are preserved for a maximum period of time, before starting
the graceful shutdown process. Sites behind a workload balancer such as
HAProxy would need this to be set for avoiding serving errors during
rolling restarts.</p>
</div>
<div class="paragraph">
<p>Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
<div class="paragraph">
<p>By default, 0 seconds (immediate shutdown).</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.inheritChannel"></a>httpd.inheritChannel</dt>
<dd>
<div class="paragraph">
<p>If true, permits the daemon to inherit its server socket channel
from fd0/1(stdin/stdout). When set to true, the server can be socket
activated via systemd or xinetd.</p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.requestHeaderSize"></a>httpd.requestHeaderSize</dt>
<dd>
<div class="paragraph">
<p>Size, in bytes, of the buffer used to parse the HTTP headers of an
incoming HTTP request.  The entire request headers, including any
cookies sent by the browser, must fit within this buffer, otherwise
the server aborts with the response '413 Request Entity Too Large'.</p>
</div>
<div class="paragraph">
<p>One buffer of this size is allocated per active connection.
Allocating a buffer that is too large wastes memory that cannot be
reclaimed, allocating a buffer that is too small may cause unexpected
errors caused by very long Referer URLs or large cookie values.</p>
</div>
<div class="paragraph">
<p>By default, 16384 (16 K), which is sufficient for most OpenID and
other web-based single-sign-on integrations.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.sslCrl"></a>httpd.sslCrl</dt>
<dd>
<div class="paragraph">
<p>Path of the certificate revocation list file in PEM format. This
crl file is optional, and available for CLIENT_SSL_CERT_LDAP
authentication.</p>
</div>
<div class="paragraph">
<p>To create and view a crl using openssl:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>openssl ca -gencrl -out crl.pem
openssl crl -in crl.pem -text</pre>
</div>
</div>
<div class="paragraph">
<p>If not absolute, the path is resolved relative to <code>$site_path</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>$site_path/etc/crl.pem</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.sslKeyStore"></a>httpd.sslKeyStore</dt>
<dd>
<div class="paragraph">
<p>Path of the Java keystore containing the server&#8217;s SSL certificate
and private key.  This keystore is required for <code>https://</code> in URL.</p>
</div>
<div class="paragraph">
<p>To create a self-signed certificate for simple internal usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>keytool -keystore keystore -alias jetty -genkey -keyalg RSA
chmod 600 keystore</pre>
</div>
</div>
<div class="paragraph">
<p>If not absolute, the path is resolved relative to <code>$site_path</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>$site_path/etc/keystore</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.sslKeyPassword"></a>httpd.sslKeyPassword</dt>
<dd>
<div class="paragraph">
<p>Password used to decrypt the private portion of the sslKeyStore.
Java keystores require a password, even if the administrator
doesn&#8217;t want to enable one.</p>
</div>
<div class="paragraph">
<p>If set to the empty string the embedded server will prompt for the
password during startup.</p>
</div>
<div class="paragraph">
<p>By default, <code>gerrit</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.requestLog"></a>httpd.requestLog</dt>
<dd>
<div class="paragraph">
<p>Enable (or disable) the <code>'$site_path'/logs/httpd_log</code> request log.
If enabled, an NCSA combined log format request log file is written
out by the internal HTTP daemon. The httpd log format is documented
<a href="logs.html#_httpd_log">here</a>.</p>
</div>
<div class="paragraph">
<p><code>log4j.appender</code> with the name <code>httpd_log</code> can be configured to overwrite
programmatic configuration.</p>
</div>
<div class="paragraph">
<p>By default, true if httpd.listenUrl uses http:// or https://,
and false if httpd.listenUrl uses proxy-http:// or proxy-https://.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.acceptorThreads"></a>httpd.acceptorThreads</dt>
<dd>
<div class="paragraph">
<p>Number of worker threads dedicated to accepting new incoming TCP
connections and allocating them connection-specific resources.</p>
</div>
<div class="paragraph">
<p>By default, 2, which should be suitable for most high-traffic sites.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.minThreads"></a>httpd.minThreads</dt>
<dd>
<div class="paragraph">
<p>Minimum number of spare threads to keep in the worker thread pool.
This number must be at least 1 larger than httpd.acceptorThreads
multiplied by the number of httpd.listenUrls configured.</p>
</div>
<div class="paragraph">
<p>By default, 5, suitable for most lower-volume traffic sites.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.maxThreads"></a>httpd.maxThreads</dt>
<dd>
<div class="paragraph">
<p>Maximum number of threads to permit in the worker thread pool.</p>
</div>
<div class="paragraph">
<p>By default 25, suitable for most lower-volume traffic sites.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Unless SSH daemon is disabled, see <a href="#sshd.listenAddress">sshd.listenAddress</a>,
the max number of concurrent Git requests over HTTP and SSH together is
defined by the <a href="#sshd.threads">sshd.threads</a> and
<a href="#sshd.batchThreads">sshd.batchThreads</a>.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.maxQueued"></a>httpd.maxQueued</dt>
<dd>
<div class="paragraph">
<p>Maximum number of client connections which can enter the worker
thread pool waiting for a worker thread to become available.
0 sets the queue size to the Integer.MAX_VALUE.</p>
</div>
<div class="paragraph">
<p>By default 200.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.maxWait"></a>httpd.maxWait</dt>
<dd>
<div class="paragraph">
<p>Maximum amount of time a client will wait for an available
thread to handle a project clone, fetch or push request over the
smart HTTP transport.</p>
</div>
<div class="paragraph">
<p>Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
<li>
<p>d, day, days</p>
</li>
<li>
<p>w, week, weeks (<code>1 week</code> is treated as <code>7 days</code>)</p>
</li>
<li>
<p>mon, month, months (<code>1 month</code> is treated as <code>30 days</code>)</p>
</li>
<li>
<p>y, year, years (<code>1 year</code> is treated as <code>365 days</code>)</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If a unit suffix is not specified, <code>minutes</code> is assumed.  If 0
is supplied, the maximum age is infinite and connections will not
abort until the client disconnects.</p>
</div>
<div class="paragraph">
<p>By default, 5 minutes.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.filterClass"></a>httpd.filterClass</dt>
<dd>
<div class="paragraph">
<p>Class that implements the javax.servlet.Filter interface
for filtering any HTTP related traffic going through the Gerrit
HTTP protocol.
Class is loaded and configured in the Gerrit Jetty container
and run in front of all Gerrit URL handlers, allowing the filter
to inspect, modify, allow or reject each request.
It needs to be provided as JAR library
under $GERRIT_SITE/lib as it is resolved using the default Gerrit class
loader and cannot be dynamically loaded by a plugin.</p>
</div>
<div class="paragraph">
<p>Failing to load the Filter class would result in a Gerrit start-up
failure, as this class is supposed to provide mandatory filtering
in front of Gerrit HTTP protocol.</p>
</div>
<div class="paragraph">
<p>Typical usage is in conjunction with the <code>auth.type=HTTP</code> as replacement
of an Apache HTTP proxy layer as security enforcement on top of Gerrit
by returning a trusted username as HTTP Header.</p>
</div>
<div class="paragraph">
<p>Allow multiple values to install multiple servlet filters.</p>
</div>
<div class="paragraph">
<p>Example of using a security library secure.jar under $GERRIT_SITE/lib
that provides a org.anyorg.MySecureHeaderFilter Servlet Filter that enforces
a trusted username in the <code>TRUSTED_USER</code> HTTP Header and
org.anyorg.MySecureIPFilter that performs source IP security filtering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[auth]
	type = HTTP
	httpHeader = TRUSTED_USER

[httpd]
	filterClass = org.anyorg.MySecureHeaderFilter
	filterClass = org.anyorg.MySecureIPFilter</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="filterClass.className.initParam"></a>filterClass.&lt;className&gt;.initParam</dt>
<dd>
<div class="paragraph">
<p>Gerrit supports customized pluggable HTTP filters as <code>filterClass</code>. This
option allows to pass extra initialization parameters to the filter. It
allows for multiple key/value pairs to be passed in this pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>initParam = &lt;key&gt;=&lt;value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For a comprehensive example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[httpd]
	filterClass = org.anyorg.AFilter
	filterClass = org.anyorg.BFilter
[filterClass "org.anyorg.AFilter"]
	key1 = value1
	key2 = value2
[filterClass "org.anyorg.BFilter"]
	key3 = value3</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.idleTimeout"></a>httpd.idleTimeout</dt>
<dd>
<div class="paragraph">
<p>Maximum idle time for a connection, which roughly translates to the
TCP socket <code>SO_TIMEOUT</code>.</p>
</div>
<div class="paragraph">
<p>This value is interpreted as the maximum time between some progress
being made on the connection. So if a single byte is read or written,
then the timeout is reset.</p>
</div>
<div class="paragraph">
<p>The max idle time is applied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When waiting for a new message to be received on a connection</p>
</li>
<li>
<p>When waiting for a new message to be sent on a connection</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, 30 seconds.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.robotsFile"></a>httpd.robotsFile</dt>
<dd>
<div class="paragraph">
<p>Location of an external robots.txt file to be used instead of the one
bundled with the .war of the application.</p>
</div>
<div class="paragraph">
<p>If not absolute, the path is resolved relative to <code>$site_path</code>.</p>
</div>
<div class="paragraph">
<p>If the file doesn&#8217;t exist or can&#8217;t be read the default robots.txt file
bundled with the .war will be used instead.</p>
</div>
</dd>
<dt class="hdlist1"><a id="httpd.registerMBeans"></a>httpd.registerMBeans</dt>
<dd>
<div class="paragraph">
<p>Enable (or disable) registration of Jetty MBeans for Java JMX.</p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="index">Section index</h3>
<div class="paragraph">
<p>The index section configures the secondary index.</p>
</div>
<div class="paragraph">
<p>Note that after enabling the secondary index, the index must be built
using the <a href="pgm-reindex.html">reindex program</a> before restarting the
Gerrit server.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="index.type"></a>index.type</dt>
<dd>
<div class="paragraph">
<p>Type of secondary indexing employed by Gerrit.  The supported
values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LUCENE</code></p>
<div class="paragraph">
<p>A <a href="http://lucene.apache.org/">Lucene</a> index is used.</p>
</div>
</li>
<li>
<p><code>ELASTICSEARCH</code> look into <a href="#elasticsearch">Elasticsearch section</a></p>
<div class="paragraph">
<p>An <a href="https://www.elastic.co/products/elasticsearch" class="external" target="_blank" rel="noopener">Elasticsearch</a> index is
used. Refer to the <a href="#elasticsearch">Elasticsearch section</a> for further
configuration details.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, <code>LUCENE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.threads"></a>index.threads</dt>
<dd>
<div class="paragraph">
<p>Number of threads to use for indexing in normal interactive operations. Setting
it to 0 disables the dedicated thread pool and indexing will be done in the same
thread as the operation.</p>
</div>
<div class="paragraph">
<p>If not set or set to a zero, defaults to the number of logical CPUs as returned
by the JVM. If set to a negative value, defaults to a direct executor.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.batchThreads"></a>index.batchThreads</dt>
<dd>
<div class="paragraph">
<p>Number of threads to use for indexing in background operations, such as
online schema upgrades, and also for offline reindexing.</p>
</div>
<div class="paragraph">
<p>If not set or set to a zero, defaults to the number of logical CPUs as returned
by the JVM. If set to a negative value, defaults to a direct executor.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.onlineUpgrade"></a>index.onlineUpgrade</dt>
<dd>
<div class="paragraph">
<p>Whether to upgrade to new index schema versions while the server is
running. This is recommended as it prevents additional downtime during
Gerrit version upgrades (avoiding the need for an offline reindex step
using Reindex), but can add additional server load during the upgrade.</p>
</div>
<div class="paragraph">
<p>If set to false, there is no way to upgrade the index schema to take
advantage of new search features without restarting the server.</p>
</div>
<div class="paragraph">
<p>Defaults to true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.maxLimit"></a>index.maxLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum limit to allow for search queries. Requesting results above this
limit will truncate the list (but will still set <code>_more_changes</code> on
result lists). Set to 0 for no limit.</p>
</div>
<div class="paragraph">
<p>When <code>index.type</code> is set to <code>ELASTICSEARCH</code>, this value should not exceed
the <code>index.max_result_window</code> value configured on the Elasticsearch
server. If a value is not configured during site initialization, defaults to
10000, which is the default value of <code>index.max_result_window</code> in Elasticsearch.</p>
</div>
<div class="paragraph">
<p>When <code>index.type</code> is set to <code>LUCENE</code>, defaults to no limit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.maxPages"></a>index.maxPages</dt>
<dd>
<div class="paragraph">
<p>Maximum number of pages of search results to allow, as index
implementations may have to scan through large numbers of skipped
results when searching with an offset. Requesting results starting past
this threshold times the requested limit will result in an error. Set to
0 for no limit.</p>
</div>
<div class="paragraph">
<p>Defaults to no limit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.maxTerms"></a>index.maxTerms</dt>
<dd>
<div class="paragraph">
<p>Maximum number of leaf terms to allow in a query. Too-large queries may
perform poorly, so setting this option causes query parsing to fail fast
before attempting to send them to the secondary index.</p>
</div>
<div class="paragraph">
<p>When the index type is <code>LUCENE</code>, also sets the maximum number of clauses
permitted per BooleanQuery. This is so that all enforced query limits
are the same.</p>
</div>
<div class="paragraph">
<p>Defaults to 1024.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.autoReindexIfStale"></a>index.autoReindexIfStale</dt>
<dd>
<div class="paragraph">
<p>Whether to automatically check if a document became stale in the index
immediately after indexing it. If false, there is a race condition during two
simultaneous writes that may cause one of the writes to not be reflected in the
index. The check to avoid this does consume some resources.</p>
</div>
<div class="paragraph">
<p>Defaults to false.</p>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="index.scheduledIndexer">Subsection index.scheduledIndexer</h4>
<div class="paragraph">
<p>This section configures periodic indexing. Periodic indexing is
intended to run only on replicas and only updates the group index.
Replication to replicas happens on Git level so that Gerrit is not aware
of incoming replication events. But replicas need an updated group index
to resolve memberships of users for ACL validation. To keep the group
index in replicas up-to-date the Gerrit replica periodically scans the
group refs in the All-Users repository to reindex groups if they are
stale.</p>
</div>
<div class="paragraph">
<p>The scheduled reindexer is not able to detect group deletions that
happened while the replica was offline, but since group deletions are not
supported this should never happen. If nevertheless groups refs were
deleted while a replica was offline a full offline <a href="pgm-reindex.html">
reindex</a> must be performed.</p>
</div>
<div class="paragraph">
<p>This section is only used if Gerrit runs in replica mode, otherwise it is
ignored.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="index.scheduledIndexer.runOnStartup"></a>index.scheduledIndexer.runOnStartup</dt>
<dd>
<div class="paragraph">
<p>Whether the scheduled indexer should run once immediately on startup.
If set to <code>true</code> the replica startup is blocked until all stale groups
were reindexed. Enabling this allows to prevent that replicas that were
offline for a longer period of time run with outdated group information
until the first scheduled indexing is done.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.scheduledIndexer.enabled"></a>index.scheduledIndexer.enabled</dt>
<dd>
<div class="paragraph">
<p>Whether the scheduled indexer is enabled. If the scheduled indexer is
disabled you must implement other means to keep the group index for the
replica up-to-date (e.g. by using ElasticSearch for the indexes).</p>
</div>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.scheduledIndexer.startTime"></a>index.scheduledIndexer.startTime</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-startTime">start time</a> for running
the scheduled indexer.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>00:00</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.scheduledIndexer.interval"></a>index.scheduledIndexer.interval</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-interval">interval</a> for running
the scheduled indexer.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>5m</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a href="#schedule-configuration-examples">Schedule examples</a> can be found
in the <a href="#schedule-configuration">Schedule Configuration</a> section.</p>
</div>
</div>
<div class="sect3">
<h4 id="_lucene_configuration">Lucene configuration</h4>
<div class="paragraph">
<p>Open and closed changes are indexed in separate indexes named
'open' and 'closed' respectively.</p>
</div>
<div class="paragraph">
<p>The following settings are only used when the index type is <code>LUCENE</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="index.name.ramBufferSize"></a>index.name.ramBufferSize</dt>
<dd>
<div class="paragraph">
<p>Determines the amount of RAM that may be used for buffering added documents
and deletions before they are flushed to the index.  See the
<a href="http://lucene.apache.org/core/4_6_0/core/org/apache/lucene/index/LiveIndexWriterConfig.html#setRAMBufferSizeMB(double)" class="external" target="_blank" rel="noopener">
Lucene documentation</a> for further details.</p>
</div>
<div class="paragraph">
<p>Defaults to 16M.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.name.maxBufferedDocs"></a>index.name.maxBufferedDocs</dt>
<dd>
<div class="paragraph">
<p>Determines the minimal number of documents required before the buffered
in-memory documents are flushed to the index. Large values generally
give faster indexing.  See the
<a href="http://lucene.apache.org/core/4_6_0/core/org/apache/lucene/index/LiveIndexWriterConfig.html#setMaxBufferedDocs(int)" class="external" target="_blank" rel="noopener">
Lucene documentation</a> for further details.</p>
</div>
<div class="paragraph">
<p>Defaults to -1, meaning no maximum is set and the writer will flush
according to RAM usage.</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.name.commitWithin"></a>index.name.commitWithin</dt>
<dd>
<div class="paragraph">
<p>Determines the period at which changes are automatically committed to
stable store on disk. This is a costly operation and may block
additional index writes, so lower with caution.</p>
</div>
<div class="paragraph">
<p>If zero, changes are committed after every write. This is very costly
but may be useful if offline reindexing is infeasible, or for development
servers.</p>
</div>
<div class="paragraph">
<p>Values can be specified using standard time unit abbreviations (<code>ms</code>, <code>sec</code>,
<code>min</code>, etc.).</p>
</div>
<div class="paragraph">
<p>If negative, <code>commitWithin</code> is disabled. Changes are flushed to disk when
the in-memory buffer fills, but only committed and guaranteed to be synced
to disk when the process finishes.</p>
</div>
<div class="paragraph">
<p>Defaults to 300000 ms (5 minutes).</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.name.maxMergeCount"></a>index.name.maxMergeCount</dt>
<dd>
<div class="paragraph">
<p>Determines the max number of simultaneous merges that are allowed. If a merge
is necessary yet we already have this many threads running, the incoming thread
(that is calling add/updateDocument) will block until a merge thread has
completed.  Note that Lucene will only run the smallest maxThreadCount merges
at a time. See the
<a href="https://lucene.apache.org/core/5_5_0/core/org/apache/lucene/index/ConcurrentMergeScheduler.html#setDefaultMaxMergesAndThreads(boolean)" class="external" target="_blank" rel="noopener">
Lucene documentation</a> for further details.</p>
</div>
<div class="paragraph">
<p>Defaults to -1 for (auto detection).</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.name.maxThreadCount"></a>index.name.maxThreadCount</dt>
<dd>
<div class="paragraph">
<p>Determines the max number of simultaneous Lucene merge threads that should be running at
once. This must be less than or equal to maxMergeCount. See the
<a href="https://lucene.apache.org/core/5_5_0/core/org/apache/lucene/index/ConcurrentMergeScheduler.html#setDefaultMaxMergesAndThreads(boolean)" class="external" target="_blank" rel="noopener">
Lucene documentation</a> for further details.</p>
</div>
<div class="paragraph">
<p>For further details on Lucene index configuration (auto detection) which
affects maxThreadCount and maxMergeCount settings.
See the
<a href="https://lucene.apache.org/core/5_5_0/core/org/apache/lucene/index/ConcurrentMergeScheduler.html#AUTO_DETECT_MERGES_AND_THREADS" class="external" target="_blank" rel="noopener">
Lucene documentation</a></p>
</div>
<div class="paragraph">
<p>Defaults to -1 for (auto detection).</p>
</div>
</dd>
<dt class="hdlist1"><a id="index.name.enableAutoIOThrottle"></a>index.name.enableAutoIOThrottle</dt>
<dd>
<div class="paragraph">
<p>Allows the control of whether automatic IO throttling is enabled and used by
default in the lucene merge queue.  Automatic dynamic IO throttling, which when
on is used to adaptively rate limit writes bytes/sec to the minimal rate necessary
so merges do not fall behind. See the
<a href="https://lucene.apache.org/core/5_5_0/core/org/apache/lucene/index/ConcurrentMergeScheduler.html#enableAutoIOThrottle()" class="external" target="_blank" rel="noopener">
Lucene documentation</a> for further details.</p>
</div>
<div class="paragraph">
<p>Defaults to true (throttling enabled).</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Sample Lucene index configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[index]
  type = LUCENE

[index "changes_open"]
  ramBufferSize = 60 m
  maxBufferedDocs = 3000
  maxThreadCount = 5
  maxMergeCount = 50


[index "changes_closed"]
  ramBufferSize = 20 m
  maxBufferedDocs = 500
  maxThreadCount = 10
  maxMergeCount = 100
  enableIOThrottle = false</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="elasticsearch">Section elasticsearch</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Support for Elasticsearch is still experimental and is not recommended
for production use. For compatibility information, please refer to the
<a href="https://www.gerritcodereview.com/elasticsearch.html" class="external" target="_blank" rel="noopener">project homepage</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that when Gerrit is configured to use Elasticsearch, the Elasticsearch
server(s) must be reachable during the site initialization.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="elasticsearch.prefix"></a>elasticsearch.prefix</dt>
<dd>
<div class="paragraph">
<p>This setting can be used to prefix index names to allow multiple Gerrit
instances in a single Elasticsearch cluster. Prefix <code>gerrit1_</code> would result in a
change index named <code>gerrit1_changes_0001</code>.</p>
</div>
<div class="paragraph">
<p>Not set by default.</p>
</div>
</dd>
<dt class="hdlist1"><a id="elasticsearch.server"></a>elasticsearch.server</dt>
<dd>
<div class="paragraph">
<p>Elasticsearch server URI in the form <code>http[s]://hostname:port</code>. The <code>port</code> is
optional and defaults to <code>9200</code> if not specified.</p>
</div>
<div class="paragraph">
<p>At least one server must be specified. May be specified multiple times to
configure multiple Elasticsearch servers.</p>
</div>
<div class="paragraph">
<p>Note that the site initialization program only allows to configure a single
server. To configure multiple servers the <code>gerrit.config</code> file must be edited
manually.</p>
</div>
</dd>
<dt class="hdlist1"><a id="elasticsearch.numberOfShards"></a>elasticsearch.numberOfShards</dt>
<dd>
<div class="paragraph">
<p>Sets the number of shards to use per index. Refer to the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#_static_index_settings" class="external" target="_blank" rel="noopener">
Elasticsearch documentation</a> for details.</p>
</div>
<div class="paragraph">
<p>Defaults to 1.</p>
</div>
</dd>
<dt class="hdlist1"><a id="elasticsearch.numberOfReplicas"></a>elasticsearch.numberOfReplicas</dt>
<dd>
<div class="paragraph">
<p>Sets the number of replicas to use per index. Refer to the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#dynamic-index-settings" class="external" target="_blank" rel="noopener">
Elasticsearch documentation</a> for details.</p>
</div>
<div class="paragraph">
<p>Defaults to 1.</p>
</div>
</dd>
<dt class="hdlist1"><a id="elasticsearch.maxResultWindow"></a>elasticsearch.maxResultWindow</dt>
<dd>
<div class="paragraph">
<p>Sets the maximum value of <code>from + size</code> for searches to use per index. Refer to the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#dynamic-index-settings" class="external" target="_blank" rel="noopener">
Elasticsearch documentation</a> for details.</p>
</div>
<div class="paragraph">
<p>Defaults to 10000.</p>
</div>
</dd>
<dt class="hdlist1"><a id="elasticsearch.connectTimeout"></a>elasticsearch.connectTimeout</dt>
<dd>
<div class="paragraph">
<p>Sets the timeout for connecting to elasticsearch.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>1 second</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="elasticsearch.socketTimeout"></a>elasticsearch.socketTimeout</dt>
<dd>
<div class="paragraph">
<p>Sets the timeout for the underlying connection. For more information, refer to
<a href="#httpd.idleTimeout"><code>httpd.idleTimeout</code></a>.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>30 seconds</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_elasticsearch_security">Elasticsearch Security</h4>
<div class="paragraph">
<p>When security is enabled in Elasticsearch, the username and password must be provided.
Note that the same username and password are used for all servers.</p>
</div>
<div class="paragraph">
<p>For further information about Elasticsearch security, please refer to
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-getting-started.html" class="external" target="_blank" rel="noopener">the documentation</a>.
This is the current documentation link. Select another Elasticsearch version
from the dropdown menu available on that page if need be.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="elasticsearch.username"></a>elasticsearch.username</dt>
<dd>
<div class="paragraph">
<p>Username used to connect to Elasticsearch.</p>
</div>
<div class="paragraph">
<p>If a password is set, defaults to <code>elastic</code>, otherwise not set by default.</p>
</div>
</dd>
<dt class="hdlist1"><a id="elasticsearch.password"></a>elasticsearch.password</dt>
<dd>
<div class="paragraph">
<p>Password used to connect to Elasticsearch.</p>
</div>
<div class="paragraph">
<p>Not set by default.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="event">Section event</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="event.payload.listChangeOptions"></a>events.payload.listChangeOptions</dt>
<dd>
<div class="paragraph">
<p>List of options that Gerrit applies when rendering the payload of an
internal event. This is the same set of options that are documented
<a href="rest-api-changes.html#query-options">here</a>.</p>
</div>
<div class="paragraph">
<p>Depending on the setup, these events might get serialized using stream
events.</p>
</div>
<div class="paragraph">
<p>This can be set to the set of minimal options that consumers of Gerrit&#8217;s
events need. A minimal set would be (<code>SKIP_DIFFSTAT</code>).</p>
</div>
<div class="paragraph">
<p>Every option that gets added here will have a performance impact. The
general recommendation is therefore to set this to a minimal set of
required options.</p>
</div>
<div class="paragraph">
<p>Defaults to all available options minus <code>CHANGE_ACTIONS</code>,
<code>CURRENT_ACTIONS</code> and <code>CHECK</code>. This is a rich default to make sure the
config is backwards compatible with what the default was before the config
was added.</p>
</div>
</dd>
<dt class="hdlist1"><a id="event.comment-added.publishPatchSetLevelComment"></a>event.comment-added.publishPatchSetLevelComment</dt>
<dd>
<div class="paragraph">
<p>Add patch set level comment as event comment. Without this option, patch set
level comment will not be included in the event comment attribute. Given that
currently patch set level, file and robot comments are not exposed in the
<code>comment-added</code> event type, those comments will be lost. One particular use
case is to re-trigger CI build from the change screen by adding a comment with
specific content, e.g.: <code>recheck</code>. Jenkins Gerrit Trigger plugin and Zuul CI
depend on this feature to trigger change verification.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="experiments">Section experiments</h3>
<div class="paragraph">
<p>This section covers experimental new features. Gerrit uses experiments
to research new behavior in frontend and core backend. Once the research is done, the experimental
feature either stays and the experimentation flag gets removed, or the feature as a whole
gets removed</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="experiments.enabled"></a>experiments.enabled</dt>
<dd>
<div class="paragraph">
<p>List of experiments that are currently enabled. The release notes contain currently
available experiments.</p>
</div>
<div class="paragraph">
<p>We will not remove experiments in stable patch releases. They are likely to be
removed in the next stable version.</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>[experiments]
  enabled = ExperimentKey</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="experiments.disabled"></a>experiments.disabled</dt>
<dd>
<div class="paragraph">
<p>List of experiments that are currently disabled. The release notes contain currently
available experiments. This list disables experiments with the given key that are
either enabled by default or explicitly in the config.</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>[experiments]
  disabled = ExperimentKey</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ldap">Section ldap</h3>
<div class="paragraph">
<p>LDAP integration is only enabled if <code>auth.type</code> is set to
<code>HTTP_LDAP</code>, <code>LDAP</code> or <code>CLIENT_SSL_CERT_LDAP</code>.  See above for a
detailed description of the <code>auth.type</code> settings and their
implications.</p>
</div>
<div class="paragraph">
<p>An example LDAP configuration follows, and then discussion of
the parameters introduced here.  Suitable defaults for most
parameters are automatically guessed based on the type of server
detected during startup.  The guessed defaults support
<a href="http://www.ietf.org/rfc/rfc2307.txt" class="external" target="_blank" rel="noopener">RFC 2307</a>, Active
Directory and <a href="https://www.freeipa.org" class="external" target="_blank" rel="noopener">FreeIPA</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[ldap]
  server = ldap://ldap.example.com

  accountBase = ou=people,dc=example,dc=com
  accountPattern = (&amp;(objectClass=person)(uid=${username}))
  accountFullName = displayName
  accountEmailAddress = mail

  groupBase = ou=groups,dc=example,dc=com
  groupMemberPattern = (&amp;(objectClass=group)(member=${dn}))</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="ldap.guessRelevantGroups"></a>ldap.guessRelevantGroups</dt>
<dd>
<div class="paragraph">
<p>Filter the groups found in LDAP by guessing the ones relevant to
Gerrit and removing the others from list completions and ACL evaluations.
The guess is based on two elements: the projects most recently
accessed in the cache and the list of LDAP groups included in their ACLs.</p>
</div>
<div class="paragraph">
<p>Please note that projects rarely used and thus not cached may be
temporarily inaccessible by users even with LDAP membership and grants
referenced in the ACLs.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.server"></a>ldap.server</dt>
<dd>
<div class="paragraph">
<p>URL of the organization&#8217;s LDAP server to query for user information
and group membership from.  Must be of the form <code>ldap://host</code> or
<code>ldaps://host</code> to bind with either a plaintext or SSL connection.</p>
</div>
<div class="paragraph">
<p>If <code>auth.type</code> is <code>LDAP</code> this setting should use <code>ldaps://</code> to
ensure the end user&#8217;s plaintext password is transmitted only over
an encrypted connection.</p>
</div>
<div class="paragraph">
<p>If you want to configure multiple ldap servers you can try to put
multiple ldap urls separated by a space:
<code>server = ldaps://ldap1 ldaps://ldap2</code>
See <a href="https://bugs.chromium.org/p/gerrit/issues/detail?id=10841">issue 10841</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.startTls"></a>ldap.startTls</dt>
<dd>
<div class="paragraph">
<p>If true, Gerrit will perform StartTLS extended operation.</p>
</div>
<div class="paragraph">
<p>By default, false, StartTLS will not be enabled.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.supportAnonymous"></a>ldap.supportAnonymous</dt>
<dd>
<div class="paragraph">
<p>If false, Gerrit will provide credentials only at connection open, this is
required for some <code>LDAP</code> implementations that do not allow anonymous bind
for StartTLS or for reauthentication.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.sslVerify"></a>ldap.sslVerify</dt>
<dd>
<div class="paragraph">
<p>If false and ldap.server is an <code>ldaps://</code> style URL or <code>ldap.startTls</code>
is true, Gerrit will not verify the server certificate when it connects
to perform a query.</p>
</div>
<div class="paragraph">
<p>By default, true, requiring the certificate to be verified.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.groupsVisibleToAll"></a>ldap.groupsVisibleToAll</dt>
<dd>
<div class="paragraph">
<p>If true, LDAP groups are visible to all registered users.</p>
</div>
<div class="paragraph">
<p>By default, false, LDAP groups are visible only to administrators and
group members.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.username"></a>ldap.username</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Username to bind to the LDAP server with.  If not set,
an anonymous connection to the LDAP server is attempted.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.password"></a>ldap.password</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Password for the user identified by <code>ldap.username</code>.
If not set, an anonymous (or passwordless) connection to the LDAP
server is attempted.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.referral"></a>ldap.referral</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> How an LDAP referral should be handled if it is
encountered during directory traversal.  Set to <code>follow</code> to
automatically follow any referrals, or <code>ignore</code> to ignore the
referrals.</p>
</div>
<div class="paragraph">
<p>By default, <code>ignore</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.readTimeout"></a>ldap.readTimeout</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> The read timeout for an LDAP operation. The value is
in the usual time-unit format like "1 s", "100 ms", etc&#8230;&#8203;
A timeout can be used to avoid blocking all of the SSH command start
threads in case the LDAP server becomes slow.</p>
</div>
<div class="paragraph">
<p>By default there is no timeout and Gerrit will wait for the LDAP
server to respond until the TCP connection times out.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountBase"></a>ldap.accountBase</dt>
<dd>
<div class="paragraph">
<p>Root of the tree containing all user accounts.  This is typically
of the form <code>ou=people,dc=example,dc=com</code>.</p>
</div>
<div class="paragraph">
<p>This setting may be added multiple times to specify more than
one root.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountScope"></a>ldap.accountScope</dt>
<dd>
<div class="paragraph">
<p>Scope of the search performed for accounts.  Must be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>one</code>: Search only one level below accountBase, but not recursive</p>
</li>
<li>
<p><code>sub</code> or <code>subtree</code>: Search recursively below accountBase</p>
</li>
<li>
<p><code>base</code> or <code>object</code>: Search exactly accountBase; probably not desired</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default is <code>subtree</code> as many directories have several levels.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountPattern"></a>ldap.accountPattern</dt>
<dd>
<div class="paragraph">
<p>Query pattern to use when searching for a user account.  This may be
any valid LDAP query expression, including the standard <code>(&amp;&#8230;&#8203;)</code> and
<code>(|&#8230;&#8203;)</code> operators.  If <code>auth.type</code> is <code>HTTP_LDAP</code> then the variable
<code>${username}</code> is replaced with a parameter set to the username
that was supplied by the HTTP server.  If <code>auth.type</code> is <code>LDAP</code> then
the variable <code>${username}</code> is replaced by the string entered by
the end user.</p>
</div>
<div class="paragraph">
<p>This pattern is used to search the objects contained directly under
the <code>ldap.accountBase</code> tree.  A typical setting for this parameter
is <code>(uid=${username})</code> or <code>(cn=${username})</code>, but the proper
setting depends on the LDAP schema used by the directory server.</p>
</div>
<div class="paragraph">
<p>Default is <code>(uid=${username})</code> for FreeIPA and RFC 2307 servers,
and <code>(&amp;(objectClass=user)(sAMAccountName=${username}))</code>
for Active Directory.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountFullName"></a>ldap.accountFullName</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Name of an attribute on the user account object which
contains the initial value for the user&#8217;s full name field in Gerrit.
Typically this is the <code>displayName</code> property in LDAP, but could
also be <code>legalName</code> or <code>cn</code>.</p>
</div>
<div class="paragraph">
<p>Attribute values may be concatenated with literal strings.  For
example to join given name and surname together, use the pattern
<code>${givenName} ${SN}</code>.</p>
</div>
<div class="paragraph">
<p>If set, users will be unable to modify their full name field, as
Gerrit will populate it only from the LDAP data.</p>
</div>
<div class="paragraph">
<p>Default is <code>displayName</code> for FreeIPA and RFC 2307 servers,
and <code>${givenName} ${sn}</code> for Active Directory.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountEmailAddress"></a>ldap.accountEmailAddress</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Name of an attribute on the user account object which
contains the user&#8217;s Internet email address, as defined by this
LDAP server.</p>
</div>
<div class="paragraph">
<p>Attribute values may be concatenated with literal strings,
for example to set the email address to the lowercase form
of sAMAccountName followed by a constant domain name, use
<code>${sAMAccountName.toLowerCase}@example.com</code>.</p>
</div>
<div class="paragraph">
<p>If set, the preferred email address will be prefilled from LDAP,
but users may still be able to register additional email addresses,
and select a different preferred email address.</p>
</div>
<div class="paragraph">
<p>Default is <code>mail</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountSshUserName"></a>ldap.accountSshUserName</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Name of an attribute on the user account object which
contains the initial value for the user&#8217;s SSH username field in
Gerrit.  Typically this is the <code>uid</code> property in LDAP, but could
also be <code>cn</code>.  Administrators should prefer to match the attribute
corresponding to the user&#8217;s workstation username, as this is what
SSH clients will default to.</p>
</div>
<div class="paragraph">
<p>Attribute values may also be forced to lowercase, or to uppercase in
an expression.  For example, <code>${sAMAccountName.toLowerCase}</code> will
force the value of sAMAccountName, if defined, to be all lowercase.
The suffix <code>.toUpperCase</code> can be used for the other direction.
The suffix <code>.localPart</code> can be used to split attribute values of
the form '<a href="mailto:user@example.com">user@example.com</a>' and return only the left hand side, for
example <code>${userPrincipalName.localPart}</code> would provide only 'user'.</p>
</div>
<div class="paragraph">
<p>If set, users will be unable to modify their SSH username field, as
Gerrit will populate it only from the LDAP data. Note that once the
username has been set it cannot be changed, therefore it is
recommended not to make changes to this setting that would cause the
value to differ, as this will prevent users from logging in.</p>
</div>
<div class="paragraph">
<p>Default is <code>uid</code> for FreeIPA and RFC 2307 servers,
and <code>${sAMAccountName.toLowerCase}</code> for Active Directory.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountMemberField"></a>ldap.accountMemberField</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Name of an attribute on the user account object which
contains the groups the user is part of. Typically used for Active
Directory and FreeIPA servers.</p>
</div>
<div class="paragraph">
<p>Default is unset for RFC 2307 servers (disabled)
and <code>memberOf</code> for Active Directory and FreeIPA.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.accountMemberExpandGroups"></a>ldap.accountMemberExpandGroups</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Whether to expand nested groups recursively. This
setting is used only if <code>ldap.accountMemberField</code> is set.</p>
</div>
<div class="paragraph">
<p>Default is unset for FreeIPA and <code>true</code> for RFC 2307 servers
and Active Directory.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.fetchMemberOfEagerly"></a>ldap.fetchMemberOfEagerly</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Whether to fetch the <code>memberOf</code> account attribute on
login. Setups which use LDAP for user authentication but don&#8217;t make
use of the LDAP groups may benefit from setting this option to <code>false</code>
as this will result in a much faster LDAP login.</p>
</div>
<div class="paragraph">
<p>Default is unset for RFC 2307 servers (disabled) and <code>true</code> for
Active Directory and FreeIPA.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.groupBase"></a>ldap.groupBase</dt>
<dd>
<div class="paragraph">
<p>Root of the tree containing all group objects.  This is typically
of the form <code>ou=groups,dc=example,dc=com</code>.</p>
</div>
<div class="paragraph">
<p>This setting may be added multiple times to specify more than
one root.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.groupScope"></a>ldap.groupScope</dt>
<dd>
<div class="paragraph">
<p>Scope of the search performed for group objects.  Must be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>one</code>: Search only one level below groupBase, but not recursive</p>
</li>
<li>
<p><code>sub</code> or <code>subtree</code>: Search recursively below groupBase</p>
</li>
<li>
<p><code>base</code> or <code>object</code>: Search exactly groupBase; probably not desired</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default is <code>subtree</code> as many directories have several levels.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.groupPattern"></a>ldap.groupPattern</dt>
<dd>
<div class="paragraph">
<p>Query pattern used when searching for an LDAP group to connect
to a Gerrit group.  This may be any valid LDAP query expression,
including the standard <code>(&amp;&#8230;&#8203;)</code> and <code>(|&#8230;&#8203;)</code> operators.  The variable
<code>${groupname}</code> is replaced with the search term supplied by the
group owner.</p>
</div>
<div class="paragraph">
<p>Default is <code>(cn=${groupname})</code> for FreeIPA and RFC 2307 servers,
and <code>(&amp;(objectClass=group)(cn=${groupname}))</code> for Active Directory.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.groupMemberPattern"></a>ldap.groupMemberPattern</dt>
<dd>
<div class="paragraph">
<p>Query pattern to use when searching for the groups that a user
account is currently a member of.  This may be any valid LDAP query
expression, including the standard <code>(&amp;&#8230;&#8203;)</code> and <code>(|&#8230;&#8203;)</code> operators.</p>
</div>
<div class="paragraph">
<p>If <code>auth.type</code> is <code>HTTP_LDAP</code> then the variable <code>${username}</code> is
replaced with a parameter set to the username that was supplied
by the HTTP server.  Other variables appearing in the pattern,
such as <code>${fooBarAttribute}</code>, are replaced with the value of the
corresponding attribute (in this case, <code>fooBarAttribute</code>) as read
from the user&#8217;s account object matched under <code>ldap.accountBase</code>.
Attributes such as <code>${dn}</code> or <code>${uidNumber}</code> may be useful.</p>
</div>
<div class="paragraph">
<p>Default is <code>(|(memberUid=${username})(gidNumber=${gidNumber}))</code> for
RFC 2307, and unset (disabled) for Active Directory and FreeIPA.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.groupName"></a>ldap.groupName</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Name of the attribute on the group object which contains
the value to use as the group name in Gerrit.</p>
</div>
<div class="paragraph">
<p>Typically the attribute name is <code>cn</code> for RFC 2307 and Active Directory
servers.  For other servers the attribute name may differ, for example
<code>apple-group-realname</code> on Apple MacOS X Server.</p>
</div>
<div class="paragraph">
<p>It is also possible to specify a literal string containing a pattern of
attribute values.  For example to create a Gerrit group name consisting of
LDAP group name and group ID, use the pattern <code>${cn} (${gidNumber})</code>.</p>
</div>
<div class="paragraph">
<p>Default is <code>cn</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.mandatoryGroup"></a>ldap.mandatoryGroup</dt>
<dd>
<div class="paragraph">
<p>All users must be a member of this group to allow account creation or
authentication.</p>
</div>
<div class="paragraph">
<p>Setting mandatoryGroup implies enabling of <code>ldap.fetchMemberOfEagerly</code></p>
</div>
<div class="paragraph">
<p>By default, unset.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.localUsernameToLowerCase"></a>ldap.localUsernameToLowerCase</dt>
<dd>
<div class="paragraph">
<p>Converts the local username, that is used to login into the Gerrit
Web UI, to lower case before doing the LDAP authentication. By setting
this parameter to true, a case insensitive login to the Gerrit Web UI
can be achieved.</p>
</div>
<div class="paragraph">
<p>If set, it must be ensured that the local usernames for all existing
accounts are converted to lower case, otherwise a user that has a
local username that contains upper case characters will not be able to login
anymore. The local usernames for the existing accounts can be
converted to lower case by running the server program
<a href="pgm-LocalUsernamesToLowerCase.html">LocalUsernamesToLowerCase</a>.
Please be aware that the conversion of the local usernames to lower
case can&#8217;t be undone. For newly created accounts the local username
will be directly stored in lower case.</p>
</div>
<div class="paragraph">
<p>By default, unset/false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.authentication"></a>ldap.authentication</dt>
<dd>
<div class="paragraph">
<p>Defines how Gerrit authenticates with the server. When set to <code>GSSAPI</code>
Gerrit will use Kerberos. To use kerberos the
<code>java.security.auth.login.config</code> system property must point to a
login to a JAAS configuration file and, if Java 6 is used, the system
property <code>java.security.krb5.conf</code> must point to the appropriate
krb5.ini file with references to the KDC.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Typical jaas.conf.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>KerberosLogin {
    com.sun.security.auth.module.Krb5LoginModule
            required
            useTicketCache=true
            doNotPrompt=true
            renewTGT=true;
};</pre>
</div>
</div>
<div class="paragraph">
<p>See Java documentation on how to create the krb5.ini file.</p>
</div>
<div class="paragraph">
<p>Note the <code>renewTGT</code> property to make sure the TGT does not expire,
and <code>useTicketCache</code> to use the TGT supplied by the operating system. As
the whole point of using GSSAPI is to have passwordless authentication
to the LDAP service, this option does not acquire a new TGT on its own.</p>
</div>
<div class="paragraph">
<p>On Windows servers the registry key <code>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Lsa\Kerberos\Parameters</code>
must have the DWORD value <code>allowtgtsessionkey</code> set to 1 and the account must not
have local administrator privileges.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="ldap.useConnectionPooling"></a>ldap.useConnectionPooling</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Enable the LDAP connection pooling or not.</p>
</div>
<div class="paragraph">
<p>If it is true, the LDAP service provider maintains a pool of (possibly)
previously used connections and assigns them to a Context instance as
needed. When a Context instance is done with a connection (closed or
garbage collected), the connection is returned to the pool for future use.</p>
</div>
<div class="paragraph">
<p>For details, see <a href="http://docs.oracle.com/javase/tutorial/jndi/ldap/pool.html" class="external" target="_blank" rel="noopener">
LDAP connection management (Pool)</a> and <a href="http://docs.oracle.com/javase/tutorial/jndi/ldap/config.html" class="external" target="_blank" rel="noopener">
LDAP connection management (Configuration)</a></p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="ldap.connectTimeout"></a>ldap.connectTimeout</dt>
<dd>
<div class="paragraph">
<p><em>(Optional)</em> Timeout period for establishment of an LDAP connection.</p>
</div>
<div class="paragraph">
<p>The value is in the usual time-unit format like "1 s", "100 ms",
etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>By default there is no timeout and Gerrit will wait indefinitely.</p>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="ldap-connection-pooling">LDAP Connection Pooling</h4>
<div class="paragraph">
<p>Once LDAP connection pooling is enabled by setting the <a href="#ldap.useConnectionPooling">
ldap.useConnectionPooling</a> configuration property to <code>true</code>, the connection pool
can be configured using JVM system properties as explained in the
<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-ldap.html#POOL" class="external" target="_blank" rel="noopener">
Java SE Documentation</a>.</p>
</div>
<div class="paragraph">
<p>For standalone Gerrit (running with the embedded Jetty), JVM system properties
are specified in the <a href="#container">container section</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  javaOptions = -Dcom.sun.jndi.ldap.connect.pool.maxsize=20
  javaOptions = -Dcom.sun.jndi.ldap.connect.pool.prefsize=10
  javaOptions = -Dcom.sun.jndi.ldap.connect.pool.timeout=300000</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lfs">Section lfs</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="lfs.plugin"></a>lfs.plugin</dt>
<dd>
<div class="paragraph">
<p>The name of a plugin which serves the
<a href="https://github.com/github/git-lfs/blob/master/docs/api/v1/http-v1-batch.md" class="external" target="_blank" rel="noopener">
LFS protocol</a> on the <code>&lt;project-name&gt;/info/lfs/objects/batch</code> endpoint. When
not configured Gerrit will respond with <code>501 Not Implemented</code> on LFS protocol
requests.</p>
</div>
<div class="paragraph">
<p>By default unset.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="log">Section log</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="log.jsonLogging"></a>log.jsonLogging</dt>
<dd>
<div class="paragraph">
<p>If set to true, enables error, ssh and http logging in JSON format (file names:
<code>logs/error_log.json</code>, <code>logs/sshd_log.json</code> and <code>logs/httpd_log.json</code>).</p>
</div>
<div class="paragraph">
<p>The option only applies to Gerrit built-in loggers. It is ignored when a log4j
configuration is specified via
<a href="#container.javaOptions">container.javaOptions</a>, for example
<code>-Dlog4j.configuration=file://etc/log4j.properties</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="log.textLogging"></a>log.textLogging</dt>
<dd>
<div class="paragraph">
<p>If set to true, enables error logging in regular plain text format. Can only be disabled
if <code>jsonLogging</code> is enabled.</p>
</div>
<div class="paragraph">
<p>The option only applies to Gerrit built-in loggers. It is ignored when a log4j
configuration is specified via
<a href="#container.javaOptions">container.javaOptions</a>, for example
<code>-Dlog4j.configuration=file://etc/log4j.properties</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="log.compress"></a>log.compress</dt>
<dd>
<div class="paragraph">
<p>If set to true, log files are compressed at server startup and then daily at 11pm
(in the server&#8217;s local time zone).</p>
</div>
<div class="paragraph">
<p>Defaults to true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="log.rotate"></a>log.rotate</dt>
<dd>
<div class="paragraph">
<p>If set to true, log files are rotated daily at midnight (GMT).</p>
</div>
<div class="paragraph">
<p>Defaults to true.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="mimetype">Section mimetype</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="mimetype.name.safe"></a>mimetype.&lt;name&gt;.safe</dt>
<dd>
<div class="paragraph">
<p>If set to true, files with the MIME type <code>&lt;name&gt;</code> will be sent as
direct downloads to the user&#8217;s browser, rather than being wrapped up
inside of zipped archives.  The type name may be a complete type
name, e.g. <code>image/gif</code>, a generic media type, e.g. <code>image/*</code>,
or the wildcard <code>*/*</code> to match all types.</p>
</div>
<div class="paragraph">
<p>By default, false for all MIME types.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Common examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[mimetype "image/*"]
  safe = true

[mimetype "application/pdf"]
  safe = true

[mimetype "application/msword"]
  safe = true

[mimetype "application/vnd.ms-excel"]
  safe = true</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="note-db">Section noteDb</h3>
<div class="paragraph">
<p>NoteDb is the Git-based database storage backend for Gerrit. For more
information, including how to migrate data from an older Gerrit version, see the
<a href="note-db.html">documentation</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="notedb.accounts.sequenceBatchSize"></a>notedb.accounts.sequenceBatchSize</dt>
<dd>
<div class="paragraph">
<p>The next available account sequence number is stored as UTF-8 text in a
blob pointed to by the <code>refs/sequences/accounts</code> ref in the <code>All-Users</code>
repository. Multiple processes share the same sequence by incrementing
the counter using normal git ref updates. To amortize the cost of these
ref updates, processes increment the counter by a larger number and
hand out numbers from that range in memory until they run out. This
configuration parameter controls the size of the account ID batch that
each process retrieves at once.</p>
</div>
<div class="paragraph">
<p>By default, 1.</p>
</div>
</dd>
<dt class="hdlist1"><a id="notedb.changes.sequenceBatchSize"></a>notedb.changes.sequenceBatchSize</dt>
<dd>
<div class="paragraph">
<p>The next available change sequence number is stored as UTF-8 text in a
blob pointed to by the <code>refs/sequences/changes</code> ref in the <code>All-Projects</code>
repository. Multiple processes share the same sequence by incrementing
the counter using normal git ref updates. To amortize the cost of these
ref updates, processes increment the counter by a larger number and
hand out numbers from that range in memory until they run out. This
configuration parameter controls the size of the change ID batch that
each process retrieves at once.</p>
</div>
<div class="paragraph">
<p>By default, 20.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="oauth">Section oauth</h3>
<div class="paragraph">
<p>OAuth integration is only enabled if <code>auth.type</code> is set to <code>OAUTH</code>. See
<a href="#auth.type">above</a> for a detailed description of the <code>auth.type</code> settings
and their implications.</p>
</div>
<div class="paragraph">
<p>By default, contact information, like the full name and email address,
is retrieved from the selected OAuth provider when a user account is created,
or when a user requests to reload that information in the settings UI. If
that is not supported by the OAuth provider, users can be allowed to edit
their contact information manually.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="oauth.allowEditFullName"></a>oauth.allowEditFullName</dt>
<dd>
<div class="paragraph">
<p>If true, the full name can be edited in the contact information.</p>
</div>
<div class="paragraph">
<p>Default is false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="oauth.allowRegisterNewEmail"></a>oauth.allowRegisterNewEmail</dt>
<dd>
<div class="paragraph">
<p>If true, additional email addresses can be registered in the contact
information.</p>
</div>
<div class="paragraph">
<p>Default is false.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="operator-alias">Section operator alias</h3>
<div class="paragraph">
<p>Operator aliasing allows global aliases to be defined for query operators.
Currently only change queries are supported. The alias name is the git
config key name, and the operator being aliased is the git config value.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[operator-alias "change"]
  oldage = age
  number = change</pre>
</div>
</div>
<div class="paragraph">
<p>This section is particularly useful to alias operator names which may be
long and clunky because they include a plugin name in them to a shorter
name without the plugin name.</p>
</div>
<div class="paragraph">
<p>Aliases are resolved dynamically at invocation time to any currently
loaded versions of plugins. If the alias points to an operator provided
by a plugin which is not currently loaded, or the plugin does not define
the operator, then "unsupported operator" is returned to the user.</p>
</div>
<div class="paragraph">
<p>Aliases will override existing operators. In the case of multiple aliases
with the same name, the last one defined will be used.</p>
</div>
<div class="paragraph">
<p>When the target of an alias doesn&#8217;t exist, the operator with the name
of the alias will be used (if present). This enables an admin to config
the system to override a core operator with an operator provided by a
plugin when present and otherwise fall back to the operator provided by
core.</p>
</div>
</div>
<div class="sect2">
<h3 id="pack">Section pack</h3>
<div class="paragraph">
<p>Global settings controlling how Gerrit Code Review creates pack
streams for Git clients running clone, fetch, or pull.  Most of these
variables are per-client request, and thus should be carefully set
given the expected concurrent request load and available CPU and
memory resources.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="pack.deltacompression"></a>pack.deltacompression</dt>
<dd>
<div class="paragraph">
<p>If true, delta compression between objects is enabled.  This may
result in a smaller overall transfer for the client, but requires
more server memory and CPU time.</p>
</div>
<div class="paragraph">
<p>False (off) by default, matching Gerrit Code Review 2.1.4.</p>
</div>
</dd>
<dt class="hdlist1"><a id="pack.threads"></a>pack.threads</dt>
<dd>
<div class="paragraph">
<p>Maximum number of threads to use for delta compression (if enabled).
This is per-client request.  If set to 0 then the number of CPUs is
auto-detected and one thread per CPU is used, per client request.</p>
</div>
<div class="paragraph">
<p>By default, 1.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="plugins">Section plugins</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="plugins.checkFrequency"></a>plugins.checkFrequency</dt>
<dd>
<div class="paragraph">
<p>How often plugins should be examined for new plugins to load, removed
plugins to be unloaded, or updated plugins to be reloaded.  Values can
be specified using standard time unit abbreviations ('ms', 'sec',
'min', etc.).</p>
</div>
<div class="paragraph">
<p>If set to 0, automatic plugin reloading is disabled.  Administrators
may force reloading with <a href="cmd-plugin-reload.html">gerrit plugin reload</a>.</p>
</div>
<div class="paragraph">
<p>Default is 1 minute.</p>
</div>
</dd>
<dt class="hdlist1"><a id="plugins.allowRemoteAdmin"></a>plugins.allowRemoteAdmin</dt>
<dd>
<div class="paragraph">
<p>Enable remote installation, enable and disable of plugins over HTTP
and SSH.  If set to true Administrators can install new plugins
remotely, or disable existing plugins.  Defaults to false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="plugins.mandatory"></a>plugins.mandatory</dt>
<dd>
<div class="paragraph">
<p>List of mandatory plugins. If a plugin from this list does not load,
Gerrit will fail to start.</p>
</div>
<div class="paragraph">
<p>Disabling and restarting of a mandatory plugin is rejected, but reloading
of a mandatory plugin is still possible.</p>
</div>
</dd>
<dt class="hdlist1"><a id="plugins.jsLoadTimeout"></a>plugins.jsLoadTimeout</dt>
<dd>
<div class="paragraph">
<p>Set the timeout value for loading JavaScript plugins in Gerrit UI.
Values can be specified using standard time unit abbreviations ('ms',
'sec', 'min', etc.).</p>
</div>
<div class="paragraph">
<p>Default is 5 seconds. Negative values will be converted to 0.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="receive">Section receive</h3>
<div class="paragraph">
<p>This section is used to configure behavior of the 'receive-pack'
handler, which responds to 'git push' requests.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="receive.allowGroup"></a>receive.allowGroup</dt>
<dd>
<div class="paragraph">
<p>Name of the groups of users that are allowed to execute
'receive-pack' on the server. One or more groups can be set.</p>
</div>
<div class="paragraph">
<p>If no groups are added, any user will be allowed to execute
'receive-pack' on the server.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.certNonceSeed"></a>receive.certNonceSeed</dt>
<dd>
<div class="paragraph">
<p>If set to a non-empty value and server-side signed push validation is
<a href="#receive.enableSignedPush">enabled</a>, use this value as the seed to
the HMAC SHA-1 nonce generator. If unset, a 64-byte random seed will be
generated at server startup.</p>
</div>
<div class="paragraph">
<p>As this is used as the seed of a cryptographic algorithm, it is
recommended to be placed in <a href="#secure-config"><code>secure.config</code></a>.</p>
</div>
<div class="paragraph">
<p>Defaults to unset.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.certNonceSlop"></a>receive.certNonceSlop</dt>
<dd>
<div class="paragraph">
<p>When validating the nonce passed as part of the signed push protocol,
accept valid nonces up to this many seconds old. This allows
certificate verification to work over HTTP where there is a lag between
the HTTP response providing the nonce to sign and the next request
containing the signed nonce. This can be significant on large
repositories, since the lag also includes the time to count objects on
the client.</p>
</div>
<div class="paragraph">
<p>Default is 5 minutes.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.changeUpdateThreads"></a>receive.changeUpdateThreads</dt>
<dd>
<div class="paragraph">
<p>Number of threads to perform change creation or patch set updates
concurrently. Each thread uses its own database connection from
the database connection pool, and if all threads are busy then
main receive thread will also perform a change creation or patch
set update.</p>
</div>
<div class="paragraph">
<p>Defaults to 1, using only the main receive thread. This feature is for
databases with very high latency that can benefit from concurrent
operations when multiple changes are impacted at once.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.checkMagicRefs"></a>receive.checkMagicRefs</dt>
<dd>
<div class="paragraph">
<p>If true, Gerrit will verify the destination repository has
no references under the magic 'refs/for' branch namespace. Names under
these locations confuse clients when trying to upload code reviews so
Gerrit requires them to be empty.</p>
</div>
<div class="paragraph">
<p>If false Gerrit skips the sanity check and assumes administrators
have ensured the repository does not contain any magic references.
Setting to false to skip the check can decrease latency during push.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.allowProjectOwnersToChangeParent"></a>receive.allowProjectOwnersToChangeParent</dt>
<dd>
<div class="paragraph">
<p>If true, Gerrit will allow project owners to change the parent of a project.</p>
</div>
<div class="paragraph">
<p>By default only Gerrit administrators are allowed to change the parent
of a project. By allowing project owners to change parents, it may
allow the owner to circumvent certain enforced rules (like important
BLOCK rules).</p>
</div>
<div class="paragraph">
<p>Default is false.</p>
</div>
<div class="paragraph">
<p>This value supports configuration reloads:
<a href="cmd-reload-config.html">reload-config</a></p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.checkReferencedObjectsAreReachable"></a>receive.checkReferencedObjectsAreReachable</dt>
<dd>
<div class="paragraph">
<p>If set to true, Gerrit will validate that all referenced objects that
are not included in the received pack are reachable by the user.</p>
</div>
<div class="paragraph">
<p>Carrying out this check on gits with many refs and commits can be a
very CPU-heavy operation. For non public Gerrit-servers this check may
be overkill.</p>
</div>
<div class="paragraph">
<p>Only disable this check if you trust the clients not to forge SHA-1
references to access commits intended to be hidden from the user.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.enableInMemoryRefCache"></a>receive.enableInMemoryRefCache</dt>
<dd>
<div class="paragraph">
<p>If true, Gerrit will cache all refs advertised during push in memory and
base later receive operations on that cache.</p>
</div>
<div class="paragraph">
<p>Turning this cache off is considered experimental.</p>
</div>
<div class="paragraph">
<p>This cache provides value when the ref database is slow and/or does not
offer an inverse lookup of object ID to ref name. When RefTable is used,
this cache can be turned off (experimental) to get speed improvements.</p>
</div>
<div class="paragraph">
<p>Default is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.enableSignedPush"></a>receive.enableSignedPush</dt>
<dd>
<div class="paragraph">
<p>If true, server-side signed push validation is enabled.</p>
</div>
<div class="paragraph">
<p>When a client pushes with <code>git push --signed</code>, this ensures that the
push certificate is valid and signed with a valid public key stored in
the <code>refs/meta/gpg-keys</code> branch of <code>All-Users</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.maxBatchChanges"></a>receive.maxBatchChanges</dt>
<dd>
<div class="paragraph">
<p>The maximum number of changes that Gerrit allows to be pushed
in a batch for review. When this number is exceeded Gerrit rejects
the push with an error message.</p>
</div>
<div class="paragraph">
<p>May be overridden for certain groups by specifying a limit in the
<a href="access-control.html#capability_batchChangesLimit">'Batch Changes Limit'</a>
global capability.</p>
</div>
<div class="paragraph">
<p>This setting can be used to prevent users from uploading large
number of changes for review by mistake.</p>
</div>
<div class="paragraph">
<p>Default is zero, no limit.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.maxBatchCommits"></a>receive.maxBatchCommits</dt>
<dd>
<div class="paragraph">
<p>The maximum number of commits that Gerrit allows to be pushed in a batch
directly to a branch when <a href="user-upload.html#bypass_review">bypassing review</a>.
This limit can be bypassed if a user <a href="user-upload.html#skip_validation">skips
validation</a>.</p>
</div>
<div class="paragraph">
<p>Default is 10000.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.maxObjectSizeLimit"></a>receive.maxObjectSizeLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum allowed Git object size that 'receive-pack' will accept.
If an object is larger than the given size the pack-parsing will abort
and the push operation will fail. If set to zero then there is no
limit.</p>
</div>
<div class="paragraph">
<p>Gerrit administrators can use this setting to prevent developers
from pushing objects which are too large to Gerrit.</p>
</div>
<div class="paragraph">
<p>This setting can also be set in the <code>project.config</code>
(<a href="config-project-config.html">receive.maxObjectSizeLimit</a>) in order
to further reduce the global setting. The project specific setting is
only honored when it further reduces the global limit.</p>
</div>
<div class="paragraph">
<p>Default is zero.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.inheritProjectMaxObjectSizeLimit"></a>receive.inheritProjectMaxObjectSizeLimit</dt>
<dd>
<div class="paragraph">
<p>Controls whether the project-level <a href="config-project-config.html"><code>receive.maxObjectSizeLimit</code></a>
value is inherited from the parent project. When <code>true</code>, the value is
inherited, otherwise it is not inherited.</p>
</div>
<div class="paragraph">
<p>Default is false, the value is not inherited.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.maxTrustDepth"></a>receive.maxTrustDepth</dt>
<dd>
<div class="paragraph">
<p>If signed push validation is <a href="#receive.enableSignedPush">enabled</a>,
set to the maximum depth to search when checking if a key is
<a href="#receive.trustedKey">trusted</a>.</p>
</div>
<div class="paragraph">
<p>Default is 0, meaning only explicitly trusted keys are allowed.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.threadPoolSize"></a>receive.threadPoolSize</dt>
<dd>
<div class="paragraph">
<p>Maximum size of the thread pool in which the change data in received packs is
processed.</p>
</div>
<div class="paragraph">
<p>Defaults to the number of available CPUs according to the Java runtime.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.timeout"></a>receive.timeout</dt>
<dd>
<div class="paragraph">
<p>Overall timeout on the time taken to process the change data in
received packs. Only includes the time processing Gerrit changes
and updating references, not the time to index the pack. Values can
be specified using standard time unit abbreviations ('ms', 'sec',
'min', etc.).</p>
</div>
<div class="paragraph">
<p>Default is 4 minutes. If no unit is specified, milliseconds
is assumed.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receive.trustedKey"></a>receive.trustedKey</dt>
<dd>
<div class="paragraph">
<p>List of GPG key fingerprints that should be considered trust roots by
the server when signed push validation is
<a href="#receive.enableSignedPush">enabled</a>. A key is trusted by the server
if it is either in this list, or a path of trust signatures leads from
the key to a configured trust root. The maximum length of the path is
determined by <a href="#receive.maxTrustDepth"><code>receive.maxTrustDepth</code></a>.</p>
</div>
<div class="paragraph">
<p>Key fingerprints can be displayed with <code>gpg --list-keys
--with-fingerprint</code>.</p>
</div>
<div class="paragraph">
<p>Trust signatures can be added to a key using the <code>tsign</code> command to
<a href="https://www.gnupg.org/documentation/manuals/gnupg/OpenPGP-Key-Management.html" class="external" target="_blank" rel="noopener">
<code>gpg --edit-key</code></a>, after which the signed key should be re-uploaded.</p>
</div>
<div class="paragraph">
<p>If no keys are specified, web-of-trust checks are disabled. This is the
default behavior.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="repository">Section repository</h3>
<div class="paragraph">
<p>Repositories in this sense are the same as projects.</p>
</div>
<div class="paragraph">
<p>In the following example configuration <code>Registered Users</code> is set
to be the default owner of new projects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[repository "*"]
  ownerGroup = Registered Users</pre>
</div>
</div>
<div class="paragraph">
<p>The only matching patterns supported are exact match or wildcard matching which
can be specified by ending the name with a <code>*</code>. If a project matches more than one
repository configuration, then the configuration from the more precise match
will be used. In the following example, the default submit type for a project
named <code>project/plugins/a</code> would be <code>CHERRY_PICK</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[repository "project/*"]
  defaultSubmitType = MERGE_IF_NECESSARY
[repository "project/plugins/*"]
  defaultSubmitType = CHERRY_PICK</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All properties are used from the matching repository configuration. In
the previous example, all properties will be used from <code>project/plugins/*</code>
section and no properties will be inherited nor overridden from <code>project/*</code>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="repository.name.basePath"></a>repository.&lt;name&gt;.basePath</dt>
<dd>
<div class="paragraph">
<p>Alternate to <a href="#gerrit.basePath">gerrit.basePath</a>. The repository will be created
and used from this location instead: ${alternateBasePath}/${projectName}.git.</p>
</div>
<div class="paragraph">
<p>If configuring the basePath for an existing project in gerrit, make sure to stop
gerrit, move the repository in the alternate basePath, configure basePath for
this repository and then start Gerrit.</p>
</div>
<div class="paragraph">
<p>Path must be absolute.</p>
</div>
</dd>
<dt class="hdlist1"><a id="repository.name.defaultSubmitType"></a>repository.&lt;name&gt;.defaultSubmitType</dt>
<dd>
<div class="paragraph">
<p>The default submit type for newly created projects. Supported values
are <code>INHERIT</code>, <code>MERGE_IF_NECESSARY</code>, <code>FAST_FORWARD_ONLY</code>, <code>REBASE_IF_NECESSARY</code>,
<code>REBASE_ALWAYS</code>, <code>MERGE_ALWAYS</code> and <code>CHERRY_PICK</code>.</p>
</div>
<div class="paragraph">
<p>For more details see <a href="config-project-config.html#submit-type">Submit Types</a>.</p>
</div>
<div class="paragraph">
<p>Default is <a href="config-project-config.html#submit_type_inherit"><code>INHERIT</code></a>.</p>
</div>
<div class="paragraph">
<p>This submit type is only applied at project creation time if a submit type is
omitted from the <a href="rest-api-projects.html#project-input">ProjectInput</a>. If the
submit type is unset in the project config at runtime, for backwards
compatibility purposes, it defaults to
<a href="project-configuration.html#merge_if_necessary"><code>MERGE_IF_NECESSARY</code></a> rather
than <code>INHERIT</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="repository.name.ownerGroup"></a>repository.&lt;name&gt;.ownerGroup</dt>
<dd>
<div class="paragraph">
<p>A name of a group which exists in the database. Zero, one or many
groups are allowed.  Each on its own line.  Groups which don&#8217;t exist
in the database are ignored.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="retry">Section retry</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="retry.maxWait"></a>retry.maxWait</dt>
<dd>
<div class="paragraph">
<p>Maximum time to wait between attempts to retry an operations when one attempt
fails (e.g. on NoteDb updates due to contention, aka lock failure, on the
underlying ref storage). Operations are retried with exponential backoff, plus
some random jitter, until the interval reaches this limit. After that, retries
continue to occur after a fixed timeout (plus jitter), up to
<a href="#retry.timeout"><code>retry.timeout</code></a>.</p>
</div>
<div class="paragraph">
<p>Defaults to 5 seconds; unit suffixes are supported, and assumes milliseconds if
not specified.</p>
</div>
</dd>
<dt class="hdlist1"><a id="retry.timeout"></a>retry.timeout</dt>
<dd>
<div class="paragraph">
<p>Total timeout for retrying operations when one attempt fails.</p>
</div>
<div class="paragraph">
<p>It is possible to overwrite this default timeout based on operation types by
setting <a href="#retry.operationType.timeout"><code>retry.&lt;operationType&gt;.timeout</code></a>.</p>
</div>
<div class="paragraph">
<p>Defaults to 20 seconds; unit suffixes are supported, and assumes milliseconds if
not specified.</p>
</div>
</dd>
<dt class="hdlist1"><a id="retry.operationType.timeout"></a>retry.&lt;operationType&gt;.timeout</dt>
<dd>
<div class="paragraph">
<p>Total timeout for retrying operations of type <code>&lt;operationType&gt;</code> when one
attempt fails. <code>&lt;operationType&gt;</code> can be <code>ACCOUNT_UPDATE</code>, <code>CHANGE_UPDATE</code>,
<code>GROUP_UPDATE</code> and <code>INDEX_QUERY</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to <a href="#retry.timeout"><code>retry.timeout</code></a>; unit suffixes are supported,
and assumes milliseconds if not specified.</p>
</div>
</dd>
<dt class="hdlist1"><a id="retry.retryWithTraceOnFailure"></a>retry.retryWithTraceOnFailure</dt>
<dd>
<div class="paragraph">
<p>Whether Gerrit should automatically retry operations on failure with tracing
enabled. The automatically generated traces can help with debugging. Please
note that only some of the REST endpoints support automatic retry.</p>
</div>
<div class="paragraph">
<p>By default this is set to false.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="rules">Section rules</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="rules.enable"></a>rules.enable</dt>
<dd>
<div class="paragraph">
<p>If true, Gerrit will load and execute 'rules.pl' files in each
project&#8217;s refs/meta/config branch, if present. When set to false,
only the default internal rules will be used.</p>
</div>
<div class="paragraph">
<p>Default is true, to execute project specific rules.</p>
</div>
</dd>
<dt class="hdlist1"><a id="rules.reductionLimit"></a>rules.reductionLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum number of Prolog reductions that can be performed when
evaluating rules for a single change. Each function call made
in user rule code, internal Gerrit Prolog code, or the Prolog
interpreter counts against this limit.</p>
</div>
<div class="paragraph">
<p>Sites using very complex rules that need many reductions should
compile Prolog to Java bytecode with <a href="pgm-rulec.html">rulec</a>.
This eliminates the dynamic Prolog interpreter from charging its
own reductions against the limit, enabling more logic to execute
within the same bounds.</p>
</div>
<div class="paragraph">
<p>A reductionLimit of 0 is nearly infinite, implemented by setting
the internal limit to 2^31-1.</p>
</div>
<div class="paragraph">
<p>Default is 100,000 reductions (about 14 ms on Intel Core i7 CPU).</p>
</div>
</dd>
<dt class="hdlist1"><a id="rules.compileReductionLimit"></a>rules.compileReductionLimit</dt>
<dd>
<div class="paragraph">
<p>Maximum number of Prolog reductions that can be performed when
compiling source code to internal Prolog machine code.</p>
</div>
<div class="paragraph">
<p>Default is 10x reductionLimit (1,000,000).</p>
</div>
</dd>
<dt class="hdlist1"><a id="rules.maxSourceBytes"></a>rules.maxSourceBytes</dt>
<dd>
<div class="paragraph">
<p>Maximum input size (in bytes) of a Prolog rules.pl file.  Larger
source files may need a larger rules.compileReductionLimit.  Consider
using <a href="pgm-rulec.html">rulec</a> to precompile larger rule files.</p>
</div>
<div class="paragraph">
<p>A size of 0 bytes disables rules, same as rules.enable = false.</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of 'k', 'm', or 'g' are supported.</p>
</div>
<div class="paragraph">
<p>Default is 128 KiB.</p>
</div>
</dd>
<dt class="hdlist1"><a id="rules.maxPrologDatabaseSize"></a>rules.maxPrologDatabaseSize</dt>
<dd>
<div class="paragraph">
<p>Number of predicate clauses allowed to be defined in the Prolog
database by project rules.  Very complex rules may need more than the
default 256 limit, but cost more memory and may need more time to
evaluate.  Consider using <a href="pgm-rulec.html">rulec</a> to precompile
larger rule files.</p>
</div>
<div class="paragraph">
<p>Default is 256.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="execution">Section execution</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="execution.defaultThreadPoolSize"></a>execution.defaultThreadPoolSize</dt>
<dd>
<div class="paragraph">
<p>The default size of the background execution thread pool in
which miscellaneous tasks are handled.</p>
</div>
<div class="paragraph">
<p>Default and minimum is 2 so that a single, potentially longer executing
task (e.g. GC), is not blocking the entire execution.</p>
</div>
</dd>
<dt class="hdlist1"><a id="execution.fanOutThreadPoolSize"></a>execution.fanOutThreadPoolSize</dt>
<dd>
<div class="paragraph">
<p>Maximum size of thread pool to on which a serving thread can fan-out
work to parallelize it.</p>
</div>
<div class="paragraph">
<p>When set to 0, a direct executor will be used.</p>
</div>
<div class="paragraph">
<p>By default, 25 which means that formatting happens in the caller thread.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="receiveemail">Section receiveemail</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="receiveemail.protocol"></a>receiveemail.protocol</dt>
<dd>
<div class="paragraph">
<p>Specifies the protocol used for receiving emails. Valid options are
'POP3', 'IMAP' and 'NONE'. Note that Gerrit will automatically switch between
POP3 and POP3s as well as IMAP and IMAPS depending on the specified
<a href="#receiveemail.encryption">encryption</a>.</p>
</div>
<div class="paragraph">
<p>Defaults to 'NONE' which means that receiving emails is disabled.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.host"></a>receiveemail.host</dt>
<dd>
<div class="paragraph">
<p>The hostname of the mailserver. Example: 'imap.gmail.com'.</p>
</div>
<div class="paragraph">
<p>Defaults to an empty string which means that receiving emails is disabled.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.port"></a>receiveemail.port</dt>
<dd>
<div class="paragraph">
<p>The port the email server exposes for receiving emails.</p>
</div>
<div class="paragraph">
<p>Defaults to the industry standard for a given protocol and encryption:
POP3: 110; POP3S: 995; IMAP: 143; IMAPS: 993.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.username"></a>receiveemail.username</dt>
<dd>
<div class="paragraph">
<p>Username used for authenticating with the email server.</p>
</div>
<div class="paragraph">
<p>Defaults to an empty string.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.password"></a>receiveemail.password</dt>
<dd>
<div class="paragraph">
<p>Password used for authenticating with the email server.</p>
</div>
<div class="paragraph">
<p>Defaults to an empty string.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.encryption"></a>receiveemail.encryption</dt>
<dd>
<div class="paragraph">
<p>Encryption standard used for transport layer security between Gerrit and the
email server. Possible values include 'NONE', 'SSL' and 'TLS'.</p>
</div>
<div class="paragraph">
<p>Defaults to 'NONE'.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.fetchInterval"></a>receiveemail.fetchInterval</dt>
<dd>
<div class="paragraph">
<p>Time between two consecutive fetches from the email server. Communication with
the email server is not kept alive. Examples: 60s, 10m, 1h.</p>
</div>
<div class="paragraph">
<p>Defaults to 60 seconds.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.enableImapIdle"></a>receiveemail.enableImapIdle</dt>
<dd>
<div class="paragraph">
<p>If the IMAP protocol is used for retrieving emails, IMAPv4 IDLE can be used to
keep the connection with the email server alive and receive a push when a new
email is delivered to the inbox. In this case, Gerrit will process the email
immediately and will not have a fetch delay.</p>
</div>
<div class="paragraph">
<p>Defaults to false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.filter.mode"></a>receiveemail.filter.mode</dt>
<dd>
<div class="paragraph">
<p>An allow and block filter to filter incoming emails.</p>
</div>
<div class="paragraph">
<p>If <code>OFF</code>, emails are not filtered by the list filter.</p>
</div>
<div class="paragraph">
<p>If <code>ALLOW</code>, only emails where a pattern from
<a href="#receiveemail.filter.patterns">receiveemail.filter.patterns</a>
matches 'From' will be processed.</p>
</div>
<div class="paragraph">
<p>If <code>BLOCK</code>, only emails where no pattern from
<a href="#receiveemail.filter.patterns">receiveemail.filter.patterns</a>
matches 'From' will be processed.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>OFF</code>.</p>
</div>
<div class="paragraph">
<p>The previous filter-names 'BLACKLIST' and 'WHITELIST' have been deprecated
since they may be considered disrespectful and there&#8217;s no technical or
practical reason to use these exact terms for the filters.
For backwards compatibility they are still supported but support for these
deprecated terms will be removed in future releases.</p>
</div>
</dd>
<dt class="hdlist1"><a id="receiveemail.filter.patterns"></a>receiveemail.filter.patterns</dt>
<dd>
<div class="paragraph">
<p>A list of regular expressions to match the email sender against. This can also
be a list of addresses when regular expression characters are escaped.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sendemail">Section sendemail</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="sendemail.enable"></a>sendemail.enable</dt>
<dd>
<div class="paragraph">
<p>If false Gerrit will not send email messages, for any reason,
and all other properties of section sendemail are ignored.</p>
</div>
<div class="paragraph">
<p>By default, true, allowing notifications to be sent.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.html"></a>sendemail.html</dt>
<dd>
<div class="paragraph">
<p>If false, Gerrit will only send plain-text emails.
If true, Gerrit will send multi-part emails with an HTML and
plain text part.</p>
</div>
<div class="paragraph">
<p>By default, true, allowing HTML in the emails Gerrit sends.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.connectTimeout"></a>sendemail.connectTimeout</dt>
<dd>
<div class="paragraph">
<p>The connection timeout of opening a socket connected to a
remote SMTP server.</p>
</div>
<div class="paragraph">
<p>Values can be specified using standard time unit abbreviations
('ms', 'sec', 'min', etc.).
If no unit is specified, milliseconds is assumed.</p>
</div>
<div class="paragraph">
<p>Default is 0. A timeout of zero is interpreted as an infinite
timeout. The connection will then block until established or
an error occurs.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.threadPoolSize"></a>sendemail.threadPoolSize</dt>
<dd>
<div class="paragraph">
<p>Maximum size of thread pool in which the review comments
notifications are sent out asynchronously.</p>
</div>
<div class="paragraph">
<p>By default, 1.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.from"></a>sendemail.from</dt>
<dd>
<div class="paragraph">
<p>Designates what name and address Gerrit will place in the From
field of any generated email messages.  The supported values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>USER</code></p>
<div class="paragraph">
<p>Gerrit will set the From header to use the current user&#8217;s
Full Name and Preferred Email.  This may cause messages to be
classified as spam if the user&#8217;s domain has SPF or DKIM enabled
and <a href="#sendemail.smtpServer">sendemail.smtpServer</a> is not a trusted
relay for that domain. You can specify
<a href="#sendemail.allowedDomain">sendemail.allowedDomain</a> to instruct Gerrit to only
send as USER if USER is from those domains.</p>
</div>
</li>
<li>
<p><code>MIXED</code></p>
<div class="paragraph">
<p>Shorthand for <code>${user} (Code Review) &lt;<a href="mailto:review@example.com">review@example.com</a>&gt;</code> where
<code>review@example.com</code> is the same as <a href="#user.email">user.email</a>.
See below for a description of how the replacement is handled.</p>
</div>
</li>
<li>
<p><code>SERVER</code></p>
<div class="paragraph">
<p>Gerrit will set the From header to the same name and address
it records in any commits Gerrit creates.  This is set by
<a href="#user.name">user.name</a> and <a href="#user.email">user.email</a>, or guessed
from the local operating system.</p>
</div>
</li>
<li>
<p><code>Code Review &lt;<a href="mailto:review@example.com">review@example.com</a>&gt;</code></p>
<div class="paragraph">
<p>If set to a name and email address in brackets, Gerrit will use
this name and email address for any messages, overriding the name
that may have been selected for commits by user.name and user.email.
Optionally, the name portion may contain the placeholder <code>${user}</code>,
which is replaced by the Full Name of the current user.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, MIXED.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.allowedDomain"></a>sendemail.allowedDomain</dt>
<dd>
<div class="paragraph">
<p>Only used when <code>sendemail.from</code> is set to <code>USER</code>.
List of allowed domains. If user&#8217;s email matches one of the domains, emails will
be sent as USER, otherwise as MIXED mode. Wildcards may be specified by
including <code>*</code> to match any number of characters, for example <code>*.example.com</code>
matches any subdomain of <code>example.com</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>*</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.smtpServer"></a>sendemail.smtpServer</dt>
<dd>
<div class="paragraph">
<p>Hostname (or IP address) of a SMTP server that will relay
messages generated by Gerrit to end users.</p>
</div>
<div class="paragraph">
<p>By default, 127.0.0.1 (aka localhost).</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.smtpServerPort"></a>sendemail.smtpServerPort</dt>
<dd>
<div class="paragraph">
<p>Port number of the SMTP server in sendemail.smtpserver.</p>
</div>
<div class="paragraph">
<p>By default, 25, or 465 if smtpEncryption is 'ssl'.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.smtpEncryption"></a>sendemail.smtpEncryption</dt>
<dd>
<div class="paragraph">
<p>Specify the encryption to use, either 'ssl' or 'tls'.</p>
</div>
<div class="paragraph">
<p>By default, 'none', indicating no encryption is used.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.sslVerify"></a>sendemail.sslVerify</dt>
<dd>
<div class="paragraph">
<p>If false and sendemail.smtpEncryption is 'ssl' or 'tls', Gerrit
will not verify the server certificate when it connects to send
an email message.</p>
</div>
<div class="paragraph">
<p>By default, true, requiring the certificate to be verified.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.smtpUser"></a>sendemail.smtpUser</dt>
<dd>
<div class="paragraph">
<p>User name to authenticate with, if required for relay.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.smtpPass"></a>sendemail.smtpPass</dt>
<dd>
<div class="paragraph">
<p>Password for the account named by sendemail.smtpUser.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.allowrcpt"></a>sendemail.allowrcpt</dt>
<dd>
<div class="paragraph">
<p>If present, each value adds one entry to the list of allowed email
addresses that Gerrit can send emails to.  If set to a complete
email address, that one address is added to the list of allowed
emails.
If set to a domain name, any address at that domain can receive
email from Gerrit.</p>
</div>
<div class="paragraph">
<p>If allowrcpt is configured, The set of allowed recipients is:
<code>allowrcpt - denyrcpt</code>.</p>
</div>
<div class="paragraph">
<p>By default, unset, permitting delivery to any email address.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.denyrcpt"></a>sendemail.denyrcpt</dt>
<dd>
<div class="paragraph">
<p>If present, each value adds one entry to the list of email
addresses that Gerrit can&#8217;t send emails to.  If set to a complete
email address, that one address is added to the list of blocked
emails.
If set to a domain name, any address at that domain can <strong>not</strong> receive
email from Gerrit.</p>
</div>
<div class="paragraph">
<p>By default, unset, permitting delivery to any email address.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.includeDiff"></a>sendemail.includeDiff</dt>
<dd>
<div class="paragraph">
<p>If true, new change emails and merged change emails from Gerrit
will include the complete unified diff of the change.
Variable maxmimumDiffSize places an upper limit on how large the
email can get when this option is enabled.</p>
</div>
<div class="paragraph">
<p>By default, false.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.maximumDiffSize"></a>sendemail.maximumDiffSize</dt>
<dd>
<div class="paragraph">
<p>Largest size of unified diff output to include in an email. When
the diff exceeds this size the file paths will be listed instead.
Standard byte unit suffixes are supported.</p>
</div>
<div class="paragraph">
<p>By default, 256 KiB.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.importance"></a>sendemail.importance</dt>
<dd>
<div class="paragraph">
<p>If present, emails sent from Gerrit will have the given level
of importance. Valid values include 'high' and 'low', which
email clients will render in different ways.</p>
</div>
<div class="paragraph">
<p>By default, unset, so no Importance header is generated.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.expiryDays"></a>sendemail.expiryDays</dt>
<dd>
<div class="paragraph">
<p>If present, emails sent from Gerrit will expire after the given
number of days. This will add the Expiry-Date header and
email clients may expire or expunge mails whose Expiry-Date
header is in the past. This should be a positive non-zero
number indicating how many days in the future the mails
should expire.</p>
</div>
<div class="paragraph">
<p>By default, unset, so no Expiry-Date header is generated.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.replyToAddress"></a>sendemail.replyToAddress</dt>
<dd>
<div class="paragraph">
<p>A custom Reply-To address should only be provided if Gerrit is set up to
receive emails and the inbound address differs from
<a href="#sendemail.from">sendemail.from</a>.
It will be set as Reply-To header on all types of outgoing email where
Gerrit can parse back a user&#8217;s reply.</p>
</div>
<div class="paragraph">
<p>Defaults to an empty string which adds <a href="#sendemail.from">sendemail.from</a> as
Reply-To if inbound email is enabled and the review&#8217;s author otherwise.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.allowTLD"></a>sendemail.allowTLD</dt>
<dd>
<div class="paragraph">
<p>List of custom TLDs to allow sending emails to in addition to those specified
in the <a href="http://data.iana.org/TLD/" class="external" target="_blank" rel="noopener">IANA list</a>.</p>
</div>
<div class="paragraph">
<p>Defaults to an empty list, meaning no additional TLDs are allowed.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sendemail.addInstanceNameInSubject"></a>sendemail.addInstanceNameInSubject</dt>
<dd>
<div class="paragraph">
<p>When set to true, Gerrit will add its short name to the email subject, allowing recipients to quickly identify
what Gerrit instance the email came from.</p>
</div>
<div class="paragraph">
<p>The short name can be customized via the gerrit.instanceName option.</p>
</div>
<div class="paragraph">
<p>Defaults to false.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="site">Section site</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="site.allowOriginRegex"></a>site.allowOriginRegex</dt>
<dd>
<div class="paragraph">
<p>List of regular expressions matching origins that should be permitted
to use the full Gerrit REST API.  These should be trusted applications,
as the sites may be able to use the user&#8217;s credentials. Applies to
all requests, including state changing methods (PUT, DELETE, POST).</p>
</div>
<div class="paragraph">
<p>Expressions should not require trailing slash. For example a valid
pattern might be <code><a href="https://build-status">.</a>example[.]com</code>.</p>
</div>
<div class="paragraph">
<p>By default, unset, denying all cross-origin requests.</p>
</div>
</dd>
<dt class="hdlist1"><a id="site.refreshHeaderFooter"></a>site.refreshHeaderFooter</dt>
<dd>
<div class="paragraph">
<p>If true the server checks the site header, footer and CSS files for
updated versions. If false, a server restart is required to change
any of these resources. Default is true, allowing automatic reloads.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="ssh-alias">Section ssh-alias</h3>
<div class="paragraph">
<p>Variables in section ssh-alias permit the site administrator to alias
another command from Gerrit or a plugin into the <code>gerrit</code> command
namespace. To alias <code>replication start</code> to <code>gerrit replicate</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[ssh-alias]
  replicate = replication start</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ssh">Section ssh</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="ssh.clientImplementation"></a>ssh.clientImplementation</dt>
<dd>
<div class="paragraph">
<p>JCraft JSch client is supported in addition to Apache MINA SSH client.
To use JSch client set the value to <code>JSCH</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>APACHE</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="sshd">Section sshd</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="sshd.enableCompression"></a>sshd.enableCompression</dt>
<dd>
<div class="paragraph">
<p>In the general case, we want to disable transparent compression, since
the majority of our data transfer is highly compressed Git pack files
and we cannot make them any smaller than they already are.</p>
</div>
<div class="paragraph">
<p>However, if there are CPU in abundance and the server is reachable
through slow networks, gits with huge amount of refs can benefit from
SSH-compression since git does not compress the ref announcement during
handshake.</p>
</div>
<div class="paragraph">
<p>Compression can be especially useful when Gerrit replicas are being used
for the larger clones and fetches and the primary server mostly takes
small receive-packs.</p>
</div>
<div class="paragraph">
<p>By default, <code>false</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.backend"></a>sshd.backend</dt>
<dd>
<div class="paragraph">
<p>Starting from version 0.9.0 Apache SSHD project added support for NIO2
IoSession. To use the old MINA session the <code>backend</code> option must be set
to <code>MINA</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>NIO2</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.listenAddress"></a>sshd.listenAddress</dt>
<dd>
<div class="paragraph">
<p>Specifies the local addresses the internal SSHD should listen
for connections on.  The following forms may be used to specify
an address.  In any form, <code>:'port'</code> may be omitted to use the
default of <code>29418</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>'hostname':'port'</code> (for example <code>review.example.com:29418</code>)</p>
</li>
<li>
<p><code>'IPv4':'port'</code> (for example <code>10.0.0.1:29418</code>)</p>
</li>
<li>
<p><code>['IPv6']:'port'</code> (for example <code>[ff02::1]:29418</code>)</p>
</li>
<li>
<p><code>*:'port'</code> (for example <code>*:29418</code>)</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If multiple values are supplied, the daemon will listen on all
of them.</p>
</div>
<div class="paragraph">
<p>To disable the internal SSHD, set listenAddress to <code>off</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>*:29418</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.advertisedAddress"></a>sshd.advertisedAddress</dt>
<dd>
<div class="paragraph">
<p>Specifies the addresses clients should be told to connect to.
This may differ from sshd.listenAddress if a firewall based port
redirector is being used, making Gerrit appear to answer on port
22. The following forms may be used to specify an address.  In any
form, <code>:'port'</code> may be omitted to use the default SSH port of 22.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>'hostname':'port'</code> (for example <code>review.example.com:22</code>)</p>
</li>
<li>
<p><code>'IPv4':'port'</code> (for example <code>10.0.0.1:29418</code>)</p>
</li>
<li>
<p><code>['IPv6']:'port'</code> (for example <code>[ff02::1]:29418</code>)</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If multiple values are supplied, the daemon will advertise all
of them.</p>
</div>
<div class="paragraph">
<p>By default uses the value of <code>sshd.listenAddress</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.tcpKeepAlive"></a>sshd.tcpKeepAlive</dt>
<dd>
<div class="paragraph">
<p>If true, enables TCP keepalive messages to the other side, so
the daemon can terminate connections if the peer disappears.</p>
</div>
<div class="paragraph">
<p>Only effective when <code>sshd.backend</code> is set to <code>MINA</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.threads"></a>sshd.threads</dt>
<dd>
<div class="paragraph">
<p>Number of threads to use when executing SSH command requests.
If additional requests are received while all threads are busy they
are queued and serviced in a first-come-first-served order.</p>
</div>
<div class="paragraph">
<p>By default, 2x the number of CPUs available to the JVM (but at least 4
threads).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When SSH daemon is enabled then this setting also defines the max number of
concurrent Git requests for interactive users over SSH and HTTP together.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.batchThreads"></a>sshd.batchThreads</dt>
<dd>
<div class="paragraph">
<p>Number of threads to allocate for SSH command requests from
<a href="access-control.html#service_users">service users</a>.
If equals to 0, then all non-interactive requests are executed in the same
queue as interactive requests.</p>
</div>
<div class="paragraph">
<p>Any other value will remove the number of threads from the queue
allocated to interactive users, and create a separate thread pool
of the requested size, which will be used to run commands from
service users.</p>
</div>
<div class="paragraph">
<p>If the number of threads requested for service users is larger
than the total number of threads allocated in sshd.threads, then the
value of sshd.threads is increased to accommodate the requested value.</p>
</div>
<div class="paragraph">
<p>By default is 1 on single core node, 2 otherwise.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When SSH daemon is enabled then this setting also defines the max number of
concurrent Git requests for batch users over SSH and HTTP together.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.streamThreads"></a>sshd.streamThreads</dt>
<dd>
<div class="paragraph">
<p>Number of threads to use when formatting events to asynchronous
streaming clients.  Event formatting is multiplexed onto this thread
pool by a simple FIFO scheduling system.</p>
</div>
<div class="paragraph">
<p>By default, 1 plus the number of CPUs available to the JVM.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.commandStartThreads"></a>sshd.commandStartThreads</dt>
<dd>
<div class="paragraph">
<p>Number of threads used to parse a command line submitted by a client
over SSH for execution, create the internal data structures used by
that command, and schedule it for execution on another thread.</p>
</div>
<div class="paragraph">
<p>By default, 2.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.maxAuthTries"></a>sshd.maxAuthTries</dt>
<dd>
<div class="paragraph">
<p>Maximum number of authentication attempts before the server
disconnects the client.  Each public key that a client has loaded
into its local agent counts as one auth request.  Users can work
around the server&#8217;s limit by loading less keys into their agent,
or selecting a specific key in their <code>~/.ssh/config</code> file with
the <code>IdentityFile</code> option.</p>
</div>
<div class="paragraph">
<p>By default, 6.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.loginGraceTime"></a>sshd.loginGraceTime</dt>
<dd>
<div class="paragraph">
<p>Time in seconds that a client has to authenticate before the server
automatically terminates their connection.  Values should use common
unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
<li>
<p>d, day, days</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, 2 minutes.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.idleTimeout"></a>sshd.idleTimeout</dt>
<dd>
<div class="paragraph">
<p>Time in seconds after which the server automatically terminates idle
connections (or 0 to disable closing of idle connections) not waiting for
any server operation to complete.
Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
<li>
<p>d, day, days</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, 0.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.waitTimeout"></a>sshd.waitTimeout</dt>
<dd>
<div class="paragraph">
<p>Time in seconds after which the server automatically terminates
connections waiting for a server operation to complete, like for instance
cloning a very large repo with lots of refs.
Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
</li>
<li>
<p>h, hr, hour, hours</p>
</li>
<li>
<p>d, day, days</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, 30s.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.gracefulStopTimeout"></a>sshd.gracefulStopTimeout</dt>
<dd>
<div class="paragraph">
<p>Set a graceful stop time. If set, Gerrit ensures that all open SSH
sessions are preserved for a maximum period of time, before forcing the
shutdown of the SSH daemon. During this period, no new requests
will be accepted. This option is meant to be used in setups performing
rolling restarts.</p>
</div>
<div class="paragraph">
<p>Values should use common unit suffixes to express their setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>s, sec, second, seconds</p>
</li>
<li>
<p>m, min, minute, minutes</p>
<div class="paragraph">
<p>By default, 0 seconds (immediate shutdown).</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.maxConnectionsPerUser"></a>sshd.maxConnectionsPerUser</dt>
<dd>
<div class="paragraph">
<p>Maximum number of concurrent SSH sessions that a user account
may open at one time.  This is the number of distinct SSH logins
that each user may have active at one time, and is not related to
the number of commands a user may issue over a single connection.
If set to 0, there is no limit.</p>
</div>
<div class="paragraph">
<p>By default, 64.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.cipher"></a>sshd.cipher</dt>
<dd>
<div class="paragraph">
<p>Available ciphers.  To permit multiple ciphers, specify multiple
<code>sshd.cipher</code> keys in the configuration file, one cipher name
per key.  Cipher names starting with <code>+</code> are enabled in addition
to the default ciphers, cipher names starting with <code>-</code> are removed
from the default cipher set.</p>
</div>
<div class="paragraph">
<p>Supported ciphers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aes128-ctr</code></p>
</li>
<li>
<p><code>aes192-ctr</code></p>
</li>
<li>
<p><code>aes256-ctr</code></p>
</li>
<li>
<p><code>aes128-cbc</code></p>
</li>
<li>
<p><code>aes192-cbc</code></p>
</li>
<li>
<p><code>aes256-cbc</code></p>
</li>
<li>
<p><code>blowfish-cbc</code></p>
</li>
<li>
<p><code>3des-cbc</code></p>
</li>
<li>
<p><code>arcfour128</code></p>
</li>
<li>
<p><code>arcfour256</code></p>
</li>
<li>
<p><code>none</code></p>
<div class="paragraph">
<p>By default, all supported ciphers except <code>none</code> are available.</p>
</div>
<div class="paragraph">
<p>If your setup allows for it, it&#8217;s recommended to disable all ciphers except
the AES-CTR modes.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.mac"></a>sshd.mac</dt>
<dd>
<div class="paragraph">
<p>Available MAC (message authentication code) algorithms.  To permit
multiple algorithms, specify multiple <code>sshd.mac</code> keys in the
configuration file, one MAC per key.  MAC names starting with <code>+</code>
are enabled in addition to the default MACs, MAC names starting with
<code>-</code> are removed from the default MACs.</p>
</div>
<div class="paragraph">
<p>Supported MACs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hmac-md5</code></p>
</li>
<li>
<p><code>hmac-md5-96</code></p>
</li>
<li>
<p><code>hmac-sha1</code></p>
</li>
<li>
<p><code>hmac-sha1-96</code></p>
</li>
<li>
<p><code>hmac-sha2-256</code></p>
</li>
<li>
<p><code>hmac-sha2-512</code></p>
<div class="paragraph">
<p>By default, all supported MACs are available.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.enableDeprecatedKexAlgorithms"></a>sshd.enableDeprecatedKexAlgorithms</dt>
<dd>
<div class="paragraph">
<p>Enable deprecated kex algorithms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>diffie-hellman-group1-sha1</code></p>
</li>
<li>
<p><code>diffie-hellman-group14-sha1</code></p>
</li>
<li>
<p><code>diffie-hellman-group-exchange-sha1</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>By default, the deprecated kex algorithms are disabled.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="sshd.kex"></a>sshd.kex</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Available key exchange algorithms. To permit multiple algorithms,
specify multiple <code>sshd.kex</code> keys in the configuration file, one key
exchange algorithm per key.  Key exchange algorithm names starting
with <code>+</code> are enabled in addition to the default key exchange
algorithms, key exchange algorithm names starting with <code>-</code> are
removed from the default key exchange algorithms.</p>
</div>
<div class="paragraph">
<p>Supported key exchange algorithms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ecdh-sha2-nistp521</code></p>
</li>
<li>
<p><code>ecdh-sha2-nistp384</code></p>
</li>
<li>
<p><code>ecdh-sha2-nistp256</code></p>
</li>
<li>
<p><code>diffie-hellman-group-exchange-sha256</code></p>
</li>
<li>
<p><code>diffie-hellman-group18-sha512</code></p>
</li>
<li>
<p><code>diffie-hellman-group17-sha512</code></p>
</li>
<li>
<p><code>diffie-hellman-group16-sha512</code></p>
</li>
<li>
<p><code>diffie-hellman-group15-sha512</code></p>
</li>
<li>
<p><code>diffie-hellman-group14-sha256</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#sshd.enableDeprecatedKexAlgorithms">sshd.enableDeprecatedKexAlgorithms</a>
for deprecated key algorithms and how to enable them.</p>
</div>
<div class="paragraph">
<p>By default, all supported key exchange algorithms are available.</p>
</div>
<div class="paragraph">
<p>It is strongly recommended to disable at least <code>diffie-hellman-group1-sha1</code>
as it&#8217;s known to be vulnerable (logjam attack). Additionally, if your setup
allows for it, it is recommended to disable the remaining two <code>sha1</code> key
exchange algorithms.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.kerberosKeytab"></a>sshd.kerberosKeytab</dt>
<dd>
<div class="paragraph">
<p>Enable kerberos authentication for SSH connections.  To permit
kerberos authentication, the server must have a host principal
(see <code>sshd.kerberosPrincipal</code>) which is acquired from a keytab.
This must be provisioned by the kerberos administrators, and is
typically installed into <code>/etc/krb5.keytab</code> on host machines.</p>
</div>
<div class="paragraph">
<p>The keytab must contain at least one <code>host/</code> principal, typically
using the host&#8217;s canonical name. If it does not use the
canonical name, the <code>sshd.kerberosPrincipal</code> should be configured
with the correct name.</p>
</div>
<div class="paragraph">
<p>By default, not set and so kerberos authentication is not enabled.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.kerberosPrincipal"></a>sshd.kerberosPrincipal</dt>
<dd>
<div class="paragraph">
<p>If kerberos authentication is enabled with <code>sshd.kerberosKeytab</code>,
instead use the given principal name instead of the default.
If the principal does not begin with <code>host/</code> a warning message is
printed and may prevent successful authentication.</p>
</div>
<div class="paragraph">
<p>This may be useful if the host is behind an IP load balancer or
other SSH forwarding systems, since the principal name is constructed
by the client and must match for kerberos authentication to work.</p>
</div>
<div class="paragraph">
<p>By default, <code>host/canonical.host.name</code></p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.requestLog"></a>sshd.requestLog</dt>
<dd>
<div class="paragraph">
<p>Enable (or disable) the <code>'$site_path'/logs/sshd_log</code> request log.
If enabled, a request log file is written out by the SSH daemon.
The sshd log format is documented <a href="logs.html#_sshd_log">here</a>.</p>
</div>
<div class="paragraph">
<p><code>log4j.appender</code> with the name <code>sshd_log</code> can be configured to overwrite
programmatic configuration.</p>
</div>
<div class="paragraph">
<p>By default, <code>true</code>.</p>
</div>
<div class="paragraph">
<p>This value supports <a href="#reloadConfig">configuration reloads</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.rekeyBytesLimit"></a>sshd.rekeyBytesLimit</dt>
<dd>
<div class="paragraph">
<p>The SSH daemon will issue a rekeying after a certain amount of data.
This configuration option allows you to tweak that setting.</p>
</div>
<div class="paragraph">
<p>By default, 1073741824 (bytes, 1GB).</p>
</div>
<div class="paragraph">
<p>The <code>rekeyBytesLimit</code> cannot be set to lower than 32.</p>
</div>
</dd>
<dt class="hdlist1"><a id="sshd.rekeyTimeLimit"></a>sshd.rekeyTimeLimit</dt>
<dd>
<div class="paragraph">
<p>The SSH daemon will issue a rekeying after a certain amount of time.
This configuration option allows you to tweak that setting.</p>
</div>
<div class="paragraph">
<p>By default, 1h.</p>
</div>
<div class="paragraph">
<p>Set to 0 to disable this check.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="suggest">Section suggest</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="suggest.maxSuggestedReviewers"></a>suggest.maxSuggestedReviewers</dt>
<dd>
<div class="paragraph">
<p>The maximum numbers of reviewers suggested.</p>
</div>
<div class="paragraph">
<p>By default 10.</p>
</div>
<div class="paragraph">
<p>This value supports <a href="#reloadConfig">configuration reloads</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="suggest.from"></a>suggest.from</dt>
<dd>
<div class="paragraph">
<p>The number of characters that a user must have typed before suggestions
are provided. If set to 0, suggestions are always provided. This is only
used for suggesting accounts when adding members to a group.</p>
</div>
<div class="paragraph">
<p>By default 0.</p>
</div>
</dd>
<dt class="hdlist1"><a id="suggest.relevantChanges"></a>suggest.relevantChanges</dt>
<dd>
<div class="paragraph">
<p>When suggesting reviewers, we go over recent changes of the user, and
give priority to users that are present as reviewers in any of those
changes. The number of changes we go over is <code>sugggest.relevantChanges</code>.</p>
</div>
<div class="paragraph">
<p>This nubmer is a tradeoff between speed and accuracy.
A high number would be accurate but slow, and a low number would be
fast but inaccurate.</p>
</div>
<div class="paragraph">
<p>By default 50.</p>
</div>
</dd>
<dt class="hdlist1"><a id="suggest.skipServiceUsers"></a>suggest.skipServiceUsers</dt>
<dd>
<div class="paragraph">
<p>If <a href="access-control.html#service_users">service users</a> should be skipped when
suggesting reviewers.</p>
</div>
<div class="paragraph">
<p>By default true.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="tracing">Section tracing</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="tracing.performanceLogging"></a>tracing.performanceLogging</dt>
<dd>
<div class="paragraph">
<p>Whether performance logging is enabled.</p>
</div>
<div class="paragraph">
<p>When performance logging is enabled, performance events for some
operations are collected in memory while a request is running. At the
end of the request the performance events are handed over to the
<a href="dev-plugins.html#performance-logger">PerformanceLogger</a> plugins.
This means if performance logging is enabled, the memory footprint of
requests is slightly increased.</p>
</div>
<div class="paragraph">
<p>This setting has no effect if no
<a href="dev-plugins.html#performance-logger">PerformanceLogger</a> plugins are
installed, because then performance logging is always disabled.</p>
</div>
<div class="paragraph">
<p>By default, true.</p>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="tracing.traceid">Subsection tracing.&lt;trace-id&gt;</h4>
<div class="paragraph">
<p>There can be multiple <code>tracing.&lt;trace-id&gt;</code> subsections to configure
automatic tracing of requests. To be traced a request must match all
conditions of one <code>tracing.&lt;trace-id&gt;</code> subsection. The subsection name
is used as trace ID. Using this trace ID administrators can find
matching log entries.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="tracing.traceid.requestType"></a>tracing.&lt;trace-id&gt;.requestType</dt>
<dd>
<div class="paragraph">
<p>Type of request for which request tracing should be always enabled (can
be <code>GIT_RECEIVE</code>, <code>GIT_UPLOAD</code>, <code>REST</code> and <code>SSH</code>).</p>
</div>
<div class="paragraph">
<p>May be specified multiple times.</p>
</div>
<div class="paragraph">
<p>By default, unset (all request types are matched).</p>
</div>
</dd>
<dt class="hdlist1"><a id="tracing.traceid.requestUriPattern"></a>tracing.&lt;trace-id&gt;.requestUriPattern</dt>
<dd>
<div class="paragraph">
<p>Regular expression to match request URIs for which request tracing
should be always enabled. Request URIs are only available for REST
requests. Request URIs never include the '/a' prefix.</p>
</div>
<div class="paragraph">
<p>May be specified multiple times.</p>
</div>
<div class="paragraph">
<p>By default, unset (all request URIs are matched).</p>
</div>
</dd>
<dt class="hdlist1"><a id="tracing.traceid.account"></a>tracing.&lt;trace-id&gt;.account</dt>
<dd>
<div class="paragraph">
<p>Account ID of an account for which request tracing should be always
enabled.</p>
</div>
<div class="paragraph">
<p>May be specified multiple times.</p>
</div>
<div class="paragraph">
<p>By default, unset (all accounts are matched).</p>
</div>
</dd>
<dt class="hdlist1"><a id="tracing.traceid.projectPattern"></a>tracing.&lt;trace-id&gt;.projectPattern</dt>
<dd>
<div class="paragraph">
<p>Regular expression to match project names for which request tracing
should be always enabled.</p>
</div>
<div class="paragraph">
<p>May be specified multiple times.</p>
</div>
<div class="paragraph">
<p>By default, unset (all projects are matched).</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trackingid">Section trackingid</h3>
<div class="paragraph">
<p>Tagged footer lines containing references to external
tracking systems, parsed out of the commit message and
saved in Gerrit&#8217;s secondary index.</p>
</div>
<div class="paragraph">
<p>After making changes to this section, existing changes
must be reindexed with <a href="pgm-reindex.html">reindex</a>.</p>
</div>
<div class="paragraph">
<p>The tracking ids are searchable using tr:&lt;tracking id&gt; or
bug:&lt;tracking id&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[trackingid "jira-bug"]
  footer = Bugfix:
  footer = Bug:
  match = JRA\\d{2,8}
  system = JIRA

[trackingid "jira-feature"]
  footer = Feature
  match = JRA(\\d{2,8})
  system = JIRA</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="trackingid.name.footer"></a>trackingid.&lt;name&gt;.footer</dt>
<dd>
<div class="paragraph">
<p>A prefix tag that identifies the footer line to parse for tracking ids.</p>
</div>
<div class="paragraph">
<p>Several trackingid entries can have the same footer tag, and a single trackingid
entry can have multiple footer tags.</p>
</div>
<div class="paragraph">
<p>If multiple footer tags are specified, each tag will be parsed separately and
duplicates will be ignored.</p>
</div>
<div class="paragraph">
<p>The trailing ":" is optional.</p>
</div>
</dd>
<dt class="hdlist1"><a id="trackingid.name.match"></a>trackingid.&lt;name&gt;.match</dt>
<dd>
<div class="paragraph">
<p>A <a href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" class="external" target="_blank" rel="noopener">standard
Java regular expression (java.util.regex)</a> used to match the
external tracking id part of the footer line. The match can
result in several entries in the DB.  If grouping is used in the
regex the first group will be interpreted as the tracking id.
Tracking ids longer than 32 characters will be ignored.</p>
</div>
<div class="paragraph">
<p>The configuration file parser eats one level of backslashes, so the
character class <code>\s</code> requires <code>\\s</code> in the configuration file.  The
parser also terminates the line at the first <code>#</code>, so a match
expression containing # must be wrapped in double quotes.</p>
</div>
</dd>
<dt class="hdlist1"><a id="trackingid.name.system"></a>trackingid.&lt;name&gt;.system</dt>
<dd>
<div class="paragraph">
<p>The name of the external tracking system (maximum 10 characters).
It is possible to have several trackingid entries for the same
tracking system.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="transfer">Section transfer</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="transfer.timeout"></a>transfer.timeout</dt>
<dd>
<div class="paragraph">
<p>Number of seconds to wait for a single network read or write
to complete before giving up and declaring the remote side is
not responding.  If 0, there is no timeout, and this server will
wait indefinitely for a transfer to finish.</p>
</div>
<div class="paragraph">
<p>A timeout should be large enough to mostly transfer the objects to
the other side.  1 second may be too small for larger projects,
especially over a WAN link, while 10-30 seconds is a much more
reasonable timeout value.</p>
</div>
<div class="paragraph">
<p>Defaults to 0 seconds, wait indefinitely.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="upload">Section upload</h3>
<div class="paragraph">
<p>Options to control the behavior of <code>upload-pack</code> on the server side,
which handles a user&#8217;s fetch, clone, or repo sync command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[upload]
  allowGroup = GROUP_ALLOWED_TO_EXECUTE
  allowGroup = YET_ANOTHER_GROUP_ALLOWED_TO_EXECUTE</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="upload.allowGroup"></a>upload.allowGroup</dt>
<dd>
<div class="paragraph">
<p>Name of the groups of users that are allowed to execute 'upload-pack'.
One or more groups can be set.</p>
</div>
<div class="paragraph">
<p>If no groups are added, any user will be allowed to execute
'upload-pack' on the server.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="accountDeactivation">Section accountDeactivation</h3>
<div class="paragraph">
<p>Configures the parameters for the scheduled task to sweep and deactivate Gerrit
accounts according to their status reported by the auth backend. Currently only
supported for LDAP backends.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="accountDeactivation.startTime"></a>accountDeactivation.startTime</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-startTime">start time</a> for running
account deactivations.</p>
</div>
</dd>
<dt class="hdlist1"><a id="accountDeactivation.interval"></a>accountDeactivation.interval</dt>
<dd>
<div class="paragraph">
<p>The <a href="#schedule-configuration-interval">interval</a> for running
account deactivations.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that the task will only be scheduled if the
<a href="#autoUpdateAccountActiveStatus">auth.autoUpdateAccountActiveStatus</a>
is set to true.</p>
</div>
<div class="paragraph">
<p><a href="#schedule-configuration-examples">Schedule examples</a> can be found
in the <a href="#schedule-configuration">Schedule Configuration</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="submodule">Section submodule</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="submodule.verbosesuperprojectupdate"></a>submodule.verboseSuperprojectUpdate</dt>
<dd>
<div class="paragraph">
<p>When using <a href="user-submodules.html#automatic_update">automatic superproject updates</a>
this option will determine how the submodule commit messages are included into
the commit message of the superproject update.</p>
</div>
<div class="paragraph">
<p>If <code>FALSE</code>, will not include any commit messages for the gitlink update.</p>
</div>
<div class="paragraph">
<p>If <code>SUBJECT_ONLY</code>, will include only the commit subjects.</p>
</div>
<div class="paragraph">
<p>If <code>TRUE</code>, will include full commit messages.</p>
</div>
<div class="paragraph">
<p>By default this is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="submodule.enableSuperProjectSubscriptions"></a>submodule.enableSuperProjectSubscriptions</dt>
<dd>
<div class="paragraph">
<p>This allows to enable the superproject subscription mechanism.</p>
</div>
<div class="paragraph">
<p>By default this is true.</p>
</div>
</dd>
<dt class="hdlist1"><a id="submodule.maxCombinedCommitMessageSize"></a>submodule.maxCombinedCommitMessageSize</dt>
<dd>
<div class="paragraph">
<p>This allows to limit the length of the commit message for a submodule.</p>
</div>
<div class="paragraph">
<p>By default this is 262144 (256 KiB).</p>
</div>
<div class="paragraph">
<p>Common unit suffixes of k, m, or g are supported.</p>
</div>
</dd>
<dt class="hdlist1"><a id="submodule.maxCommitMessages"></a>submodule.maxCommitMessages</dt>
<dd>
<div class="paragraph">
<p>This allows to limit the number of commit messages that should be combined when creating
a commit message for a submodule.</p>
</div>
<div class="paragraph">
<p>By default this is 1000.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="user">Section user</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="user.name"></a>user.name</dt>
<dd>
<div class="paragraph">
<p>Name that Gerrit calls itself in Git when it creates a new Git
commit, such as a merge during change submission.</p>
</div>
<div class="paragraph">
<p>By default this is "Gerrit Code Review".</p>
</div>
</dd>
<dt class="hdlist1"><a id="user.email"></a>user.email</dt>
<dd>
<div class="paragraph">
<p>Email address that Gerrit refers to itself as when it creates a
new Git commit, such as a merge commit during change submission.</p>
</div>
<div class="paragraph">
<p>If not set, Gerrit generates this as "gerrit@<code>hostname`", where
`hostname</code> is the hostname of the system Gerrit is running on.</p>
</div>
<div class="paragraph">
<p>By default, not set, generating the value at startup.</p>
</div>
</dd>
<dt class="hdlist1"><a id="user.anonymousCoward"></a>user.anonymousCoward</dt>
<dd>
<div class="paragraph">
<p>Username that is displayed in the Gerrit Web UI and in e-mail
notifications if the full name of the user is not set.</p>
</div>
<div class="paragraph">
<p>By default "Name of user not set" is used.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="schedule-configuration">Schedule Configuration</h3>
<div class="paragraph">
<p>Schedule configurations are used for running periodic background jobs.</p>
</div>
<div class="paragraph">
<p>A schedule configuration consists of two parameters:</p>
</div>
<div id="schedule-configuration-interval" class="ulist">
<ul>
<li>
<p><code>interval</code>:
Interval for running the periodic background job. The interval must be
larger than zero. The following suffixes are supported to define the
time unit for the interval:</p>
<div class="ulist">
<ul>
<li>
<p><code>s</code>, <code>sec</code>, <code>second</code>, <code>seconds</code></p>
</li>
<li>
<p><code>m</code>, <code>min</code>, <code>minute</code>, <code>minutes</code></p>
</li>
<li>
<p><code>h</code>, <code>hr</code>, <code>hour</code>, <code>hours</code></p>
</li>
<li>
<p><code>d</code>, <code>day</code>, <code>days</code></p>
</li>
<li>
<p><code>w</code>, <code>week</code>, <code>weeks</code> (<code>1 week</code> is treated as <code>7 days</code>)</p>
</li>
<li>
<p><code>mon</code>, <code>month</code>, <code>months</code> (<code>1 month</code> is treated as <code>30 days</code>)</p>
</li>
<li>
<p><code>y</code>, <code>year</code>, <code>years</code> (<code>1 year</code> is treated as <code>365 days</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="schedule-configuration-startTime" class="ulist">
<ul>
<li>
<p><code>startTime</code>:
The start time defines the first execution of the periodic background
job. If the configured <code>interval</code> is shorter than <code>startTime - now</code> the
start time will be preponed by the maximum integral multiple of
<code>interval</code> so that the start time is still in the future. <code>startTime</code>
must have one of the following formats:</p>
<div class="ulist">
<ul>
<li>
<p><code>&lt;day of week&gt; &lt;hours&gt;:&lt;minutes&gt;</code></p>
</li>
<li>
<p><code>&lt;hours&gt;:&lt;minutes&gt;</code></p>
<div class="paragraph">
<p>The placeholders can have the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;day of week&gt;</code>:
<code>Mon</code>, <code>Tue</code>, <code>Wed</code>, <code>Thu</code>, <code>Fri</code>, <code>Sat</code>, <code>Sun</code></p>
</li>
<li>
<p><code>&lt;hours&gt;</code>:
<code>00</code>-<code>23</code></p>
</li>
<li>
<p><code>&lt;minutes&gt;</code>:
<code>00</code>-<code>59</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The time zone cannot be specified but is always the system default
time zone. Hours must be zero-padded, i.e. <code>06:00</code> rather than <code>6:00</code>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The section (and optionally the subsection) in which the <code>interval</code> and
<code>startTime</code> keys must be set depends on the background job for which a
schedule should be configured. E.g. for the change cleanup job the keys
must be set in the <a href="#changeCleanup">changeCleanup</a> section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  [changeCleanup]
    startTime = Fri 10:30
    interval  = 2 days</pre>
</div>
</div>
<div id="schedule-configuration-examples" class="paragraph">
<p>Examples for a schedule configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Example 1:</p>
<div class="listingblock">
<div class="content">
<pre>  startTime = Fri 10:30
  interval  = 2 days</pre>
</div>
</div>
<div class="paragraph">
<p>Assuming that the server is started on <code>Mon 07:00</code> then
<code>startTime - now</code> is <code>4 days 3:30 hours</code>. This is larger than the
interval hence the start time is preponed by the maximum integral
multiple of the interval so that start time is still in the future,
i.e. preponed by 4 days. This yields a start time of <code>Mon 10:30</code>, next
executions are <code>Wed 10:30</code>, <code>Fri 10:30</code>. etc.</p>
</div>
</li>
<li>
<p>Example 2:</p>
<div class="listingblock">
<div class="content">
<pre>  startTime = 06:00
  interval = 1 day</pre>
</div>
</div>
<div class="paragraph">
<p>Assuming that the server is started on <code>Mon 07:00</code> then this yields the
first run on Tuesday at 06:00 and a repetition interval of 1 day.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="All-Projects-project.config">File <code>etc/All-Projects/project.config</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional file <code>'$site_path'/etc/All-Projects/project.config</code> provides
defaults for configuration read from
<a href="config-project-config.html"><code>project.config</code></a> in the
<code>All-Projects</code> repo. Unlike <code>gerrit.config</code>, this file contains project-type
configuration rather than server-type configuration.</p>
</div>
<div class="paragraph">
<p>Most administrators will not need this file, and should instead make commits to
<code>All-Projects</code> to modify global config. However, a separate file can be useful
when managing multiple Gerrit servers, since pushing changes to defaults using
Puppet or a similar tool can be easier than scripting git updates to
<code>All-Projects</code>.</p>
</div>
<div class="paragraph">
<p>The contents of the file are loaded each time the <code>All-Projects</code> project is
reloaded. Updating the file requires either evicting the project cache or
restarting the server.</p>
</div>
<div class="paragraph">
<p>Caveats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The path from which the file is read corresponds to the name of the repo,
which is <a href="#gerrit.allProjects">configurable</a>.</p>
</li>
<li>
<p>Although the file lives in a directory that shares a name with a repository,
this directory is not a Git repository.</p>
</li>
<li>
<p>Only the file <code>project.config</code> is read from this directory to provide
defaults; any other files in this directory, such as <code>rules.pl</code>, are ignored.
(This behavior may change in the future.)</p>
</li>
<li>
<p>Group names listed in the access config in this file are resolved to UUIDs
using the <code>groups</code> file in the repository, not in the config directory. As a
result, setting ACLs in this file is not recommended.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="secure.config">File <code>etc/secure.config</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional file <code>'$site_path'/etc/secure.config</code> overrides (or
supplements) the settings supplied by <code>'$site_path'/etc/gerrit.config</code>.
The file should be readable only by the daemon process and can be
used to contain private configuration entries that wouldn&#8217;t normally
be exposed to everyone.</p>
</div>
<div class="paragraph">
<p>Sample <code>etc/secure.config</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[auth]
  registerEmailPrivateKey = 2zHNrXE2bsoylzUqDxZp0H1cqUmjgWb6

[database]
  username = webuser
  password = s3kr3t

[ldap]
  password = l3tm3srch

[httpd]
  sslKeyPassword = g3rr1t

[sendemail]
  smtpPass = sp@m

[remote "bar"]
  password = s3kr3t</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_file_etcpeer_keys">File <code>etc/peer_keys</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional file <code>'$site_path'/etc/peer_keys</code> controls who can
login as the 'Gerrit Code Review' user, required for the <a href="cmd-suexec.html">suexec</a>
command.</p>
</div>
<div class="paragraph">
<p>The format is one Base-64 encoded public key per line with optional comment, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Comments allowed at start of line
AAAAC3...51R== john@example.net
# Another comment
AAAAB5...21S== jane@example.net</pre>
</div>
</div>
<div class="sect2">
<h3 id="_configurable_parameters">Configurable Parameters</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">site_path</dt>
<dd>
<div class="paragraph">
<p>Local filesystem directory holding the site customization assets.
Placing this directory under version control and/or backup is a
good idea.</p>
</div>
<div class="paragraph">
<p>Files in this directory provide additional configuration.</p>
</div>
<div class="paragraph">
<p>Other files support site customization.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="config-themes.html">Themes</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jgitConfig">File <code>etc/jgit.config</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Gerrit uses the <code>$site_path/etc/jgit.config</code> file instead of the
system-wide and user-global Git configuration for its runtime JGit
configuration.</p>
</div>
<div class="paragraph">
<p>Sample <code>etc/jgit.config</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[core]
  trustFolderStat = false</pre>
</div>
</div>
<div class="sect2">
<h3 id="jgit-gc">Section gc</h3>
<div class="paragraph">
<p>Options in section gc are used when command <a href="cmd-gc.html">gerrit gc</a> is used
or scheduled via options <a href="cmd-gc.html#gc.startTime">gc.startTime</a> and
<a href="cmd-gc.html#gc.interval">gc.interval</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="gc.auto"></a>gc.auto</dt>
<dd>
<div class="paragraph">
<p>When there are approximately more than this many loose objects in the repository,
auto gc will pack them. Some commands use this command to perform a light-weight
garbage collection from time to time. The default value is 6700.</p>
</div>
<div class="paragraph">
<p>Setting this to 0 disables not only automatic packing based on the number of
loose objects, but any other heuristic auto gc will otherwise use to determine
if there’s work to do, such as <a href="#gc.autoPackLimit">gc.autoPackLimit</a>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gc.autodetach"></a>gc.autodetach</dt>
<dd>
<div class="paragraph">
<p>Makes auto gc run in a background thread. Default is <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gc.autopacklimit"></a>gc.autopacklimit</dt>
<dd>
<div class="paragraph">
<p>When there are more than this many packs that are not marked with <code>*.keep</code> file
in the repository, auto gc consolidates them into one larger pack. The
default value is 50. Setting this to 0 disables it. Setting <code>gc.auto</code> to 0 will
also disable this.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gc.packRefs"></a>gc.packRefs</dt>
<dd>
<div class="paragraph">
<p>This variable determines whether gc runs git pack-refs. The default is <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gc.reflogExpire"></a>gc.reflogExpire</dt>
<dd>
<div class="paragraph">
<p>Removes reflog entries older than this time; defaults to 90 days. The value "now"
expires all entries immediately, and "never" suppresses expiration altogether.</p>
</div>
</dd>
<dt class="hdlist1"><a id="gc.reflogExpireUnreachable"></a>gc.reflogExpireUnreachable</dt>
<dd>
<div class="paragraph">
<p>Removes reflog entries older than this time and not reachable from the
current tip; defaults to 30 days. The value "now" expires all entries immediately,
and "never" suppresses expiration altogether.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="jgit-protocol">Section protocol</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="protocol.version"></a>protocol.version</dt>
<dd>
<div class="paragraph">
<p>If set, the server will accept requests from a client attempting to communicate
using the specified protocol version. Default is <code>2</code>. If set in file
<code>etc/jgit.config</code> this option will be used for all repositories of the site.
It can be overridden for a given repository by configuring a different value in
the repository&#8217;s <code>config</code> file.</p>
</div>
<div class="paragraph">
<p>Supported versions:</p>
</div>
</dd>
<dt class="hdlist1">0</dt>
<dd>
<p>the original wire protocol.</p>
</dd>
<dt class="hdlist1">1</dt>
<dd>
<p>the original wire protocol with the addition of a version string in the initial response from the server.</p>
</dd>
<dt class="hdlist1">2</dt>
<dd>
<p>wire protocol version 2. Speeds up fetches from repositories with many refs by allowing the client
to specify which refs to list before the server lists them.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="jgit-receive">Section receive</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="receive.autogc"></a>receive.autogc</dt>
<dd>
<div class="paragraph">
<p>By default, up to Gerrit 3.2 <code>git-receive-pack</code> will run auto gc after receiving data from git-push and updating refs.
You can stop it by setting this variable to <code>false</code>. This is recommended in gerrit to avoid the
additional load this creates. Instead schedule gc using <a href="cmd-gc.html#gc.startTime">gc.startTime</a>
and <a href="cmd-gc.html#gc.interval">gc.interval</a> or e.g. in a cron job that runs gc in a separate process.
Since Gerrit 3.3 the init command will auto-configure <code>git-receive-pack = false</code> in <code>etc/jgit.config</code> if
it wasn&#8217;t set manually and show a warning if it was set to <code>true</code> manually.</p>
</div>
</dd>
</dl>
</div>
<hr style="
  height: 2px;
  color: silver;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
">
<div class="paragraph">
<p>Part of <a href="index.html">Gerrit Code Review</a></p>
</div>
<div style="
  position:fixed;
  top:0px;
  right:0px;
  text-align:
  right;
  padding-top:2px;
  padding-right:0.5em;
  padding-bottom:2px;">
<input size="40"
  style="line-height: 0.75em;font-size: 0.75em;"
  id="docSearch"
  type="text">
<button style="
  background:none!important;
  border:none;
  padding:0!important;
  vertical-align:bottom;
  font-family:'Open Sans','DejaVu Sans',sans-serif;
  font-size:0.8em;
  color:#1d4b8f;
  text-decoration:none;"
  type="button"
  id="searchBox">
  Search
</button>

<script type="text/javascript">
var f = function() {
  window.location = '../#/Documentation/q/' +
    encodeURIComponent(document.getElementById("docSearch").value);
}
document.getElementById("searchBox").onclick = f;
document.getElementById("docSearch").onkeypress = function(e) {
  if (13 == (e.keyCode ? e.keyCode : e.which)) {
    f();
  }
}
</script>

</div>
<script type="text/javascript">
    decorate(document.getElementsByTagName('h1'));
    decorate(document.getElementsByTagName('h2'));
    decorate(document.getElementsByTagName('h3'));
    decorate(document.getElementsByTagName('h4'));

    var divs = document.getElementsByTagName('div');
    var arr = new Array();
    var excluded = getExcludedIds();
    for(var i = 0; i < divs.length; i++) {
      var d = divs[i];
      var id = d.getAttribute('id');
      if (id != null && !(id in excluded)) {
        arr[arr.length] = d;
      }
    }
    decorate(arr);

    var anchors = document.getElementsByTagName('a');
    arr = new Array();
    for(var i = 0; i < anchors.length; i++) {
      var a = anchors[i];
      // if the anchor has no id there is no target to
      // which we can link
      if (a.getAttribute('id') != null) {
        // if the anchor is empty there is no content which
        // can receive the mouseover event, an empty anchor
        // applies to the element that follows, move the
        // element that follows into the anchor so that there
        // is content which can receive the mouseover event
        if (a.firstChild == null) {
          var next = a.nextSibling;
          if (next != null) {
            next.parentNode.removeChild(next);
            a.appendChild(next);
          }
        }
        arr[arr.length] = a;
      }
    }
    decorate(arr);

    function decorate(e) {
      for(var i = 0; i < e.length; i++) {
        e[i].onmouseover = function (evt) {
          var element = this;
          // do nothing if the link icon is currently showing
          var a = element.firstChild;
          if (a != null && a instanceof Element
              && a.getAttribute('id') == 'LINK') {
            return;
          }

          // if there is no id there is no target to link to
          var id = element.getAttribute('id');
          if (id == null) {
            return;
          }

          // create and show a link icon that links to this element
          a = document.createElement('a');
          a.setAttribute('id', 'LINK');
          a.setAttribute('href', '#' + id);
          a.setAttribute('style', 'position: absolute;'
              + ' left: ' + (element.offsetLeft - 16 - 2 * 4) + 'px;'
              + ' padding-left: 4px; padding-right: 4px;');
          var span = document.createElement('span');
          span.setAttribute('style', 'height: ' + element.offsetHeight + 'px;'
              + ' display: inline-block; vertical-align: baseline;'
              + ' font-size: 16px; text-decoration: none; color: grey;');
          a.appendChild(span);
          var link = document.createTextNode('🔗');
          span.appendChild(link);
          element.insertBefore(a, element.firstChild);

          // remove the link icon when the mouse is moved away,
          // but keep it shown if the mouse is over the element, the link or
          // the icon
          hide = function(evt) {
            if (document.elementFromPoint(evt.clientX, evt.clientY) != element
                && document.elementFromPoint(evt.clientX, evt.clientY) != a
                && document.elementFromPoint(evt.clientX, evt.clientY) != span
                && document.elementFromPoint(evt.clientX, evt.clientY) != link
                && element.contains(a)) {
              element.removeChild(a);
            }
          }
          element.onmouseout = hide;
          a.onmouseout = hide;
          span.onmouseout = hide;
          link.onmouseout = hide;
        }
      }
    }

    function getExcludedIds() {
      var excluded = {};
      excluded['header'] = true;
      excluded['toc'] = true;
      excluded['toctitle'] = true;
      excluded['content'] = true;
      excluded['preamble'] = true;
      excluded['footer'] = true;
      excluded['footer-text'] = true;
      return excluded;
    }
</script>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v3.4.1<br>
</div>
</div>
<link rel="stylesheet" href="./prettify.min.css">
<script src="./prettify.min.js"></script>
<script>prettyPrint()</script>
</body>
</html>