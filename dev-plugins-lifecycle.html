<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Plugin Lifecycle</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Plugin Lifecycle</h1>
<div class="details">
<span id="revnumber">version v3.4.1</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#hosting_lifecycle">Hosting Lifecycle</a></li>
<li><a href="#ideation_discussion">Ideation and Discussion</a></li>
<li><a href="#plugin_prototyping">Plugin Prototyping</a></li>
<li><a href="#plugin_proposal">Plugin Proposal</a></li>
<li><a href="#build">Build</a></li>
<li><a href="#development_contribution">Development and Contribution</a></li>
<li><a href="#plugin_release">Plugin Release</a></li>
<li><a href="#plugin_deprecation">Plugin Deprecation</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Most of the plugins are hosted on the same instance as the
<a href="https://gerrit-review.googlesource.com" class="external" target="_blank" rel="noopener">Gerrit project itself</a> to make them
more discoverable and have more chances to be reviewed by the whole community.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hosting_lifecycle">Hosting Lifecycle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The process of writing a new plugin goes through different phases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ideation and Discussion:</p>
<div class="paragraph">
<p>The idea of creating a new plugin is posted and discussed on the
<a href="https://groups.google.com/d/forum/repo-discuss" class="external" target="_blank" rel="noopener">repo-discuss</a> mailing list.</p>
</div>
<div class="paragraph">
<p>Also see section link#ideation_discussion[Ideation and discussion] below.</p>
</div>
</li>
<li>
<p>Prototyping (optional):</p>
<div class="paragraph">
<p>The author of the plugin creates a working prototype on a public repository
accessible to the community.</p>
</div>
<div class="paragraph">
<p>Also see section link#plugin_prototyping[Plugin Prototyping] below.</p>
</div>
</li>
<li>
<p>Proposal and Hosting:</p>
<div class="paragraph">
<p>The author proposes to release the plugin under the
<a href="https://www.apache.org/licenses/LICENSE-2.0.html" class="external" target="_blank" rel="noopener">Apache 2.0 OpenSource</a> and requests the plugin to be hosted on
<a href="https://gerrit-review.googlesource.com" class="external" target="_blank" rel="noopener">the Gerrit project site</a>. The
proposal must be   accepted by at least one Gerrit maintainer. In case of
disagreement between maintainers, the issue can be escalated to the
<a href="dev-processes.html#steering-committee">Engineering Steering Committee</a>. If
the plugin is accepted, the Gerrit maintainer creates the project under the
plugins path on <a href="https://gerrit-review.googlesource.com" class="external" target="_blank" rel="noopener">the Gerrit project</a>.</p>
</div>
<div class="paragraph">
<p>Also see section link#plugin_proposal[Plugin Proposal] below.</p>
</div>
</li>
<li>
<p>Build:</p>
<div class="paragraph">
<p>To make the consumption of the plugin easy and to notice plugin breakages early
the plugin author should setup build jobs on
<a href="https://gerrit-ci.gerritforge.com" class="external" target="_blank" rel="noopener">the GerritForge CI</a> that build the
plugin for each Gerrit version that it supports.</p>
</div>
<div class="paragraph">
<p>Also see section link#build[Build] below.</p>
</div>
</li>
<li>
<p>Development and Contribution:</p>
<div class="paragraph">
<p>The author develops a production-ready code base of the plugin, with
contributions, reviews, and help from the Gerrit community.</p>
</div>
<div class="paragraph">
<p>Also see section link#development_contribution[Development and contribution]
below.</p>
</div>
</li>
<li>
<p>Release:</p>
<div class="paragraph">
<p>The author releases the plugin by creating a Git tag and announcing the plugin
on the <a href="https://groups.google.com/d/forum/repo-discuss" class="external" target="_blank" rel="noopener">repo-discuss</a>
mailing list.</p>
</div>
<div class="paragraph">
<p>Also see section link#plugin_release[Plugin release] below.</p>
</div>
</li>
<li>
<p>Maintenance:</p>
<div class="paragraph">
<p>The author maintains their plugins as new Gerrit versions are released, updates
them when necessary, develops further existing or new features and reviews
incoming contributions.</p>
</div>
</li>
<li>
<p>Deprecation:</p>
<div class="paragraph">
<p>The author declares that the plugin is not maintained anymore or is deprecated
and should not be used anymore.</p>
</div>
<div class="paragraph">
<p>Also see section link#plugin_deprecation[Plugin deprecation] below.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ideation_discussion">Ideation and Discussion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting a new plugin project is a community effort: it starts with the
identification of a gap in the Gerrit Code Review product but evolves with the
contribution of ideas and suggestions by the whole community.</p>
</div>
<div class="paragraph">
<p>The ideator of the plugin starts with an RFC (Request For Comments) post on the
<a href="https://groups.google.com/d/forum/repo-discuss" class="external" target="_blank" rel="noopener">repo-discuss</a> mailing list
with a description of the main reasons for starting a new plugin.</p>
</div>
<div class="paragraph">
<p>Example of a post:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  [RFC] Code-Formatter plugin

  Hello, community,
  I am proposing to create a new plugin for Gerrit called 'Code-Formatter', see
  the details below.

  *The gap*
  Often, when I post a new change to Gerrit, I forget to run the common code
  formatting tool (e.g. Google-Java-Format for the Gerrit project). I would
  like Gerrit to be in charge of highlighting these issues to me and save many
  people's time.

  *The proposal*
  The Code-Formatter plugin reads the formatting rules in the project config
  and applies them automatically to every patch-set. Any issue is reported as a
  regular review comment to the patchset, highlighting the part of the code to
  be changed.

  What do you think? Did anyone have the same idea or need?</pre>
</div>
</div>
<div class="paragraph">
<p>The idea is discussed on the mailing list and can evolve based on the needs and
inputs from the entire community.</p>
</div>
<div class="paragraph">
<p>After the discussion, the ideator of the plugin can decide to start prototyping
on it or park the proposal, if the feedback provided an alternative solution to
the problem. The prototype phase can be optionally skipped if the idea is clear
enough and receives a general agreement from the Gerrit maintainers. The author
can be given a "leap of faith" and can go directly to the format plugin
proposal (see below) and the creation of the plugin repository.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plugin_prototyping">Plugin Prototyping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The initial idea is translated to code by the plugin author. The development
can happen on any public or private source code repository and can involve one
or more contributors. The purpose of prototyping is to verify that the idea can
be implemented and provides the expected benefits.</p>
</div>
<div class="paragraph">
<p>Once a working prototype is ready, it can be announced as a follow-up to the
initial RFC proposal so that other members of the community can see the code
and try the plugin themselves.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plugin_proposal">Plugin Proposal</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The author decides that the plugin prototype makes sense as a general purpose
plugin and decides to release the code with the same
<a href="https://www.apache.org/licenses/LICENSE-2.0.html" class="external" target="_blank" rel="noopener">Apache 2.0 license</a>
as the Gerrit Code Review project and have it hosted on
<a href="https://gerrit-review.googlesource.com" class="external" target="_blank" rel="noopener">the Gerrit project site</a>.</p>
</div>
<div class="paragraph">
<p>The plugin author formalizes the proposal with a follow-up of the initial RFC
post and asks for public opinion on it.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  Re - [RFC] Code-Formatter plugin

  Hello, community,
  thanks for your feedback on the prototype. I have now decided to donate the
  project to the Gerrit Code Review project and make it a plugin:

  Plugin name:
  /plugins/code-formatter

  Plugin description:
    Plugin to allow automatic posting review based on code-formatting rules</pre>
</div>
</div>
<div class="paragraph">
<p>The community discusses the proposal and the value of the plugin for the whole
project; the result of the discussion can end up in one of the following cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The plugin&#8217;s project request is widely appreciated and formally accepted by
at least one Gerrit maintainer who creates the repository as child project of
'Public-Projects' on <a href="https://gerrit-review.googlesource.com" class="external" target="_blank" rel="noopener">the Gerrit</a>, creates an associated plugin owners group with "Owner"
permissions for the plugin and adds the plugin&#8217;s author as member of it.</p>
</li>
<li>
<p>The plugin&#8217;s project is widely appreciated; however, another existing plugin
already partially covers the same use-case and thus it would make more sense
to have the features integrated into the existing plugin. The new plugin&#8217;s
author contributes his prototype commits refactored to be included as change
into the existing plugin.</p>
</li>
<li>
<p>The plugin&#8217;s project is found useful; however, it is too specific to the
author&#8217;s use-case and would not make sense outside of it. The plugin remains
in a public repository, widely accessible and OpenSource, but not hosted on
<a href="https://gerrit-review.googlesource.com" class="external" target="_blank" rel="noopener">the Gerrit project site</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build">Build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin&#8217;s maintainer creates a job on the
<a href="https://gerrit-ci.gerritforge.com" class="external" target="_blank" rel="noopener">GerritForge CI</a> by creating a new YAML
definition in the <a href="https://gerrit.googlesource.com/gerrit-ci-scripts" class="external" target="_blank" rel="noopener">Gerrit
CI Scripts</a> repository.</p>
</div>
<div class="paragraph">
<p>Example of a YAML CI job for plugins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  - project:
    name: code-formatter
    jobs:
      - 'plugin-{name}-bazel-{branch}':
          branch:
            - master</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="development_contribution">Development and Contribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin follows the same lifecycle as Gerrit Code Review and needs to be
kept up-to-date with the current active branches, according to the
<a href="https://www.gerritcodereview.com/#support" class="external" target="_blank" rel="noopener">current support policy</a>.
During the development, the plugin&#8217;s maintainer can reward contributors
requesting to be more involved and making them maintainers of his plugin,
adding them to the list of the project owners.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plugin_release">Plugin Release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin&#8217;s maintainer is the only person responsible for making and
announcing the official releases, typically, but not limited to, in conjunction
with the major releases of Gerrit Code Review. The plugin&#8217;s maintainer may tag
his plugin and follow the notation and semantics of the Gerrit Code Review
project; however it is not mandatory and many of the plugins do not have any
tags or releases.</p>
</div>
<div class="paragraph">
<p>Example of a YAML CI job for a plugin compatible with multiple Gerrit versions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  - project:
    name: code-formatter
    jobs:
      - 'plugin-{name}-bazel-{branch}-{gerrit-branch}':
          branch:
            - master
          gerrit-branch:
            - master
            - stable-3.0
            - stable-2.16</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plugin_deprecation">Plugin Deprecation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin&#8217;s maintainer and the community have agreed that the plugin is not
useful anymore or there isn&#8217;t anyone willing to contribute to bringing it
forward and keeping it up-to-date with the recent versions of Gerrit Code
Review.</p>
</div>
<div class="paragraph">
<p>The plugin&#8217;s maintainer puts a deprecation notice in the README.md of the
plugin and pushes it for review. If nobody is willing to bring the code
forward, the change gets merged, and the master branch is removed from the list
of branches to be built on the GerritFoge CI.</p>
</div>
<hr style="
  height: 2px;
  color: silver;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
">
<div class="paragraph">
<p>Part of <a href="index.html">Gerrit Code Review</a></p>
</div>
<div style="
  position:fixed;
  top:0px;
  right:0px;
  text-align:
  right;
  padding-top:2px;
  padding-right:0.5em;
  padding-bottom:2px;">
<input size="40"
  style="line-height: 0.75em;font-size: 0.75em;"
  id="docSearch"
  type="text">
<button style="
  background:none!important;
  border:none;
  padding:0!important;
  vertical-align:bottom;
  font-family:'Open Sans','DejaVu Sans',sans-serif;
  font-size:0.8em;
  color:#1d4b8f;
  text-decoration:none;"
  type="button"
  id="searchBox">
  Search
</button>

<script type="text/javascript">
var f = function() {
  window.location = '../#/Documentation/q/' +
    encodeURIComponent(document.getElementById("docSearch").value);
}
document.getElementById("searchBox").onclick = f;
document.getElementById("docSearch").onkeypress = function(e) {
  if (13 == (e.keyCode ? e.keyCode : e.which)) {
    f();
  }
}
</script>

</div>
<script type="text/javascript">
    decorate(document.getElementsByTagName('h1'));
    decorate(document.getElementsByTagName('h2'));
    decorate(document.getElementsByTagName('h3'));
    decorate(document.getElementsByTagName('h4'));

    var divs = document.getElementsByTagName('div');
    var arr = new Array();
    var excluded = getExcludedIds();
    for(var i = 0; i < divs.length; i++) {
      var d = divs[i];
      var id = d.getAttribute('id');
      if (id != null && !(id in excluded)) {
        arr[arr.length] = d;
      }
    }
    decorate(arr);

    var anchors = document.getElementsByTagName('a');
    arr = new Array();
    for(var i = 0; i < anchors.length; i++) {
      var a = anchors[i];
      // if the anchor has no id there is no target to
      // which we can link
      if (a.getAttribute('id') != null) {
        // if the anchor is empty there is no content which
        // can receive the mouseover event, an empty anchor
        // applies to the element that follows, move the
        // element that follows into the anchor so that there
        // is content which can receive the mouseover event
        if (a.firstChild == null) {
          var next = a.nextSibling;
          if (next != null) {
            next.parentNode.removeChild(next);
            a.appendChild(next);
          }
        }
        arr[arr.length] = a;
      }
    }
    decorate(arr);

    function decorate(e) {
      for(var i = 0; i < e.length; i++) {
        e[i].onmouseover = function (evt) {
          var element = this;
          // do nothing if the link icon is currently showing
          var a = element.firstChild;
          if (a != null && a instanceof Element
              && a.getAttribute('id') == 'LINK') {
            return;
          }

          // if there is no id there is no target to link to
          var id = element.getAttribute('id');
          if (id == null) {
            return;
          }

          // create and show a link icon that links to this element
          a = document.createElement('a');
          a.setAttribute('id', 'LINK');
          a.setAttribute('href', '#' + id);
          a.setAttribute('style', 'position: absolute;'
              + ' left: ' + (element.offsetLeft - 16 - 2 * 4) + 'px;'
              + ' padding-left: 4px; padding-right: 4px;');
          var span = document.createElement('span');
          span.setAttribute('style', 'height: ' + element.offsetHeight + 'px;'
              + ' display: inline-block; vertical-align: baseline;'
              + ' font-size: 16px; text-decoration: none; color: grey;');
          a.appendChild(span);
          var link = document.createTextNode('🔗');
          span.appendChild(link);
          element.insertBefore(a, element.firstChild);

          // remove the link icon when the mouse is moved away,
          // but keep it shown if the mouse is over the element, the link or
          // the icon
          hide = function(evt) {
            if (document.elementFromPoint(evt.clientX, evt.clientY) != element
                && document.elementFromPoint(evt.clientX, evt.clientY) != a
                && document.elementFromPoint(evt.clientX, evt.clientY) != span
                && document.elementFromPoint(evt.clientX, evt.clientY) != link
                && element.contains(a)) {
              element.removeChild(a);
            }
          }
          element.onmouseout = hide;
          a.onmouseout = hide;
          span.onmouseout = hide;
          link.onmouseout = hide;
        }
      }
    }

    function getExcludedIds() {
      var excluded = {};
      excluded['header'] = true;
      excluded['toc'] = true;
      excluded['toctitle'] = true;
      excluded['content'] = true;
      excluded['preamble'] = true;
      excluded['footer'] = true;
      excluded['footer-text'] = true;
      return excluded;
    }
</script>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v3.4.1<br>
</div>
</div>
<link rel="stylesheet" href="./prettify.min.css">
<script src="./prettify.min.js"></script>
<script>prettyPrint()</script>
</body>
</html>